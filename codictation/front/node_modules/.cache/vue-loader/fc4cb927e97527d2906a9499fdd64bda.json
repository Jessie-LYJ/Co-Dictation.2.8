{"remainingRequest":"D:\\project\\codictation.2.7\\codictation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\codictation.2.7\\codictation\\src\\components\\profile\\mymistakes.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\codictation.2.7\\codictation\\src\\components\\profile\\mymistakes.vue","mtime":1618036468790},{"path":"D:\\project\\codictation.2.7\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\codictation.2.7\\codictation\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\project\\codictation.2.7\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.transform-quasar-imports.js","mtime":499162500000},{"path":"D:\\project\\codictation.2.7\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.auto-import.js","mtime":499162500000},{"path":"D:\\project\\codictation.2.7\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\codictation.2.7\\codictation\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG5hbWU6ICIiLCAvL+W9k+WJjeeUqOaIt+eahOeUqOaIt+WQjQ0KICAgICAgLy91c2VySWQ6ICIiLCAvL+W9k+WJjeeUqOaIt+eahF9pZCAg5Y+v5qC55o2u6L+Z5Lik5Liq5L+h5oGv5Y675pWw5o2u5bqTVXNlcuWPluaVsOaNrg0KICAgICAgYXBpOiAiL3Njb3JlIiwNCiAgICAgIFdyb25nTGlzdHM6IFtdLA0KICAgICAgbGlzdFR5cGU6IFtdLA0KICAgICAgaXNsaXN0VHlwZTpmYWxzZSwNCiAgICAgIC8vIGNoZWNrZWRUeXBlOiIgIiwNCiAgICAgIHNlbnRlbmNlczogW10sDQogICAgICBpc1Nob3c6IGZhbHNlLA0KICAgICAgZmlsZU5hbWU6IjNlZWZlNjlkZWYxZTdjMjBhNzY2NzVlYmExNjBiODIwLm1wMyIsDQogICAgICBlbmRUaW1lOiIiLA0KICAgICAgc3RhcnRUaW1lOiIiLA0KDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLm5hbWUgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyTmFtZSIpOw0KICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSk7DQogICAgdGhpcy4kYXhpb3MuZ2V0KHRoaXMuYXBpICsgIi93cm9uZ0xpc3QvP25hbWU9IiArIHRoaXMubmFtZSkudGhlbigocmVzKSA9PiB7DQogICAgICB2YXIgbGlzdCA9IHJlcy5kYXRhLm15V3JvbmdMaXN0czsNCiAgICAgIHRoaXMuV3JvbmdMaXN0cyA9IHJlcy5kYXRhLm15V3JvbmdMaXN0czsNCg0KICAgICAgLy8gdmFyIHR5cGUgPSB0aGlzLmNoZWNrZWRUeXBlDQoNCiAgICAgIC8v562b6YCJ5a+55bqU55qE57G75Z6L55qE5Y+l5a2QDQoNCiAgICAgIC8v6L+U5Zue5a2Y5Zyo55qE6ZSZ6K+v57G75Z6LDQogICAgICBsZXQgbGlzdDIgPSBsaXN0Lm1hcCgoaXRlbSkgPT4gaXRlbS50eXBlKTsNCiAgICAgIGxldCBsaXN0MyA9IGxpc3QyLmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgsIHNlbGYpIHsNCiAgICAgICAgcmV0dXJuIHNlbGYuaW5kZXhPZihlbGVtZW50KSA9PT0gaW5kZXg7DQogICAgICB9KTsNCiAgICAgIHRoaXMubGlzdFR5cGUgPSBsaXN0MzsNCiAgICAgIGlmKHRoaXMubGlzdFR5cGUubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLmlzbGlzdFR5cGUgPSB0cnVlOw0KICAgICAgfQ0KICAgIH0pOw0KICB9LA0KICBtb3VudGVkKCl7DQogICAgICAvL+ebkeWQrOaSreaUvuaXtumXtA0KICAgIHZhciBwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW8nKTsNCiAgICBwbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsdGhpcy5sb29wUGxheWVyKQ0KICB9LA0KICBtZXRob2RzOiB7DQoNCiAgIGxvb3BQbGF5ZXIoKXsNCiAgICAgICAgdmFyIHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpbycpOw0KICAgICAgICB2YXIgdGltZURpc3BsYXk7DQogICAgICAgIHRpbWVEaXNwbGF5ID0gcGxheWVyLmN1cnJlbnRUaW1lOw0KICAgICAgICAvLyBjb25zb2xlLmxvZyh0aW1lRGlzcGxheSkNCiAgICAgICAgLy90cyAxMi4zMyDkuKTkvY3lsI/mlbANCiAgICAgICAgLy8gdmFyIHRzID0gTWF0aC5mbG9vcih0aW1lRGlzcGxheSAqIDEwMCkgLyAxMDANCg0KICAgICAgICAvLyBmbG9vcig1NC45OCkgLS0gNTQgICAgY2VpbCg1NC4xMikgLS0gNTUNCiAgICAgICAgdmFyIHBsYXllZCA9IE1hdGguZmxvb3IodGltZURpc3BsYXkpDQogICAgICAgIHZhciBlbmRlZCA9IE1hdGguY2VpbCh0aGlzLmVuZFRpbWUpDQogICAgICAgIHZhciBkdXJhdGlvbiA9IHBsYXllci5kdXJhdGlvbg0KICAgICAgICBpZiAoZW5kZWQ+ZHVyYXRpb24pew0KICAgICAgICAgIHBsYXllZCA9IHRpbWVEaXNwbGF5DQogICAgICAgICAgZW5kZWQgPSBkdXJhdGlvbg0KICAgICAgICB9DQogICAgICAgIGlmKHBsYXllZCA9PSBlbmRlZCl7DQogICAgICAgIGNvbnNvbGUubG9nKHRpbWVEaXNwbGF5KQ0KICAgICAgICBjb25zb2xlLmxvZygicGF1c2UiKQ0KICAgICAgICBwbGF5ZXIucGF1c2UoKQ0KICAgICAgICBwbGF5ZXIuY3VycmVudFRpbWUgPSB0aGlzLnN0YXJ0VGltZQ0KICAgICAgICBwbGF5ZXIucGxheSgpDQogICAgICAgIH0NCiAgIH0sDQoNCiAgIHBsYXlBdWRpbyhzVGltZSxlVGltZSxmTmFtZSxpbmRleCxpc1BsYXkpew0KICAgIHZhciBwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXVkaW8iKTsgDQogICAgaWYgKGlzUGxheSA9PSAiUGxheSIpew0KICAgICAgICBjb25zb2xlLmxvZyhmTmFtZSkNCiAgICAgIHRoaXMuZmlsZU5hbWUgPSBmTmFtZQ0KICAgICAgdGhpcy5lbmRUaW1lID0gZVRpbWUNCiAgICAgIHRoaXMuc3RhcnRUaW1lID0gc1RpbWUNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhcnRUaW1lKQ0KICAgICAgY29uc29sZS5sb2codGhpcy5lbmRUaW1lKQ0KICAgICAgcGxheWVyLmN1cnJlbnRUaW1lID0gdGhpcy5zdGFydFRpbWUNCiAgICAgIHBsYXllci5wbGF5KCkNCiAgICAgIHRoaXMuc2VudGVuY2VzW2luZGV4XS5pc1BsYXkgPSAiUGF1c2UiDQogICAgfWVsc2V7DQogICAgICBwbGF5ZXIucGF1c2UoKQ0KICAgICAgdGhpcy5zZW50ZW5jZXNbaW5kZXhdLmlzUGxheSA9ICJQbGF5Ig0KICAgIH0NCiAgIH0sDQogICBzdG9wKCl7DQogICAgdmFyIHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhdWRpbyIpOw0KICAgIHBsYXllci5jdXJyZW50VGltZSA9IHRoaXMuc3RhcnRUaW1lDQogICAgcGxheWVyLnBhdXNlKCkNCiAgICB0aGlzLmlzUGxheSA9IHRydWUNCiAgIH0sDQoNCiAgIFRvU2Vjb25kKHQpew0KICAgICB2YXIgcyA9IDAuMDsNCiAgICAgICAgaWYodCl7DQogICAgICAgICAgdmFyIHAgPSB0LnNwbGl0KCI6Iik7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHMgPSBzICogNjAgKyBwYXJzZUZsb2F0KHBbaV0ucmVwbGFjZSgiLCIsICIuIikpOw0KICAgICAgICB9DQogICAgfQ0KICAgIHJldHVybiBzDQogICB9LA0KDQogICAgY2hhbmdldHlwZShpdGVtKSB7DQogICAgICANCiAgICAgICAgdmFyIGxpc3QgPSB0aGlzLldyb25nTGlzdHM7DQogICAgICAgIGxldCBuZXdMaXN0ID0gbGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHsNCiAgICAgICAgICByZXR1cm4gZWxlbWVudC50eXBlID09IGl0ZW07DQogICAgICAgIH0pOyANCiAgICAgICAgbGV0IGFyciA9IFtdOw0KICAgICAgICBuZXdMaXN0LmZvckVhY2goKGUpID0+IHsNCiAgICAgICAgICB2YXIgc3RhcnRTID0gdGhpcy5Ub1NlY29uZChlLnNUaW1lKQ0KICAgICAgICAgIHZhciBlbmRTID0gdGhpcy5Ub1NlY29uZChlLmVUaW1lKQ0KICAgICAgICAgIHZhciBuZXdBcnIgPSB7DQogICAgICAgICAgICBzdG46ZS5zZW50ZW5jZSwNCiAgICAgICAgICAgIHNUaW1lOnN0YXJ0UysiIiwNCiAgICAgICAgICAgIGVUaW1lOmVuZFMrIiIsDQogICAgICAgICAgICBmTmFtZTplLmZpbGVuYW1lLA0KICAgICAgICAgICAgaXNQbGF5OiJQbGF5IiwNCiAgICAgICAgICB9DQogICAgICAgICAgYXJyLnB1c2gobmV3QXJyKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgdGhpcy5zZW50ZW5jZXMgPSBhcnI7DQogICAgICAgIHRoaXMuaXNTaG93ID0gdHJ1ZTsNCiAgICAgICAgY29uc29sZS5sb2coYXJyKTsNCiAgICAgICAgLy8gY29uc29sZS5sb2coImIiLCB0aGlzLmlzU2hvdyk7DQogICAgICANCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["mymistakes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"mymistakes.vue","sourceRoot":"src/components/profile","sourcesContent":["<template>\r\n<div>\r\n  <q-page class=\"q-pa-lg\">\r\n      <div id=\"container\" v-if=\"islistType\">\r\n        <template v-for=\"item in listType\" class=\"type\">\r\n          <q-btn\r\n            color=\"purple\"\r\n            :label=\"item\"\r\n            @click=\"changetype(item)\"\r\n            :key=\"item\"\r\n            style=\"margin-left: 7px;margin-bottom:17px\"\r\n          />\r\n        </template>\r\n\r\n          <template v-for=\"(item, index) in sentences\">\r\n            <el-card :key=\"item.stn\" shadow=\"always\" style=\"margin-top: 5px\"\r\n              ><span v-html=\"item.stn\"> </span>\r\n              <q-btn\r\n                size=\"sm\"\r\n                color=\"purple\"\r\n                :label=\"item.isPlay\"\r\n                @click=\"\r\n                  playAudio(\r\n                    item.sTime,\r\n                    item.eTime,\r\n                    item.fName,\r\n                    index,\r\n                    item.isPlay\r\n                  )\r\n                \"\r\n                :key=\"item.sTime\"\r\n                style=\"margin-left: 7px\"\r\n              />\r\n            </el-card>\r\n          </template>\r\n\r\n      </div>\r\n      <div v-else>\r\n        No \r\n      </div>\r\n    </q-page>\r\n\r\n<!-- <button @click=\"playAudio('5','10')\">play</button> -->\r\n<div class=\"audio-box q-mr-sm\">\r\n<audio\r\n        :src=\"require('@/assets/video/' + fileName)\"\r\n        id=\"audio\"\r\n        controls\r\n        hidden\r\n></audio>\r\n\r\n</div>\r\n\r\n</div>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      name: \"\", //当前用户的用户名\r\n      //userId: \"\", //当前用户的_id  可根据这两个信息去数据库User取数据\r\n      api: \"/score\",\r\n      WrongLists: [],\r\n      listType: [],\r\n      islistType:false,\r\n      // checkedType:\" \",\r\n      sentences: [],\r\n      isShow: false,\r\n      fileName:\"3eefe69def1e7c20a76675eba160b820.mp3\",\r\n      endTime:\"\",\r\n      startTime:\"\",\r\n\r\n    };\r\n  },\r\n  created() {\r\n    this.name = sessionStorage.getItem(\"userName\");\r\n    console.log(this.name);\r\n    this.$axios.get(this.api + \"/wrongList/?name=\" + this.name).then((res) => {\r\n      var list = res.data.myWrongLists;\r\n      this.WrongLists = res.data.myWrongLists;\r\n\r\n      // var type = this.checkedType\r\n\r\n      //筛选对应的类型的句子\r\n\r\n      //返回存在的错误类型\r\n      let list2 = list.map((item) => item.type);\r\n      let list3 = list2.filter(function (element, index, self) {\r\n        return self.indexOf(element) === index;\r\n      });\r\n      this.listType = list3;\r\n      if(this.listType.length > 0) {\r\n        this.islistType = true;\r\n      }\r\n    });\r\n  },\r\n  mounted(){\r\n      //监听播放时间\r\n    var player = document.getElementById('audio');\r\n    player.addEventListener('timeupdate',this.loopPlayer)\r\n  },\r\n  methods: {\r\n\r\n   loopPlayer(){\r\n        var player = document.getElementById('audio');\r\n        var timeDisplay;\r\n        timeDisplay = player.currentTime;\r\n        // console.log(timeDisplay)\r\n        //ts 12.33 两位小数\r\n        // var ts = Math.floor(timeDisplay * 100) / 100\r\n\r\n        // floor(54.98) -- 54    ceil(54.12) -- 55\r\n        var played = Math.floor(timeDisplay)\r\n        var ended = Math.ceil(this.endTime)\r\n        var duration = player.duration\r\n        if (ended>duration){\r\n          played = timeDisplay\r\n          ended = duration\r\n        }\r\n        if(played == ended){\r\n        console.log(timeDisplay)\r\n        console.log(\"pause\")\r\n        player.pause()\r\n        player.currentTime = this.startTime\r\n        player.play()\r\n        }\r\n   },\r\n\r\n   playAudio(sTime,eTime,fName,index,isPlay){\r\n    var player = document.getElementById(\"audio\"); \r\n    if (isPlay == \"Play\"){\r\n        console.log(fName)\r\n      this.fileName = fName\r\n      this.endTime = eTime\r\n      this.startTime = sTime\r\n      console.log(this.startTime)\r\n      console.log(this.endTime)\r\n      player.currentTime = this.startTime\r\n      player.play()\r\n      this.sentences[index].isPlay = \"Pause\"\r\n    }else{\r\n      player.pause()\r\n      this.sentences[index].isPlay = \"Play\"\r\n    }\r\n   },\r\n   stop(){\r\n    var player = document.getElementById(\"audio\");\r\n    player.currentTime = this.startTime\r\n    player.pause()\r\n    this.isPlay = true\r\n   },\r\n\r\n   ToSecond(t){\r\n     var s = 0.0;\r\n        if(t){\r\n          var p = t.split(\":\");\r\n        for (let i = 0; i < p.length; i++) {\r\n          s = s * 60 + parseFloat(p[i].replace(\",\", \".\"));\r\n        }\r\n    }\r\n    return s\r\n   },\r\n\r\n    changetype(item) {\r\n      \r\n        var list = this.WrongLists;\r\n        let newList = list.filter(function (element) {\r\n          return element.type == item;\r\n        }); \r\n        let arr = [];\r\n        newList.forEach((e) => {\r\n          var startS = this.ToSecond(e.sTime)\r\n          var endS = this.ToSecond(e.eTime)\r\n          var newArr = {\r\n            stn:e.sentence,\r\n            sTime:startS+\"\",\r\n            eTime:endS+\"\",\r\n            fName:e.filename,\r\n            isPlay:\"Play\",\r\n          }\r\n          arr.push(newArr);\r\n        });\r\n\r\n        this.sentences = arr;\r\n        this.isShow = true;\r\n        console.log(arr);\r\n        // console.log(\"b\", this.isShow);\r\n      \r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\nins {\r\n  color: green;\r\n  font-weight: bold;\r\n}\r\n\r\nsubins {\r\n  color: blue;\r\n}\r\n\r\ndel {\r\n  color: indianred;\r\n}\r\n</style>\r\n"]}]}