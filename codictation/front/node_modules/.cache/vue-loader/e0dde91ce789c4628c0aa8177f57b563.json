{"remainingRequest":"D:\\资料\\codictation.2.2\\codictation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\资料\\codictation.2.2\\codictation\\src\\components\\comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\资料\\codictation.2.2\\codictation\\src\\components\\comment.vue","mtime":1615344192435},{"path":"D:\\资料\\codictation.2.2\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\资料\\codictation.2.2\\codictation\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\资料\\codictation.2.2\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.transform-quasar-imports.js","mtime":499162500000},{"path":"D:\\资料\\codictation.2.2\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.auto-import.js","mtime":499162500000},{"path":"D:\\资料\\codictation.2.2\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\资料\\codictation.2.2\\codictation\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgQXZhdGFyT3JnIGZyb20gIi4uL2NvbXBvbmVudHMvYmFzaWMvQXZhdGFyIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21tZW50TGlzdDogW10sCiAgICAgIGNvbW1lbnQ6ICIiLAogICAgICBuYW1lOiAiIiwKICAgICAgcmVwbHlDb21tZW50OiAiIiwKICAgICAgaXNTaG93OiBmYWxzZSwKICAgICAgY3VycmVudFJldmlld2VyOiAiIiwKICAgICAgY3VycmVudFJlc3BvbmRlcjogIiIsCiAgICAgIGN1cnJlbnRJbmRleDogMCwKICAgICAgaXNNYWluUmVwbHk6IGZhbHNlLAogICAgICBkaWZmSWQ6ICIiLAogICAgICBhcGk6ICIvYXBpIiwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICAgIEF2YXRhck9yZwogICAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRsaWtlKGNvbVRpbWUpewogICAgICB0aGlzLiRheGlvcy5wb3N0KCIvc2NvcmUvYWRkbGlrZSIsewogICAgICAgICAgICAgIHBhcmFtczoge19pZDogdGhpcy5kaWZmSWQsbmFtZTogdGhpcy5uYW1lLGNvbVRpbWU6Y29tVGltZX0sIAogICAgICAgICAgICAgIH0pCiAgICB9LAogICAgcmVtb3ZlbGlrZShjb21UaW1lKXsKICAgICAgdGhpcy4kYXhpb3MucG9zdCgiL3Njb3JlL3JlbW92ZWxpa2UiLHsKICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7X2lkOiB0aGlzLmRpZmZJZCxuYW1lOiB0aGlzLm5hbWUsY29tVGltZTpjb21UaW1lfSwgCiAgICAgICAgICAgICAgICAgIH0pCiAgICB9LAogICAgIGxpa2VDbGljayhpdGVtLGluZGV4KSB7CiAgICAgICB2YXIgY29tVGltZSA9IGl0ZW0udGltZQogICAgICAgIGlmIChpdGVtLmlzTGlrZSA9PT0gbnVsbCkgewogICAgICAgICAgVnVlLiRzZXQoaXRlbSwgImlzTGlrZSIsIHRydWUpOwogICAgICAgICAgaXRlbS5saWtlTnVtKysKICAgICAgICAgICAgICB0aGlzLmFkZGxpa2UoY29tVGltZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGl0ZW0uaXNMaWtlKSB7CiAgICAgICAgICAgIGl0ZW0ubGlrZU51bS0tCgogICAgICAgICAgICB0aGlzLnJlbW92ZWxpa2UoY29tVGltZSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGl0ZW0ubGlrZU51bSsrCiAgICAgICAgICAgICAgdGhpcy5hZGRsaWtlKGNvbVRpbWUpCiAgICAgICAgICB9CiAgICAgICAgICBpdGVtLmlzTGlrZSA9ICFpdGVtLmlzTGlrZTsKICAgICAgICB9CiAgICAgIH0sCgogICAgLy8gfSwKICAgIHN1Ym1pdENvbSgpIHsKICAgICAgLy8gbGV0IGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAvLyBsZXQgc3ViVGltZSA9IGRhdGUudG9Mb2NhbGVTdHJpbmcoImNoaW5lc2UiLCB7CiAgICAgIC8vICAgaG91cjEyOiBmYWxzZSwKICAgICAgLy8gfSk7IC8v6I635b6X5b2T5YmN5pe26Ze0CiAgICAgIGxldCBzdWJUaW1lPXRoaXMuJG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoIllZWVkvTU0vREQgSEg6bW06c3MiKQogICAgICBpZiAodGhpcy5jb21tZW50KSB7CiAgICAgICAgbGV0IGl0ZW0gPSB7CiAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgICB0aW1lOiBzdWJUaW1lLAogICAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50LAogICAgICAgICAgcmVwbHk6IFtdLAogICAgICAgIH07CiAgICAgICAgdGhpcy5jb21tZW50TGlzdC5wdXNoKGl0ZW0pOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY29tbWVudExpc3QpCiAgICAgICAgdGhpcy4kYXhpb3MKICAgICAgICAgIC5wb3N0KHRoaXMuYXBpICsgIi91cGRhdGVjb21tZW50IiwgewogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBfaWQ6IHRoaXMuZGlmZklkLAogICAgICAgICAgICAgIGNvbW1lbnRzOiB0aGlzLmNvbW1lbnRMaXN0LAogICAgICAgICAgICB9LAogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICAgIH0pOwogICAgICAgIC8v5bCG6K+E6K665YiX6KGo5pu05paw5Yiw5pWw5o2u5bqTCiAgICAgICAgdGhpcy5jb21tZW50ID0gIiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/ovpPlhaXnmoTlhoXlrrnkuLrnqboKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgLy8gdGl0bGU6ICLorablkYoiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgbWVzc2FnZTogIuivt+mHjeaWsOehruiupO+8jOaCqOW5tuacqui+k+WFpeWGheWuueWTpn4iLAogICAgICAgICAgcG9zaXRpb246ICJib3R0b20tcmlnaHQiLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc3VibWl0UmVwbHkoaW5kZXgpIHsKICAgICAgLy8g5Zue5aSN6K+E6K66CiAgICAgIC8vIGxldCBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgLy8gbGV0IHN1YlRpbWUgPSBkYXRlLnRvTG9jYWxlU3RyaW5nKCJjaGluZXNlIiwgewogICAgICAvLyAgIGhvdXIxMjogZmFsc2UsCiAgICAgIC8vIH0pOyAvL+iOt+W+l+W9k+WJjeaXtumXtAogICAgICBsZXQgc3ViVGltZT10aGlzLiRtb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KCJZWVlZL01NL0REIEhIOm1tOnNzIikKICAgICAgaWYgKHRoaXMucmVwbHlDb21tZW50KSB7CiAgICAgICAgbGV0IHJlcGx5SXRlbSA9IHsKICAgICAgICAgIHJldmlld2VyOiB0aGlzLmN1cnJlbnRSZXZpZXdlciwKICAgICAgICAgIHJlc3BvbmRlcjogdGhpcy5jdXJyZW50UmVzcG9uZGVyLCAvL+WbnuWkjeeahOeUqOaIt+WQjQogICAgICAgICAgdGltZTogc3ViVGltZSwKICAgICAgICAgIGNvbW1lbnQ6IHRoaXMucmVwbHlDb21tZW50LAogICAgICAgICAgcmVwbHkyOiBbXSwKICAgICAgICB9OwogICAgICAgIGNvbnNvbGUubG9nKHJlcGx5SXRlbSk7CiAgICAgICAgdGhpcy5jb21tZW50TGlzdFt0aGlzLmN1cnJlbnRJbmRleF0ucmVwbHkucHVzaChyZXBseUl0ZW0pOwogICAgICAgIHRoaXMuJGF4aW9zCiAgICAgICAgICAucG9zdCh0aGlzLmFwaSArICIvdXBkYXRlQ29tbWVudCIsIHsKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgX2lkOiB0aGlzLmRpZmZJZCwKICAgICAgICAgICAgICBjb21tZW50czogdGhpcy5jb21tZW50TGlzdCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgICAgICB9KTsKICAgICAgICB0aGlzLnJlcGx5Q29tbWVudCA9ICIiOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnB1dCIgKyBpbmRleCkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvL+i+k+WFpeeahOWGheWuueS4uuepugogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAvLyB0aXRsZTogIuitpuWRiiIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36YeN5paw56Gu6K6k77yM5oKo5bm25pyq6L6T5YWl5YaF5a655ZOmfiIsCiAgICAgICAgICBwb3NpdGlvbjogImJvdHRvbS1yaWdodCIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZXBseShpbmRleCwgcmV2aWV3ZXIpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlucHV0IiArIGluZGV4KS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBpbmRleDsKICAgICAgdGhpcy5jdXJyZW50UmV2aWV3ZXIgPSByZXZpZXdlcjsgLy/lvZPliY3ooqvor4TorrrnmoTkuroKICAgICAgdGhpcy5jdXJyZW50UmVzcG9uZGVyID0gdGhpcy5uYW1lOyAvL+W9k+WJjeeUqOaItwogICAgICAvL+WIpOaWreaYr+WQpuS4uuWbnuWkjeivhOiuuu+8jOaYvuekuuS4jeWQjOeahOaMiemSrgogICAgICAvLyBpZiAocmV2aWV3ZXIgPT0gdGhpcy5jb21tZW50TGlzdFtpbmRleF0ubmFtZSkgewogICAgICAvLyAgIHRoaXMuaXNNYWluUmVwbHkgPSB0cnVlOwogICAgICAvLyB9CiAgICB9LAogICAgY2FuY2VsUmVwbHkoaW5kZXgpewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5wdXQiICsgaW5kZXgpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9LAogIH0sCiAgIGNyZWF0ZWQoKSB7CiAgICAgdGhpcy5uYW1lID0gIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJOYW1lIikKICAgICB0aGlzLmRpZmZJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5kaWZmSWQ7CiAgICAgY29uc3QgbmFtZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJOYW1lIikKICAgIC8v6K+35rGC5pWw5o2uCiAgICAgdGhpcy4kYXhpb3MKICAgICAgLmdldCh0aGlzLmFwaSArICIvY3VycmVudFRhc2s/X2lkPSIgKyB0aGlzLmRpZmZJZCkKICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgIC8vIHRoaXMuY29tbWVudExpc3QgPSByZXMuZGF0YVswXS5jb21tZW50czsKICAgICAgICAgIHZhciBjb21tZW50TGlzdCA9IHJlcy5kYXRhWzBdLmNvbW1lbnRzOwogICAgICAgICAgLy8gY29uc29sZS5sb2coY29tbWVudExpc3QpCiAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY29tbWVudExpc3QubGVuZ3RoOyBpKyspewogICAgICAgICAgICAgICAgaWYoY29tbWVudExpc3RbaV0ubGlrZU5hbWUpewogICAgICAgICAgICAgICAgICAgY29uc3QgaXNOYW1lID0gY29tbWVudExpc3RbaV0ubGlrZU5hbWUuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtID09IG5hbWUpCiAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiYWFhYWFhYSIpCiAgICAgICAgICAgICAgICAgICAgICBpZihpc05hbWU9PS0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudExpc3RbaV0uaXNMaWtlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50TGlzdFtpXS5pc0xpa2UgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgIGNvbW1lbnRMaXN0W2ldLmlzTGlrZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgIGNvbW1lbnRMaXN0W2ldLmxpa2VOdW0gPSAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY29tbWVudExpc3QpCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmNvbW1lbnRMaXN0ID0gY29tbWVudExpc3QKCiAgICAgIH0pOwogIH0sCn07Cg=="},{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"comment.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n    <div v-if=\"commentList.length > 0\">\n      <div class=\"comment\" v-for=\"(item, index) in commentList\" :key=\"item.time\">\n    \n        <div class=\"info\">\n          <avatar-org class=\"avatar\"  width=\"40\" height=\"40\"></avatar-org>\n        <div class=\"right\">  \n        <div class=\"name\">{{ item.name }}</div>\n        <div class=\"date\">{{ item.time }}</div>\n        </div>\n        </div>\n        <div class=\"content\">{{ item.comment }}</div>\n\n        <div class=\"control\">\n        <span class=\"like\" :class=\"{active: item.isLike}\" @click=\"likeClick(item,index)\">\n          <i class=\"iconfont icon-like\"></i>\n          <span class=\"like-num\">{{item.likeNum > 0 ? item.likeNum + '人赞' : '赞'}}</span>\n        </span>\n        <span class=\"comment-reply\" @click=\"reply(index, item.name)\">\n          <i class=\"iconfont icon-comment\"></i>\n          <span>回复</span>\n        </span>\n      </div>\n\n        <!-- 每条评论的回复列表 -->\n        <div class=\"reply\">\n        <div  class=\"item\" v-for=\"replyitem in item.reply\" :key=\"replyitem.time\">\n          <div class=\"reply-content\" >\n          <span class=\"from-name\">{{ replyitem.responder }}</span><span>: </span>\n          <!-- v-if=\"isMainReply\" -->\n          <!-- <span v-else>{{ replyitem.responder }}回复@</span> -->\n          <!-- <span v-if=\"!isMainReply\">{{ replyitem.reviewer }}</span> -->\n          <span>{{ replyitem.comment }}</span></div>\n          <div class=\"reply-bottom\">\n          <span>{{ replyitem.time }}</span>\n          <!-- <el-button type=\"text\" @click=\"reply(index, replyitem.responder)\"\n            >回复</el-button\n          > -->\n          </div>\n        </div>\n        </div>\n          <div class=\"write-reply\" v-if=\"item.reply.length > 0\" @click=\"reply(index, item.name)\">\n          <i class=\"el-icon-edit\"></i>\n          <span class=\"add-comment\">添加新评论</span>\n        </div>\n       \n        <div :id=\"'input' + index\" style=\"display: none\">\n          <!-- <div v-if=\"isShow\"> -->\n          <el-input\n            type=\"textarea\"\n            class=\"gray-bg-input\"\n            v-model=\"replyComment\"\n            :rows=\"3\"\n            style=\"width: 30%\"\n            placeholder=\"写下你的评论\"\n          ></el-input>\n          <!-- 每一条评论对应一个回复框 -->\n          <br />\n          <!-- 回复评论 -->\n          <el-button type=\"primary\" @click=\"submitReply(index)\">回复</el-button>\n          <el-button type=\"info\" @click=\"cancelReply(index)\">取消</el-button>\n          <!-- v-if=\"isMainReply\" -->\n          <!-- 回复回复 -->\n          <!-- <el-button type=\"primary\" @click=\"submitReply2()\" v-else\n            >回复</el-button\n          > -->\n          <!-- </div> -->\n        </div>\n        <hr />\n      </div>\n    </div>\n    <div v-else>暂无评论~</div>\n    <el-input\n      type=\"textarea\"\n      v-model=\"comment\"\n      :rows=\"4\"\n      style=\"width: 40%\"\n    ></el-input>\n    <br />\n    <el-button type=\"primary\" @click=\"submitCom()\">发表评论</el-button>\n\n\n    \n  </div>\n\n\n</template>\n\n<script>\nimport Vue from 'vue'\nimport AvatarOrg from \"../components/basic/Avatar\";\nexport default {\n  data() {\n    return {\n      commentList: [],\n      comment: \"\",\n      name: \"\",\n      replyComment: \"\",\n      isShow: false,\n      currentReviewer: \"\",\n      currentResponder: \"\",\n      currentIndex: 0,\n      isMainReply: false,\n      diffId: \"\",\n      api: \"/api\",\n    };\n  },\n  components: {\n      AvatarOrg\n    },\n  methods: {\n    addlike(comTime){\n      this.$axios.post(\"/score/addlike\",{\n              params: {_id: this.diffId,name: this.name,comTime:comTime}, \n              })\n    },\n    removelike(comTime){\n      this.$axios.post(\"/score/removelike\",{\n                  params: {_id: this.diffId,name: this.name,comTime:comTime}, \n                  })\n    },\n     likeClick(item,index) {\n       var comTime = item.time\n        if (item.isLike === null) {\n          Vue.$set(item, \"isLike\", true);\n          item.likeNum++\n              this.addlike(comTime)\n        } else {\n          if (item.isLike) {\n            item.likeNum--\n\n            this.removelike(comTime)\n          } else {\n            item.likeNum++\n              this.addlike(comTime)\n          }\n          item.isLike = !item.isLike;\n        }\n      },\n\n    // },\n    submitCom() {\n      // let date = new Date();\n      // let subTime = date.toLocaleString(\"chinese\", {\n      //   hour12: false,\n      // }); //获得当前时间\n      let subTime=this.$moment(new Date()).format(\"YYYY/MM/DD HH:mm:ss\")\n      if (this.comment) {\n        let item = {\n          name: this.name,\n          time: subTime,\n          comment: this.comment,\n          reply: [],\n        };\n        this.commentList.push(item);\n        // console.log(this.commentList)\n        this.$axios\n          .post(this.api + \"/updatecomment\", {\n            params: {\n              _id: this.diffId,\n              comments: this.commentList,\n            },\n          })\n          .then((result) => {\n            console.log(result);\n          });\n        //将评论列表更新到数据库\n        this.comment = \"\";\n      } else {\n        //输入的内容为空\n        this.$notify({\n          // title: \"警告\",\n          type: \"warning\",\n          message: \"请重新确认，您并未输入内容哦~\",\n          position: \"bottom-right\",\n        });\n      }\n    },\n    submitReply(index) {\n      // 回复评论\n      // let date = new Date();\n      // let subTime = date.toLocaleString(\"chinese\", {\n      //   hour12: false,\n      // }); //获得当前时间\n      let subTime=this.$moment(new Date()).format(\"YYYY/MM/DD HH:mm:ss\")\n      if (this.replyComment) {\n        let replyItem = {\n          reviewer: this.currentReviewer,\n          responder: this.currentResponder, //回复的用户名\n          time: subTime,\n          comment: this.replyComment,\n          reply2: [],\n        };\n        console.log(replyItem);\n        this.commentList[this.currentIndex].reply.push(replyItem);\n        this.$axios\n          .post(this.api + \"/updateComment\", {\n            params: {\n              _id: this.diffId,\n              comments: this.commentList,\n            },\n          })\n          .then((result) => {\n            console.log(result);\n          });\n        this.replyComment = \"\";\n        document.getElementById(\"input\" + index).style.display = \"none\";\n      } else {\n        //输入的内容为空\n        this.$notify({\n          // title: \"警告\",\n          type: \"warning\",\n          message: \"请重新确认，您并未输入内容哦~\",\n          position: \"bottom-right\",\n        });\n      }\n    },\n    reply(index, reviewer) {\n      document.getElementById(\"input\" + index).style.display = \"block\";\n      this.currentIndex = index;\n      this.currentReviewer = reviewer; //当前被评论的人\n      this.currentResponder = this.name; //当前用户\n      //判断是否为回复评论，显示不同的按钮\n      // if (reviewer == this.commentList[index].name) {\n      //   this.isMainReply = true;\n      // }\n    },\n    cancelReply(index){\n      document.getElementById(\"input\" + index).style.display = \"none\";\n    },\n  },\n   created() {\n     this.name =  sessionStorage.getItem(\"userName\")\n     this.diffId = this.$route.params.diffId;\n     const name = sessionStorage.getItem(\"userName\")\n    //请求数据\n     this.$axios\n      .get(this.api + \"/currentTask?_id=\" + this.diffId)\n      .then((res) => {\n        // this.commentList = res.data[0].comments;\n          var commentList = res.data[0].comments;\n          // console.log(commentList)\n          for(var i = 0; i < commentList.length; i++){\n                if(commentList[i].likeName){\n                   const isName = commentList[i].likeName.findIndex((item) => item == name)\n                   console.log(\"aaaaaaa\")\n                      if(isName==-1){\n                        commentList[i].isLike = false\n                      }else{\n                        commentList[i].isLike = true\n                      }                \n                }else{\n                  commentList[i].isLike = false\n                  commentList[i].likeNum = 0\n                }\n               \n                console.log(commentList)\n          }\n          this.commentList = commentList\n\n      });\n  },\n};\n</script>\n\n<style lang=\"scss\">\n\n@import \"../../public/scss/index\";\n\n.container {\n    padding: 0 10px;\n    box-sizing: border-box;\n    .comment {\n      display: flex;\n      flex-direction: column;\n      padding: 10px;\n      border-bottom: 1px solid $border-fourth;\n      .info {\n        display: flex;\n        align-items: center;\n        .avatar {\n          border-radius: 50%;\n        }\n        .right {\n          display: flex;\n          flex-direction: column;\n          margin-left: 10px;\n          .name {\n            font-size: 16px;\n            color: $text-main;\n            margin-bottom: 5px;\n            font-weight: 500;\n          }\n          .date {\n            font-size: 12px;\n            color: $text-minor;\n          }\n        }\n      }\n    }\n\n\n    }\n.content {\n        font-size: 16px;\n        color: $text-main;\n        line-height: 20px;\n        padding: 10px 0;\n      }\n\n.control {\n        display: flex;\n        align-items: center;\n        font-size: 14px;\n        color: $text-minor;\n        .like {\n          display: flex;\n          align-items: center;\n          margin-right: 20px;\n          cursor: pointer;\n          &.active, &:hover {\n            color: $color-main;\n          }\n          .iconfont {\n            font-size: 14px;\n            margin-right: 5px;\n          }\n        }\n        .comment-reply {\n          display: flex;\n          align-items: center;\n          cursor: pointer;\n          &:hover {\n            color: $text-333;\n          }\n          .iconfont {\n            font-size: 16px;\n            margin-right: 5px;\n          }\n        }\n\n      }\n\n\n     .reply {\n        margin: 10px 0;\n        border-left: 2px solid $border-first;\n        .item {\n          margin: 0 10px;\n          padding: 10px 0;\n          border-bottom: 1px dashed $border-third;\n          .reply-content {\n            display: flex;\n            align-items: center;\n            font-size: 14px;\n            color: $text-main;\n            .from-name {\n              color: $color-main;\n            } \n          }\n          }\n          }\n\n          .reply-bottom {\n            display: flex;\n            align-items: center;\n            margin-top: 6px;\n            font-size: 12px;\n            color: $text-minor;}\n\n      .write-reply {\n          display: flex;\n          align-items: center;\n          font-size: 14px;\n          color: $text-minor;\n          padding: 10px;\n          cursor: pointer;\n          &:hover {\n            color: $text-main;\n          }\n          .el-icon-edit {\n            margin-right: 5px;\n          }\n        }\n</style>"]}]}