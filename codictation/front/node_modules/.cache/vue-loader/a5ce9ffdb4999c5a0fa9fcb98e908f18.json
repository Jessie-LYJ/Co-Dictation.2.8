{"remainingRequest":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\src\\components\\comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\src\\components\\comment.vue","mtime":1615772920193},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.transform-quasar-imports.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.auto-import.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IEF2YXRhck9yZyBmcm9tICIuLi9jb21wb25lbnRzL2Jhc2ljL0F2YXRhciI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29tbWVudExpc3Q6IFtdLAogICAgICBjb21tZW50OiAiIiwKICAgICAgbmFtZTogIiIsCiAgICAgIHJlcGx5Q29tbWVudDogIiIsCiAgICAgIGlzU2hvdzogZmFsc2UsCiAgICAgIGN1cnJlbnRSZXZpZXdlcjogIiIsCiAgICAgIGN1cnJlbnRSZXNwb25kZXI6ICIiLAogICAgICBjdXJyZW50SW5kZXg6IDAsCiAgICAgIGlzTWFpblJlcGx5OiBmYWxzZSwKICAgICAgZGlmZklkOiAiIiwKICAgICAgYXBpOiAiL2FwaSIsCiAgICAgIHRhc2tJZDogIiIsCiAgICAgIHRhc2tQdWJsaXNoZXI6ICIiLAogICAgICB0YXNrVGl0bGU6ICIiLAogICAgICBjdXJyZW50Q29tbWVudDogIiIsCiAgICAgIGNvbW1lbnRUaW1lOiAiIiwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBBdmF0YXJPcmcsCiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRsaWtlKGNvbVRpbWUpIHsKICAgICAgdGhpcy4kYXhpb3MucG9zdCgiL3Njb3JlL2FkZGxpa2UiLCB7CiAgICAgICAgcGFyYW1zOiB7IF9pZDogdGhpcy5kaWZmSWQsIG5hbWU6IHRoaXMubmFtZSwgY29tVGltZTogY29tVGltZSB9LAogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVsaWtlKGNvbVRpbWUpIHsKICAgICAgdGhpcy4kYXhpb3MucG9zdCgiL3Njb3JlL3JlbW92ZWxpa2UiLCB7CiAgICAgICAgcGFyYW1zOiB7IF9pZDogdGhpcy5kaWZmSWQsIG5hbWU6IHRoaXMubmFtZSwgY29tVGltZTogY29tVGltZSB9LAogICAgICB9KTsKICAgIH0sCiAgICBsaWtlQ2xpY2soaXRlbSwgaW5kZXgpIHsKICAgICAgdmFyIGNvbVRpbWUgPSBpdGVtLnRpbWU7CiAgICAgIGlmIChpdGVtLmlzTGlrZSA9PT0gbnVsbCkgewogICAgICAgIFZ1ZS4kc2V0KGl0ZW0sICJpc0xpa2UiLCB0cnVlKTsKICAgICAgICBpdGVtLmxpa2VOdW0rKzsKICAgICAgICB0aGlzLmFkZGxpa2UoY29tVGltZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGl0ZW0uaXNMaWtlKSB7CiAgICAgICAgICBpdGVtLmxpa2VOdW0tLTsKCiAgICAgICAgICB0aGlzLnJlbW92ZWxpa2UoY29tVGltZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGl0ZW0ubGlrZU51bSsrOwogICAgICAgICAgdGhpcy5hZGRsaWtlKGNvbVRpbWUpOwogICAgICAgIH0KICAgICAgICBpdGVtLmlzTGlrZSA9ICFpdGVtLmlzTGlrZTsKICAgICAgfQogICAgfSwKCiAgICAvLyB9LAogICAgc3VibWl0Q29tKCkgewogICAgICAvL+iOt+W+l+W9k+WJjeaXtumXtAogICAgICBsZXQgc3ViVGltZSA9IHRoaXMuJG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoIllZWVkvTU0vREQgSEg6bW06c3MiKTsKICAgICAgaWYgKHRoaXMuY29tbWVudCkgewogICAgICAgIGxldCBpdGVtID0gewogICAgICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICAgICAgdGltZTogc3ViVGltZSwKICAgICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCwKICAgICAgICAgIHJlcGx5OiBbXSwKICAgICAgICB9OwogICAgICAgIHRoaXMuY29tbWVudExpc3QucHVzaChpdGVtKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbW1lbnRMaXN0KQogICAgICAgIHRoaXMuJGF4aW9zLnBvc3QodGhpcy5hcGkgKyAiL3VwZGF0ZWNvbW1lbnQiLCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgX2lkOiB0aGlzLmRpZmZJZCwKICAgICAgICAgICAgY29tbWVudHM6IHRoaXMuY29tbWVudExpc3QsCiAgICAgICAgICB9LAogICAgICAgIH0pOwoKICAgICAgICB2YXIgdXNlckNvbW1lbnQgPSB0aGlzLmNvbW1lbnQ7CiAgICAgICAgLy8gY29uc29sZS5sb2coInVzZXJDb21tZW50IiwgdXNlckNvbW1lbnQpCiAgICAgICAgdGhpcy4kYXhpb3MuZ2V0KHRoaXMuYXBpICsgIi9wcm9maWxlP25hbWU9IiArIHRoaXMubmFtZSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB2YXIgdXNlckNvbW1lbnRzID0gcmVzLmRhdGFbMF0ubXlDb21tZW50czsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJ1c2VyQ29tbWVudHMxMTExIiwgdXNlckNvbW1lbnRzKTsKICAgICAgICAgIHVzZXJDb21tZW50cy5wdXNoKHsKICAgICAgICAgICAgY29tbWVudEtleTogdGhpcy50YXNrSWQgKyB0aGlzLmN1cnJlbnRJbmRleCwKICAgICAgICAgICAgdGFza0lkOiB0aGlzLnRhc2tJZCwKICAgICAgICAgICAgdGFza1B1Ymxpc2hlcjogdGhpcy50YXNrUHVibGlzaGVyLAogICAgICAgICAgICB0YXNrVGl0bGU6IHRoaXMudGFza1RpdGxlLAogICAgICAgICAgICB0aW1lOiBzdWJUaW1lLAogICAgICAgICAgICBjb21tZW50OiB1c2VyQ29tbWVudCwKICAgICAgICAgICAgcmVwbHk6IFtdLAogICAgICAgICAgfSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygidXNlckNvbW1lbnRzMjIyIiwgdXNlckNvbW1lbnRzKTsKICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QodGhpcy5hcGkgKyAiL3VwZGF0ZU15Q29tbWVudHMiLCB7CiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHJldmlld2VyOiB0aGlzLm5hbWUsCiAgICAgICAgICAgICAgbXlDb21tZW50czogdXNlckNvbW1lbnRzLAogICAgICAgICAgICB9LAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuY29tbWVudCA9ICIiOwogICAgICB9IGVsc2UgewogICAgICAgIC8v6L6T5YWl55qE5YaF5a655Li656m6CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIC8vIHRpdGxlOiAi6K2m5ZGKIiwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fph43mlrDnoa7orqTvvIzmgqjlubbmnKrovpPlhaXlhoXlrrnlk6Z+IiwKICAgICAgICAgIHBvc2l0aW9uOiAiYm90dG9tLXJpZ2h0IiwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHN1Ym1pdFJlcGx5KGluZGV4KSB7CiAgICAgIC8vIOWbnuWkjeivhOiuugogICAgICAvL+iOt+W+l+W9k+WJjeaXtumXtAogICAgICBsZXQgc3ViVGltZSA9IHRoaXMuJG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoIllZWVkvTU0vREQgSEg6bW06c3MiKTsKICAgICAgaWYgKHRoaXMucmVwbHlDb21tZW50KSB7CiAgICAgICAgdmFyIHJlcGx5SXRlbSA9IHsKICAgICAgICAgIHJldmlld2VyOiB0aGlzLmN1cnJlbnRSZXZpZXdlciwKICAgICAgICAgIHJlc3BvbmRlcjogdGhpcy5jdXJyZW50UmVzcG9uZGVyLCAvL+WbnuWkjeeahOeUqOaIt+WQjQogICAgICAgICAgdGltZTogc3ViVGltZSwKICAgICAgICAgIGNvbW1lbnQ6IHRoaXMucmVwbHlDb21tZW50LAogICAgICAgIH07CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVwbHlJdGVtKTsKICAgICAgICB0aGlzLmNvbW1lbnRMaXN0W3RoaXMuY3VycmVudEluZGV4XS5yZXBseS5wdXNoKHJlcGx5SXRlbSk7CiAgICAgICAgdGhpcy4kYXhpb3MucG9zdCh0aGlzLmFwaSArICIvdXBkYXRlQ29tbWVudCIsIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBfaWQ6IHRoaXMuZGlmZklkLAogICAgICAgICAgICBjb21tZW50czogdGhpcy5jb21tZW50TGlzdCwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CgogICAgICAgIHZhciByZXBsaWVzID0gdGhpcy5jb21tZW50TGlzdFt0aGlzLmN1cnJlbnRJbmRleF0ucmVwbHk7CiAgICAgICAgY29uc29sZS5sb2coInJlcGxpZXMiLCByZXBsaWVzKTsKCiAgICAgICAgdGhpcy4kYXhpb3MKICAgICAgICAgIC5nZXQodGhpcy5hcGkgKyAiL3Byb2ZpbGU/bmFtZT0iICsgdGhpcy5jdXJyZW50UmV2aWV3ZXIpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHZhciB1c2VyQ29tbWVudHMgPSByZXMuZGF0YVswXS5teUNvbW1lbnRzOwogICAgICAgICAgICB1c2VyQ29tbWVudHMucHVzaCh7CiAgICAgICAgICAgICAgY29tbWVudEtleTogdGhpcy50YXNrSWQgKyB0aGlzLmN1cnJlbnRJbmRleCwKICAgICAgICAgICAgICB0YXNrSWQ6IHRoaXMudGFza0lkLAogICAgICAgICAgICAgIHRhc2tQdWJsaXNoZXI6IHRoaXMudGFza1B1Ymxpc2hlciwKICAgICAgICAgICAgICB0YXNrVGl0bGU6IHRoaXMudGFza1RpdGxlLAogICAgICAgICAgICAgIHRpbWU6IHRoaXMuY29tbWVudFRpbWUsCiAgICAgICAgICAgICAgY29tbWVudDogdGhpcy5jdXJyZW50Q29tbWVudCwKICAgICAgICAgICAgICByZXBseTogcmVwbGllcywKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLml6d1c2VyQ29tbWVudHMiLCB1c2VyQ29tbWVudHMpOwoKICAgICAgICAgICAgdmFyIG5ld1VzZXJDb21tZW50cyA9IHVzZXJDb21tZW50cy5yZXZlcnNlKCk7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld1VzZXJDb21tZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlmICghb2JqW25ld1VzZXJDb21tZW50c1tpXS5jb21tZW50S2V5XSAmJiAhb2JqW25ld1VzZXJDb21tZW50c1tpXS50aW1lXSkgewogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3VXNlckNvbW1lbnRzW2ldKTsKICAgICAgICAgICAgICAgIG9ialtuZXdVc2VyQ29tbWVudHNbaV0uY29tbWVudEtleV0gPSB0cnVlOwogICAgICAgICAgICAgICAgb2JqW25ld1VzZXJDb21tZW50c1tpXS50aW1lXSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zb2xlLmxvZygi5pawdXNlckNvbW1lbnRzIiwgcmVzdWx0KTsKCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QodGhpcy5hcGkgKyAiL3VwZGF0ZU15Q29tbWVudHMiLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICByZXZpZXdlcjogdGhpcy5jdXJyZW50UmV2aWV3ZXIsCiAgICAgICAgICAgICAgICBteUNvbW1lbnRzOiByZXN1bHQsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5yZXBseUNvbW1lbnQgPSAiIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5wdXQiICsgaW5kZXgpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/ovpPlhaXnmoTlhoXlrrnkuLrnqboKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgLy8gdGl0bGU6ICLorablkYoiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgbWVzc2FnZTogIuivt+mHjeaWsOehruiupO+8jOaCqOW5tuacqui+k+WFpeWGheWuueWTpn4iLAogICAgICAgICAgcG9zaXRpb246ICJib3R0b20tcmlnaHQiLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcmVwbHkoaW5kZXgsIHJldmlld2VyLCBjb21tZW50LCBjb21tZW50VGltZSkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5wdXQiICsgaW5kZXgpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGluZGV4OwogICAgICB0aGlzLmN1cnJlbnRSZXZpZXdlciA9IHJldmlld2VyOyAvL+W9k+WJjeiiq+ivhOiuuueahOS6ugogICAgICB0aGlzLmN1cnJlbnRSZXNwb25kZXIgPSB0aGlzLm5hbWU7IC8v5b2T5YmN55So5oi3CiAgICAgIHRoaXMuY3VycmVudENvbW1lbnQgPSBjb21tZW50OwogICAgICB0aGlzLmNvbW1lbnRUaW1lID0gY29tbWVudFRpbWU7CiAgICB9LAogICAgY2FuY2VsUmVwbHkoaW5kZXgpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlucHV0IiArIGluZGV4KS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm5hbWUgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyTmFtZSIpOwogICAgdGhpcy5kaWZmSWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuZGlmZklkOwogICAgdmFyIG5hbWUgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyTmFtZSIpOwogICAgLy/or7fmsYLmlbDmja4KICAgIHRoaXMuJGF4aW9zCiAgICAgIC5nZXQodGhpcy5hcGkgKyAiL2N1cnJlbnRUYXNrP19pZD0iICsgdGhpcy5kaWZmSWQpCiAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLnRhc2tJZCA9IHJlcy5kYXRhWzBdLl9pZDsKICAgICAgICB0aGlzLnRhc2tQdWJsaXNoZXIgPSByZXMuZGF0YVswXS5wdWJsaXNoZXI7CiAgICAgICAgdGhpcy50YXNrVGl0bGUgPSByZXMuZGF0YVswXS50aXRsZTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRhc2tJZCwgdGhpcy50YXNrUHVibGlzaGVyLCB0aGlzLnRhc2tUaXRsZSk7CiAgICAgICAgdmFyIGNvbW1lbnRMaXN0ID0gcmVzLmRhdGFbMF0uY29tbWVudHM7CiAgICAgICAgLy8gY29uc29sZS5sb2coY29tbWVudExpc3QpCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb21tZW50TGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKGNvbW1lbnRMaXN0W2ldLmxpa2VOYW1lKSB7CiAgICAgICAgICAgIGNvbnN0IGlzTmFtZSA9IGNvbW1lbnRMaXN0W2ldLmxpa2VOYW1lLmZpbmRJbmRleCgKICAgICAgICAgICAgICAoaXRlbSkgPT4gaXRlbSA9PSBuYW1lCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJhYWFhYWFhIik7CiAgICAgICAgICAgIGlmIChpc05hbWUgPT0gLTEpIHsKICAgICAgICAgICAgICBjb21tZW50TGlzdFtpXS5pc0xpa2UgPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb21tZW50TGlzdFtpXS5pc0xpa2UgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb21tZW50TGlzdFtpXS5pc0xpa2UgPSBmYWxzZTsKICAgICAgICAgICAgY29tbWVudExpc3RbaV0ubGlrZU51bSA9IDA7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zb2xlLmxvZygiY29tbWVudExpc3QiLCBjb21tZW50TGlzdCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuY29tbWVudExpc3QgPSBjb21tZW50TGlzdDsKICAgICAgfSk7CiAgfSwKfTsK"},{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"comment.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n    <el-backtop></el-backtop>\n    <div v-if=\"commentList.length > 0\">\n      <div\n        class=\"comment\"\n        v-for=\"(item, index) in commentList\"\n        :key=\"item.time\"\n      >\n        <div class=\"info\">\n          <avatar-org class=\"avatar\" width=\"40\" height=\"40\"></avatar-org>\n          <div class=\"right\">\n            <div class=\"name\">{{ item.name }}</div>\n            <div class=\"date\">{{ item.time }}</div>\n          </div>\n        </div>\n        <div class=\"content\">{{ item.comment }}</div>\n\n        <div class=\"control\">\n          <span\n            class=\"like\"\n            :class=\"{ active: item.isLike }\"\n            @click=\"likeClick(item, index)\"\n          >\n            <i class=\"iconfont icon-like\"></i>\n            <span class=\"like-num\">{{\n              item.likeNum > 0 ? item.likeNum + \"人赞\" : \"赞\"\n            }}</span>\n          </span>\n          <span class=\"comment-reply\" @click=\"reply(index, item.name, item.comment, item.time)\">\n            <i class=\"iconfont icon-comment\"></i>\n            <span>回复</span>\n          </span>\n        </div>\n\n        <!-- 每条评论的回复列表 -->\n        <div class=\"reply\">\n          <div\n            class=\"item\"\n            v-for=\"replyitem in item.reply\"\n            :key=\"replyitem.time\"\n          >\n            <div class=\"reply-content\">\n              <span class=\"from-name text-subtitle1 q-mr-sm\"\n                >{{ replyitem.responder }}:</span\n              >\n              <span>{{ replyitem.comment }}</span>\n            </div>\n            <div class=\"reply-bottom\">\n              <span>{{ replyitem.time }}</span>\n            </div>\n          </div>\n        </div>\n        <div\n          class=\"write-reply\"\n          v-if=\"item.reply.length > 0\"\n          @click=\"reply(index, item.name, item.comment, item.time)\"\n        >\n          <i class=\"el-icon-edit\"></i>\n          <span class=\"add-comment\">添加新评论</span>\n        </div>\n\n        <div :id=\"'input' + index\" style=\"display: none\">\n          <!-- <div v-if=\"isShow\"> -->\n          <el-input\n            type=\"textarea\"\n            class=\"gray-bg-input\"\n            v-model=\"replyComment\"\n            :rows=\"3\"\n            style=\"width: 30%\"\n            placeholder=\"写下你的评论\"\n          ></el-input>\n          <!-- 每一条评论对应一个回复框 -->\n          <br />\n          <!-- 回复评论 -->\n          <el-button type=\"primary\" @click=\"submitReply(index)\">回复</el-button>\n          <el-button type=\"info\" @click=\"cancelReply(index)\">取消</el-button>\n        </div>\n        <hr />\n      </div>\n    </div>\n    <div v-else>暂无评论~</div>\n    <el-input\n      type=\"textarea\"\n      v-model=\"comment\"\n      :rows=\"4\"\n      style=\"width: 40%\"\n    ></el-input>\n    <br />\n    <el-button type=\"primary\" @click=\"submitCom()\">发表评论</el-button>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport AvatarOrg from \"../components/basic/Avatar\";\nexport default {\n  data() {\n    return {\n      commentList: [],\n      comment: \"\",\n      name: \"\",\n      replyComment: \"\",\n      isShow: false,\n      currentReviewer: \"\",\n      currentResponder: \"\",\n      currentIndex: 0,\n      isMainReply: false,\n      diffId: \"\",\n      api: \"/api\",\n      taskId: \"\",\n      taskPublisher: \"\",\n      taskTitle: \"\",\n      currentComment: \"\",\n      commentTime: \"\",\n    };\n  },\n  components: {\n    AvatarOrg,\n  },\n  methods: {\n    addlike(comTime) {\n      this.$axios.post(\"/score/addlike\", {\n        params: { _id: this.diffId, name: this.name, comTime: comTime },\n      });\n    },\n    removelike(comTime) {\n      this.$axios.post(\"/score/removelike\", {\n        params: { _id: this.diffId, name: this.name, comTime: comTime },\n      });\n    },\n    likeClick(item, index) {\n      var comTime = item.time;\n      if (item.isLike === null) {\n        Vue.$set(item, \"isLike\", true);\n        item.likeNum++;\n        this.addlike(comTime);\n      } else {\n        if (item.isLike) {\n          item.likeNum--;\n\n          this.removelike(comTime);\n        } else {\n          item.likeNum++;\n          this.addlike(comTime);\n        }\n        item.isLike = !item.isLike;\n      }\n    },\n\n    // },\n    submitCom() {\n      //获得当前时间\n      let subTime = this.$moment(new Date()).format(\"YYYY/MM/DD HH:mm:ss\");\n      if (this.comment) {\n        let item = {\n          name: this.name,\n          time: subTime,\n          comment: this.comment,\n          reply: [],\n        };\n        this.commentList.push(item);\n        // console.log(this.commentList)\n        this.$axios.post(this.api + \"/updatecomment\", {\n          params: {\n            _id: this.diffId,\n            comments: this.commentList,\n          },\n        });\n\n        var userComment = this.comment;\n        // console.log(\"userComment\", userComment)\n        this.$axios.get(this.api + \"/profile?name=\" + this.name).then((res) => {\n          var userComments = res.data[0].myComments;\n          // console.log(\"userComments1111\", userComments);\n          userComments.push({\n            commentKey: this.taskId + this.currentIndex,\n            taskId: this.taskId,\n            taskPublisher: this.taskPublisher,\n            taskTitle: this.taskTitle,\n            time: subTime,\n            comment: userComment,\n            reply: [],\n          });\n          // console.log(\"userComments222\", userComments);\n          this.$axios.post(this.api + \"/updateMyComments\", {\n            params: {\n              reviewer: this.name,\n              myComments: userComments,\n            },\n          });\n        });\n\n        this.comment = \"\";\n      } else {\n        //输入的内容为空\n        this.$notify({\n          // title: \"警告\",\n          type: \"warning\",\n          message: \"请重新确认，您并未输入内容哦~\",\n          position: \"bottom-right\",\n        });\n      }\n    },\n    submitReply(index) {\n      // 回复评论\n      //获得当前时间\n      let subTime = this.$moment(new Date()).format(\"YYYY/MM/DD HH:mm:ss\");\n      if (this.replyComment) {\n        var replyItem = {\n          reviewer: this.currentReviewer,\n          responder: this.currentResponder, //回复的用户名\n          time: subTime,\n          comment: this.replyComment,\n        };\n        // console.log(replyItem);\n        this.commentList[this.currentIndex].reply.push(replyItem);\n        this.$axios.post(this.api + \"/updateComment\", {\n          params: {\n            _id: this.diffId,\n            comments: this.commentList,\n          },\n        });\n\n        var replies = this.commentList[this.currentIndex].reply;\n        console.log(\"replies\", replies);\n\n        this.$axios\n          .get(this.api + \"/profile?name=\" + this.currentReviewer)\n          .then((res) => {\n            var userComments = res.data[0].myComments;\n            userComments.push({\n              commentKey: this.taskId + this.currentIndex,\n              taskId: this.taskId,\n              taskPublisher: this.taskPublisher,\n              taskTitle: this.taskTitle,\n              time: this.commentTime,\n              comment: this.currentComment,\n              reply: replies,\n            });\n            console.log(\"旧userComments\", userComments);\n\n            var newUserComments = userComments.reverse();\n            var result = [];\n            var obj = {};\n            for (var i = 0; i < newUserComments.length; i++) {\n              if (!obj[newUserComments[i].commentKey] && !obj[newUserComments[i].time]) {\n                result.push(newUserComments[i]);\n                obj[newUserComments[i].commentKey] = true;\n                obj[newUserComments[i].time] = true;\n              }\n            }\n\n            console.log(\"新userComments\", result);\n\n            this.$axios.post(this.api + \"/updateMyComments\", {\n              params: {\n                reviewer: this.currentReviewer,\n                myComments: result,\n              },\n            });\n          });\n\n        this.replyComment = \"\";\n        document.getElementById(\"input\" + index).style.display = \"none\";\n      } else {\n        //输入的内容为空\n        this.$notify({\n          // title: \"警告\",\n          type: \"warning\",\n          message: \"请重新确认，您并未输入内容哦~\",\n          position: \"bottom-right\",\n        });\n      }\n    },\n    reply(index, reviewer, comment, commentTime) {\n      document.getElementById(\"input\" + index).style.display = \"block\";\n      this.currentIndex = index;\n      this.currentReviewer = reviewer; //当前被评论的人\n      this.currentResponder = this.name; //当前用户\n      this.currentComment = comment;\n      this.commentTime = commentTime;\n    },\n    cancelReply(index) {\n      document.getElementById(\"input\" + index).style.display = \"none\";\n    },\n  },\n  created() {\n    this.name = sessionStorage.getItem(\"userName\");\n    this.diffId = this.$route.params.diffId;\n    var name = sessionStorage.getItem(\"userName\");\n    //请求数据\n    this.$axios\n      .get(this.api + \"/currentTask?_id=\" + this.diffId)\n      .then((res) => {\n        this.taskId = res.data[0]._id;\n        this.taskPublisher = res.data[0].publisher;\n        this.taskTitle = res.data[0].title;\n        console.log(this.taskId, this.taskPublisher, this.taskTitle);\n        var commentList = res.data[0].comments;\n        // console.log(commentList)\n        for (var i = 0; i < commentList.length; i++) {\n          if (commentList[i].likeName) {\n            const isName = commentList[i].likeName.findIndex(\n              (item) => item == name\n            );\n            // console.log(\"aaaaaaa\");\n            if (isName == -1) {\n              commentList[i].isLike = false;\n            } else {\n              commentList[i].isLike = true;\n            }\n          } else {\n            commentList[i].isLike = false;\n            commentList[i].likeNum = 0;\n          }\n          console.log(\"commentList\", commentList);\n        }\n        this.commentList = commentList;\n      });\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../../public/scss/index\";\n\n.container {\n  padding: 0 10px;\n  box-sizing: border-box;\n  .comment {\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n    border-bottom: 1px solid $border-fourth;\n    .info {\n      display: flex;\n      align-items: center;\n      .avatar {\n        border-radius: 50%;\n      }\n      .right {\n        display: flex;\n        flex-direction: column;\n        margin-left: 10px;\n        .name {\n          font-size: 16px;\n          color: $text-main;\n          margin-bottom: 5px;\n          font-weight: 500;\n        }\n        .date {\n          font-size: 12px;\n          color: $text-minor;\n        }\n      }\n    }\n  }\n}\n.content {\n  font-size: 16px;\n  color: $text-main;\n  line-height: 20px;\n  padding: 10px 0;\n}\n\n.control {\n  display: flex;\n  align-items: center;\n  font-size: 14px;\n  color: $text-minor;\n  .like {\n    display: flex;\n    align-items: center;\n    margin-right: 20px;\n    cursor: pointer;\n    &.active,\n    &:hover {\n      color: $color-main;\n    }\n    .iconfont {\n      font-size: 14px;\n      margin-right: 5px;\n    }\n  }\n  .comment-reply {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    &:hover {\n      color: $text-333;\n    }\n    .iconfont {\n      font-size: 16px;\n      margin-right: 5px;\n    }\n  }\n}\n\n.reply {\n  margin: 10px 0;\n  border-left: 2px solid $border-first;\n  .item {\n    margin: 0 10px;\n    padding: 10px 0;\n    border-bottom: 1px dashed $border-third;\n    .reply-content {\n      display: flex;\n      align-items: center;\n      font-size: 14px;\n      color: $text-main;\n      .from-name {\n        color: $color-main;\n      }\n    }\n  }\n}\n\n.reply-bottom {\n  display: flex;\n  align-items: center;\n  margin-top: 6px;\n  font-size: 12px;\n  color: $text-minor;\n}\n\n.write-reply {\n  display: flex;\n  align-items: center;\n  font-size: 14px;\n  color: $text-minor;\n  padding: 10px;\n  cursor: pointer;\n  &:hover {\n    color: $text-main;\n  }\n  .el-icon-edit {\n    margin-right: 5px;\n  }\n}\n</style>\n"]}]}