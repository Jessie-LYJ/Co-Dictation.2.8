{"remainingRequest":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.2\\codictation\\node_modules\\babel-loader\\lib\\index.js!F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.2\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.transform-quasar-imports.js!F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.2\\codictation\\node_modules\\quasar\\src\\components\\select\\QSelect.js","dependencies":[{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.2\\codictation\\node_modules\\quasar\\src\\components\\select\\QSelect.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.2\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.2\\codictation\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.2\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.transform-quasar-imports.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJGOi9jb2RpY3RhdGlvbi9jb2xsZWN0aW9uL2ZpbmFsIHByb2plY3QvY29kaWN0YXRpb24vY29kaWN0YXRpb24yLjAvY29kaWN0YXRpb24uMi4yL2NvZGljdGF0aW9uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkY6L2NvZGljdGF0aW9uL2NvbGxlY3Rpb24vZmluYWwgcHJvamVjdC9jb2RpY3RhdGlvbi9jb2RpY3RhdGlvbjIuMC9jb2RpY3RhdGlvbi4yLjIvY29kaWN0YXRpb24vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgUUZpZWxkIGZyb20gJy4uL2ZpZWxkL1FGaWVsZC5qcyc7CmltcG9ydCBRSWNvbiBmcm9tICcuLi9pY29uL1FJY29uLmpzJzsKaW1wb3J0IFFDaGlwIGZyb20gJy4uL2NoaXAvUUNoaXAuanMnOwppbXBvcnQgUUl0ZW0gZnJvbSAnLi4vaXRlbS9RSXRlbS5qcyc7CmltcG9ydCBRSXRlbVNlY3Rpb24gZnJvbSAnLi4vaXRlbS9RSXRlbVNlY3Rpb24uanMnOwppbXBvcnQgUUl0ZW1MYWJlbCBmcm9tICcuLi9pdGVtL1FJdGVtTGFiZWwuanMnOwppbXBvcnQgUU1lbnUgZnJvbSAnLi4vbWVudS9RTWVudS5qcyc7CmltcG9ydCBRRGlhbG9nIGZyb20gJy4uL2RpYWxvZy9RRGlhbG9nLmpzJzsKaW1wb3J0IHsgaXNEZWVwRXF1YWwgfSBmcm9tICcuLi8uLi91dGlscy9pcy5qcyc7CmltcG9ydCB7IHN0b3AsIHByZXZlbnQsIHN0b3BBbmRQcmV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQuanMnOwppbXBvcnQgeyBub3JtYWxpemVUb0ludGVydmFsIH0gZnJvbSAnLi4vLi4vdXRpbHMvZm9ybWF0LmpzJzsKaW1wb3J0IHsgc2hvdWxkSWdub3JlS2V5LCBpc0tleUNvZGUgfSBmcm9tICcuLi8uLi91dGlscy9rZXktY29tcG9zaXRpb24uanMnOwppbXBvcnQgeyBtZXJnZVNsb3QgfSBmcm9tICcuLi8uLi91dGlscy9zbG90LmpzJzsKaW1wb3J0IGNhY2hlIGZyb20gJy4uLy4uL3V0aWxzL2NhY2hlLmpzJzsKaW1wb3J0IHsgRm9ybUZpZWxkTWl4aW4gfSBmcm9tICcuLi8uLi9taXhpbnMvZm9ybS5qcyc7CmltcG9ydCBWaXJ0dWFsU2Nyb2xsIGZyb20gJy4uLy4uL21peGlucy92aXJ0dWFsLXNjcm9sbC5qcyc7CmltcG9ydCBDb21wb3NpdGlvbk1peGluIGZyb20gJy4uLy4uL21peGlucy9jb21wb3NpdGlvbi5qcyc7CmltcG9ydCBMaXN0ZW5lcnNNaXhpbiBmcm9tICcuLi8uLi9taXhpbnMvbGlzdGVuZXJzLmpzJzsKCnZhciB2YWxpZGF0ZU5ld1ZhbHVlTW9kZSA9IGZ1bmN0aW9uIHZhbGlkYXRlTmV3VmFsdWVNb2RlKHYpIHsKICByZXR1cm4gWydhZGQnLCAnYWRkLXVuaXF1ZScsICd0b2dnbGUnXS5pbmNsdWRlcyh2KTsKfTsKCnZhciByZUVzY2FwZUxpc3QgPSAnLiorP14ke30oKXxbXVxcJzsKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgbmFtZTogJ1FTZWxlY3QnLAogIG1peGluczogW1FGaWVsZCwgVmlydHVhbFNjcm9sbCwgQ29tcG9zaXRpb25NaXhpbiwgRm9ybUZpZWxkTWl4aW4sIExpc3RlbmVyc01peGluXSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBtdWx0aXBsZTogQm9vbGVhbiwKICAgIGRpc3BsYXlWYWx1ZTogW1N0cmluZywgTnVtYmVyXSwKICAgIGRpc3BsYXlWYWx1ZVNhbml0aXplOiBCb29sZWFuLAogICAgZHJvcGRvd25JY29uOiBTdHJpbmcsCiAgICBvcHRpb25zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBvcHRpb25WYWx1ZTogW0Z1bmN0aW9uLCBTdHJpbmddLAogICAgb3B0aW9uTGFiZWw6IFtGdW5jdGlvbiwgU3RyaW5nXSwKICAgIG9wdGlvbkRpc2FibGU6IFtGdW5jdGlvbiwgU3RyaW5nXSwKICAgIGhpZGVTZWxlY3RlZDogQm9vbGVhbiwKICAgIGhpZGVEcm9wZG93bkljb246IEJvb2xlYW4sCiAgICBmaWxsSW5wdXQ6IEJvb2xlYW4sCiAgICBtYXhWYWx1ZXM6IFtOdW1iZXIsIFN0cmluZ10sCiAgICBvcHRpb25zRGVuc2U6IEJvb2xlYW4sCiAgICBvcHRpb25zRGFyazogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgb3B0aW9uc1NlbGVjdGVkQ2xhc3M6IFN0cmluZywKICAgIG9wdGlvbnNTYW5pdGl6ZTogQm9vbGVhbiwKICAgIG9wdGlvbnNDb3ZlcjogQm9vbGVhbiwKICAgIG1lbnVTaHJpbms6IEJvb2xlYW4sCiAgICBtZW51QW5jaG9yOiBTdHJpbmcsCiAgICBtZW51U2VsZjogU3RyaW5nLAogICAgbWVudU9mZnNldDogQXJyYXksCiAgICBwb3B1cENvbnRlbnRDbGFzczogU3RyaW5nLAogICAgcG9wdXBDb250ZW50U3R5bGU6IFtTdHJpbmcsIEFycmF5LCBPYmplY3RdLAogICAgdXNlSW5wdXQ6IEJvb2xlYW4sCiAgICB1c2VDaGlwczogQm9vbGVhbiwKICAgIG5ld1ZhbHVlTW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVOZXdWYWx1ZU1vZGUKICAgIH0sCiAgICBtYXBPcHRpb25zOiBCb29sZWFuLAogICAgZW1pdFZhbHVlOiBCb29sZWFuLAogICAgaW5wdXREZWJvdW5jZTogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICBkZWZhdWx0OiA1MDAKICAgIH0sCiAgICBpbnB1dENsYXNzOiBbQXJyYXksIFN0cmluZywgT2JqZWN0XSwKICAgIGlucHV0U3R5bGU6IFtBcnJheSwgU3RyaW5nLCBPYmplY3RdLAogICAgdGFiaW5kZXg6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIGF1dG9jb21wbGV0ZTogU3RyaW5nLAogICAgdHJhbnNpdGlvblNob3c6IFN0cmluZywKICAgIHRyYW5zaXRpb25IaWRlOiBTdHJpbmcsCiAgICBiZWhhdmlvcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gdmFsaWRhdG9yKHYpIHsKICAgICAgICByZXR1cm4gWydkZWZhdWx0JywgJ21lbnUnLCAnZGlhbG9nJ10uaW5jbHVkZXModik7CiAgICAgIH0sCiAgICAgIGRlZmF1bHQ6ICdkZWZhdWx0JwogICAgfSwKICAgIHZpcnR1YWxTY3JvbGxJdGVtU2l6ZTogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICBkZWZhdWx0OiB2b2lkIDAKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZW51OiBmYWxzZSwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgb3B0aW9uSW5kZXg6IC0xLAogICAgICBpbnB1dFZhbHVlOiAnJywKICAgICAgZGlhbG9nRmllbGRGb2N1c2VkOiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBpbm5lclZhbHVlOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdGhpcy5pbm5lclZhbHVlQ2FjaGUgPSB2YWw7CgogICAgICAgIGlmICh0aGlzLnVzZUlucHV0ID09PSB0cnVlICYmIHRoaXMuZmlsbElucHV0ID09PSB0cnVlICYmIHRoaXMubXVsdGlwbGUgIT09IHRydWUgJiYgLy8gUHJldmVudCByZS1lbnRlcmluZyBpbiBmaWx0ZXIgd2hpbGUgZmlsdGVyaW5nCiAgICAgICAgLy8gQWxzbyBwcmV2ZW50IGNsZWFyaW5nIGlucHV0VmFsdWUgd2hpbGUgZmlsdGVyaW5nCiAgICAgICAgdGhpcy5pbm5lckxvYWRpbmcgIT09IHRydWUgJiYgKHRoaXMuZGlhbG9nICE9PSB0cnVlICYmIHRoaXMubWVudSAhPT0gdHJ1ZSB8fCB0aGlzLmhhc1ZhbHVlICE9PSB0cnVlKSkgewogICAgICAgICAgdGhpcy51c2VySW5wdXRWYWx1ZSAhPT0gdHJ1ZSAmJiB0aGlzLl9fcmVzZXRJbnB1dFZhbHVlKCk7CgogICAgICAgICAgaWYgKHRoaXMuZGlhbG9nID09PSB0cnVlIHx8IHRoaXMubWVudSA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLmZpbHRlcignJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICBmaWxsSW5wdXQ6IGZ1bmN0aW9uIGZpbGxJbnB1dCgpIHsKICAgICAgdGhpcy5fX3Jlc2V0SW5wdXRWYWx1ZSgpOwogICAgfSwKICAgIG1lbnU6IGZ1bmN0aW9uIG1lbnUoc2hvdykgewogICAgICB0aGlzLl9fdXBkYXRlTWVudShzaG93KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc09wdGlvbnNEYXJrOiBmdW5jdGlvbiBpc09wdGlvbnNEYXJrKCkgewogICAgICByZXR1cm4gdGhpcy5vcHRpb25zRGFyayA9PT0gbnVsbCA/IHRoaXMuaXNEYXJrIDogdGhpcy5vcHRpb25zRGFyazsKICAgIH0sCiAgICB2aXJ0dWFsU2Nyb2xsTGVuZ3RoOiBmdW5jdGlvbiB2aXJ0dWFsU2Nyb2xsTGVuZ3RoKCkgewogICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMpID8gdGhpcy5vcHRpb25zLmxlbmd0aCA6IDA7CiAgICB9LAogICAgZmllbGRDbGFzczogZnVuY3Rpb24gZmllbGRDbGFzcygpIHsKICAgICAgcmV0dXJuICJxLXNlbGVjdCBxLWZpZWxkLS1hdXRvLWhlaWdodCBxLXNlbGVjdC0td2l0aCIuY29uY2F0KHRoaXMudXNlSW5wdXQgIT09IHRydWUgPyAnb3V0JyA6ICcnLCAiLWlucHV0IikgKyAiIHEtc2VsZWN0LS13aXRoIi5jb25jYXQodGhpcy51c2VDaGlwcyAhPT0gdHJ1ZSA/ICdvdXQnIDogJycsICItY2hpcHMiKSArICIgcS1zZWxlY3QtLSIuY29uY2F0KHRoaXMubXVsdGlwbGUgPT09IHRydWUgPyAnbXVsdGlwbGUnIDogJ3NpbmdsZScpOwogICAgfSwKICAgIGNvbXB1dGVkSW5wdXRDbGFzczogZnVuY3Rpb24gY29tcHV0ZWRJbnB1dENsYXNzKCkgewogICAgICBpZiAodGhpcy5oaWRlU2VsZWN0ZWQgPT09IHRydWUgfHwgdGhpcy5pbm5lclZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiB0aGlzLmlucHV0Q2xhc3M7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmlucHV0Q2xhc3MgPT09IHZvaWQgMCA/ICdxLWZpZWxkX19pbnB1dC0tcGFkZGluZycgOiBbdGhpcy5pbnB1dENsYXNzLCAncS1maWVsZF9faW5wdXQtLXBhZGRpbmcnXTsKICAgIH0sCiAgICBtZW51Q29udGVudENsYXNzOiBmdW5jdGlvbiBtZW51Q29udGVudENsYXNzKCkgewogICAgICByZXR1cm4gKHRoaXMudmlydHVhbFNjcm9sbEhvcml6b250YWwgPT09IHRydWUgPyAncS12aXJ0dWFsLXNjcm9sbC0taG9yaXpvbnRhbCcgOiAnJykgKyAodGhpcy5wb3B1cENvbnRlbnRDbGFzcyA/ICcgJyArIHRoaXMucG9wdXBDb250ZW50Q2xhc3MgOiAnJyk7CiAgICB9LAogICAgaW5uZXJWYWx1ZTogZnVuY3Rpb24gaW5uZXJWYWx1ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtYXBOdWxsID0gdGhpcy5tYXBPcHRpb25zID09PSB0cnVlICYmIHRoaXMubXVsdGlwbGUgIT09IHRydWUsCiAgICAgICAgICB2YWwgPSB0aGlzLnZhbHVlICE9PSB2b2lkIDAgJiYgKHRoaXMudmFsdWUgIT09IG51bGwgfHwgbWFwTnVsbCA9PT0gdHJ1ZSkgPyB0aGlzLm11bHRpcGxlID09PSB0cnVlICYmIEFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkgPyB0aGlzLnZhbHVlIDogW3RoaXMudmFsdWVdIDogW107CgogICAgICBpZiAodGhpcy5tYXBPcHRpb25zID09PSB0cnVlICYmIEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zKSA9PT0gdHJ1ZSkgewogICAgICAgIHZhciBfY2FjaGUgPSB0aGlzLm1hcE9wdGlvbnMgPT09IHRydWUgJiYgdGhpcy5pbm5lclZhbHVlQ2FjaGUgIT09IHZvaWQgMCA/IHRoaXMuaW5uZXJWYWx1ZUNhY2hlIDogW107CgogICAgICAgIHZhciB2YWx1ZXMgPSB2YWwubWFwKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuX19nZXRPcHRpb24odiwgX2NhY2hlKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PT0gbnVsbCAmJiBtYXBOdWxsID09PSB0cnVlID8gdmFsdWVzLmZpbHRlcihmdW5jdGlvbiAodikgewogICAgICAgICAgcmV0dXJuIHYgIT09IG51bGw7CiAgICAgICAgfSkgOiB2YWx1ZXM7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWw7CiAgICB9LAogICAgbm9PcHRpb25zOiBmdW5jdGlvbiBub09wdGlvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLnZpcnR1YWxTY3JvbGxMZW5ndGggPT09IDA7CiAgICB9LAogICAgc2VsZWN0ZWRTdHJpbmc6IGZ1bmN0aW9uIHNlbGVjdGVkU3RyaW5nKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiB0aGlzLmlubmVyVmFsdWUubWFwKGZ1bmN0aW9uIChvcHQpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLmdldE9wdGlvbkxhYmVsKG9wdCk7CiAgICAgIH0pLmpvaW4oJywgJyk7CiAgICB9LAogICAgc2FuaXRpemVGbjogZnVuY3Rpb24gc2FuaXRpemVGbigpIHsKICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1Nhbml0aXplID09PSB0cnVlID8gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IDogZnVuY3Rpb24gKG9wdCkgewogICAgICAgIHJldHVybiBvcHQgIT09IHZvaWQgMCAmJiBvcHQgIT09IG51bGwgJiYgb3B0LnNhbml0aXplID09PSB0cnVlOwogICAgICB9OwogICAgfSwKICAgIGRpc3BsYXlBc1RleHQ6IGZ1bmN0aW9uIGRpc3BsYXlBc1RleHQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRpc3BsYXlWYWx1ZVNhbml0aXplID09PSB0cnVlIHx8IHRoaXMuZGlzcGxheVZhbHVlID09PSB2b2lkIDAgJiYgKHRoaXMub3B0aW9uc1Nhbml0aXplID09PSB0cnVlIHx8IHRoaXMuaW5uZXJWYWx1ZS5zb21lKHRoaXMuc2FuaXRpemVGbikpOwogICAgfSwKICAgIGNvbXB1dGVkVGFiaW5kZXg6IGZ1bmN0aW9uIGNvbXB1dGVkVGFiaW5kZXgoKSB7CiAgICAgIHJldHVybiB0aGlzLmZvY3VzZWQgPT09IHRydWUgPyB0aGlzLnRhYmluZGV4IDogLTE7CiAgICB9LAogICAgc2VsZWN0ZWRTY29wZTogZnVuY3Rpb24gc2VsZWN0ZWRTY29wZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gdGhpcy5pbm5lclZhbHVlLm1hcChmdW5jdGlvbiAob3B0LCBpKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGluZGV4OiBpLAogICAgICAgICAgb3B0OiBvcHQsCiAgICAgICAgICBzYW5pdGl6ZTogX3RoaXMzLnNhbml0aXplRm4ob3B0KSwKICAgICAgICAgIHNlbGVjdGVkOiB0cnVlLAogICAgICAgICAgcmVtb3ZlQXRJbmRleDogX3RoaXMzLl9fcmVtb3ZlQXRJbmRleEFuZEZvY3VzLAogICAgICAgICAgdG9nZ2xlT3B0aW9uOiBfdGhpczMudG9nZ2xlT3B0aW9uLAogICAgICAgICAgdGFiaW5kZXg6IF90aGlzMy5jb21wdXRlZFRhYmluZGV4CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgb3B0aW9uU2NvcGU6IGZ1bmN0aW9uIG9wdGlvblNjb3BlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnZpcnR1YWxTY3JvbGxMZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KCiAgICAgIHZhciBfdGhpcyR2aXJ0dWFsU2Nyb2xsU2wgPSB0aGlzLnZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLAogICAgICAgICAgZnJvbSA9IF90aGlzJHZpcnR1YWxTY3JvbGxTbC5mcm9tLAogICAgICAgICAgdG8gPSBfdGhpcyR2aXJ0dWFsU2Nyb2xsU2wudG87CiAgICAgIHZhciBfdGhpcyRfX29wdGlvblNjb3BlQ2EgPSB0aGlzLl9fb3B0aW9uU2NvcGVDYWNoZSwKICAgICAgICAgIG9wdGlvbnMgPSBfdGhpcyRfX29wdGlvblNjb3BlQ2Eub3B0aW9ucywKICAgICAgICAgIG9wdGlvbkVscyA9IF90aGlzJF9fb3B0aW9uU2NvcGVDYS5vcHRpb25FbHM7CiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuc2xpY2UoZnJvbSwgdG8pLm1hcChmdW5jdGlvbiAob3B0LCBpKSB7CiAgICAgICAgdmFyIGRpc2FibGUgPSBfdGhpczQuaXNPcHRpb25EaXNhYmxlZChvcHQpID09PSB0cnVlOwogICAgICAgIHZhciBpbmRleCA9IGZyb20gKyBpOwogICAgICAgIHZhciBpdGVtUHJvcHMgPSB7CiAgICAgICAgICBjbGlja2FibGU6IHRydWUsCiAgICAgICAgICBhY3RpdmU6IGZhbHNlLAogICAgICAgICAgYWN0aXZlQ2xhc3M6IF90aGlzNC5jb21wdXRlZE9wdGlvbnNTZWxlY3RlZENsYXNzLAogICAgICAgICAgbWFudWFsRm9jdXM6IHRydWUsCiAgICAgICAgICBmb2N1c2VkOiBmYWxzZSwKICAgICAgICAgIGRpc2FibGU6IGRpc2FibGUsCiAgICAgICAgICB0YWJpbmRleDogLTEsCiAgICAgICAgICBkZW5zZTogX3RoaXM0Lm9wdGlvbnNEZW5zZSwKICAgICAgICAgIGRhcms6IF90aGlzNC5pc09wdGlvbnNEYXJrCiAgICAgICAgfTsKCiAgICAgICAgaWYgKGRpc2FibGUgIT09IHRydWUpIHsKICAgICAgICAgIF90aGlzNC5pc09wdGlvblNlbGVjdGVkKG9wdCkgPT09IHRydWUgJiYgKGl0ZW1Qcm9wcy5hY3RpdmUgPSB0cnVlKTsKICAgICAgICAgIF90aGlzNC5vcHRpb25JbmRleCA9PT0gaW5kZXggJiYgKGl0ZW1Qcm9wcy5mb2N1c2VkID0gdHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgaXRlbUV2ZW50cyA9IHsKICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgX3RoaXM0LnRvZ2dsZU9wdGlvbihvcHQpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGlmIChfdGhpczQuJHEucGxhdGZvcm0uaXMuZGVza3RvcCA9PT0gdHJ1ZSkgewogICAgICAgICAgaXRlbUV2ZW50cy5tb3VzZW1vdmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzNC5zZXRPcHRpb25JbmRleChpbmRleCk7CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgdmFyIG9wdGlvbiA9IHsKICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgIG9wdDogb3B0LAogICAgICAgICAgc2FuaXRpemU6IF90aGlzNC5zYW5pdGl6ZUZuKG9wdCksCiAgICAgICAgICBzZWxlY3RlZDogaXRlbVByb3BzLmFjdGl2ZSwKICAgICAgICAgIGZvY3VzZWQ6IGl0ZW1Qcm9wcy5mb2N1c2VkLAogICAgICAgICAgdG9nZ2xlT3B0aW9uOiBfdGhpczQudG9nZ2xlT3B0aW9uLAogICAgICAgICAgc2V0T3B0aW9uSW5kZXg6IF90aGlzNC5zZXRPcHRpb25JbmRleCwKICAgICAgICAgIGl0ZW1Qcm9wczogaXRlbVByb3BzCiAgICAgICAgfTsKCiAgICAgICAgaWYgKG9wdGlvbnNbaV0gPT09IHZvaWQgMCB8fCBpc0RlZXBFcXVhbChvcHRpb24sIG9wdGlvbnNbaV0pICE9PSB0cnVlKSB7CiAgICAgICAgICBvcHRpb25zW2ldID0gb3B0aW9uOwogICAgICAgICAgb3B0aW9uRWxzW2ldID0gdm9pZCAwOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgb3B0aW9uKSwge30sIHsKICAgICAgICAgIGl0ZW1FdmVudHM6IGl0ZW1FdmVudHMKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZHJvcGRvd25BcnJvd0ljb246IGZ1bmN0aW9uIGRyb3Bkb3duQXJyb3dJY29uKCkgewogICAgICByZXR1cm4gdGhpcy5kcm9wZG93bkljb24gIT09IHZvaWQgMCA/IHRoaXMuZHJvcGRvd25JY29uIDogdGhpcy4kcS5pY29uU2V0LmFycm93LmRyb3Bkb3duOwogICAgfSwKICAgIHNxdWFyZWRNZW51OiBmdW5jdGlvbiBzcXVhcmVkTWVudSgpIHsKICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc0NvdmVyID09PSBmYWxzZSAmJiB0aGlzLm91dGxpbmVkICE9PSB0cnVlICYmIHRoaXMuc3RhbmRvdXQgIT09IHRydWUgJiYgdGhpcy5ib3JkZXJsZXNzICE9PSB0cnVlICYmIHRoaXMucm91bmRlZCAhPT0gdHJ1ZTsKICAgIH0sCiAgICBjb21wdXRlZE9wdGlvbnNTZWxlY3RlZENsYXNzOiBmdW5jdGlvbiBjb21wdXRlZE9wdGlvbnNTZWxlY3RlZENsYXNzKCkgewogICAgICByZXR1cm4gdGhpcy5vcHRpb25zU2VsZWN0ZWRDbGFzcyAhPT0gdm9pZCAwID8gdGhpcy5vcHRpb25zU2VsZWN0ZWRDbGFzcyA6IHRoaXMuY29sb3IgIT09IHZvaWQgMCA/ICJ0ZXh0LSIuY29uY2F0KHRoaXMuY29sb3IpIDogJyc7CiAgICB9LAogICAgaW5uZXJPcHRpb25zVmFsdWU6IGZ1bmN0aW9uIGlubmVyT3B0aW9uc1ZhbHVlKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiB0aGlzLmlubmVyVmFsdWUubWFwKGZ1bmN0aW9uIChvcHQpIHsKICAgICAgICByZXR1cm4gX3RoaXM1LmdldE9wdGlvblZhbHVlKG9wdCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIHJldHVybnMgbWV0aG9kIHRvIGdldCB2YWx1ZSBvZiBhbiBvcHRpb247CiAgICAvLyB0YWtlcyBpbnRvIGFjY291bnQgJ29wdGlvbi12YWx1ZScgcHJvcAogICAgZ2V0T3B0aW9uVmFsdWU6IGZ1bmN0aW9uIGdldE9wdGlvblZhbHVlKCkgewogICAgICByZXR1cm4gdGhpcy5fX2dldFByb3BWYWx1ZUZuKCdvcHRpb25WYWx1ZScsICd2YWx1ZScpOwogICAgfSwKICAgIC8vIHJldHVybnMgbWV0aG9kIHRvIGdldCBsYWJlbCBvZiBhbiBvcHRpb247CiAgICAvLyB0YWtlcyBpbnRvIGFjY291bnQgJ29wdGlvbi1sYWJlbCcgcHJvcAogICAgZ2V0T3B0aW9uTGFiZWw6IGZ1bmN0aW9uIGdldE9wdGlvbkxhYmVsKCkgewogICAgICByZXR1cm4gdGhpcy5fX2dldFByb3BWYWx1ZUZuKCdvcHRpb25MYWJlbCcsICdsYWJlbCcpOwogICAgfSwKICAgIC8vIHJldHVybnMgbWV0aG9kIHRvIHRlbGwgaWYgYW4gb3B0aW9uIGlzIGRpc2FibGVkOwogICAgLy8gdGFrZXMgaW50byBhY2NvdW50ICdvcHRpb24tZGlzYWJsZScgcHJvcAogICAgaXNPcHRpb25EaXNhYmxlZDogZnVuY3Rpb24gaXNPcHRpb25EaXNhYmxlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX19nZXRQcm9wVmFsdWVGbignb3B0aW9uRGlzYWJsZScsICdkaXNhYmxlJyk7CiAgICB9LAogICAgaW5wdXRDb250cm9sRXZlbnRzOiBmdW5jdGlvbiBpbnB1dENvbnRyb2xFdmVudHMoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIG9uID0gewogICAgICAgIGlucHV0OiB0aGlzLl9fb25JbnB1dCwKICAgICAgICAvLyBTYWZhcmkgPCAxMC4yICYgVUlXZWJWaWV3IGRvZXNuJ3QgZmlyZSBjb21wb3NpdGlvbmVuZCB3aGVuCiAgICAgICAgLy8gc3dpdGNoaW5nIGZvY3VzIGJlZm9yZSBjb25maXJtaW5nIGNvbXBvc2l0aW9uIGNob2ljZQogICAgICAgIC8vIHRoaXMgYWxzbyBmaXhlcyB0aGUgaXNzdWUgd2hlcmUgc29tZSBicm93c2VycyBlLmcuIGlPUyBDaHJvbWUKICAgICAgICAvLyBmaXJlcyAiY2hhbmdlIiBpbnN0ZWFkIG9mICJpbnB1dCIgb24gYXV0b2NvbXBsZXRlLgogICAgICAgIGNoYW5nZTogdGhpcy5fX29uQ2hhbmdlLAogICAgICAgIGtleWRvd246IHRoaXMuX19vblRhcmdldEtleWRvd24sCiAgICAgICAga2V5dXA6IHRoaXMuX19vblRhcmdldEF1dG9jb21wbGV0ZSwKICAgICAgICBrZXlwcmVzczogdGhpcy5fX29uVGFyZ2V0S2V5cHJlc3MsCiAgICAgICAgZm9jdXM6IHRoaXMuX19zZWxlY3RJbnB1dFRleHQsCiAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKGUpIHsKICAgICAgICAgIF90aGlzNi5oYXNEaWFsb2cgPT09IHRydWUgJiYgc3RvcChlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIG9uLmNvbXBvc2l0aW9uc3RhcnQgPSBvbi5jb21wb3NpdGlvbnVwZGF0ZSA9IG9uLmNvbXBvc2l0aW9uZW5kID0gdGhpcy5fX29uQ29tcG9zaXRpb247CiAgICAgIHJldHVybiBvbjsKICAgIH0sCiAgICB2aXJ0dWFsU2Nyb2xsSXRlbVNpemVDb21wdXRlZDogZnVuY3Rpb24gdmlydHVhbFNjcm9sbEl0ZW1TaXplQ29tcHV0ZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnZpcnR1YWxTY3JvbGxJdGVtU2l6ZSA9PT0gdm9pZCAwID8gdGhpcy5kZW5zZSA9PT0gdHJ1ZSA/IDI0IDogNDggOiB0aGlzLnZpcnR1YWxTY3JvbGxJdGVtU2l6ZTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEVtaXR0aW5nT3B0aW9uVmFsdWU6IGZ1bmN0aW9uIGdldEVtaXR0aW5nT3B0aW9uVmFsdWUob3B0KSB7CiAgICAgIHJldHVybiB0aGlzLmVtaXRWYWx1ZSA9PT0gdHJ1ZSA/IHRoaXMuZ2V0T3B0aW9uVmFsdWUob3B0KSA6IG9wdDsKICAgIH0sCiAgICByZW1vdmVBdEluZGV4OiBmdW5jdGlvbiByZW1vdmVBdEluZGV4KGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA+IC0xICYmIGluZGV4IDwgdGhpcy5pbm5lclZhbHVlLmxlbmd0aCkgewogICAgICAgIGlmICh0aGlzLm11bHRpcGxlID09PSB0cnVlKSB7CiAgICAgICAgICB2YXIgbW9kZWwgPSB0aGlzLnZhbHVlLnNsaWNlKCk7CiAgICAgICAgICB0aGlzLiRlbWl0KCdyZW1vdmUnLCB7CiAgICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgICAgdmFsdWU6IG1vZGVsLnNwbGljZShpbmRleCwgMSlbMF0KICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBtb2RlbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgbnVsbCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgX19yZW1vdmVBdEluZGV4QW5kRm9jdXM6IGZ1bmN0aW9uIF9fcmVtb3ZlQXRJbmRleEFuZEZvY3VzKGluZGV4KSB7CiAgICAgIHRoaXMucmVtb3ZlQXRJbmRleChpbmRleCk7CgogICAgICB0aGlzLl9fZm9jdXMoKTsKICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZChvcHQsIHVuaXF1ZSkgewogICAgICB2YXIgdmFsID0gdGhpcy5nZXRFbWl0dGluZ09wdGlvblZhbHVlKG9wdCk7CgogICAgICBpZiAodGhpcy5tdWx0aXBsZSAhPT0gdHJ1ZSkgewogICAgICAgIHRoaXMuZmlsbElucHV0ID09PSB0cnVlICYmIHRoaXMudXBkYXRlSW5wdXRWYWx1ZSh0aGlzLmdldE9wdGlvbkxhYmVsKG9wdCksIHRydWUsIHRydWUpOwogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmlubmVyVmFsdWUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnYWRkJywgewogICAgICAgICAgaW5kZXg6IDAsCiAgICAgICAgICB2YWx1ZTogdmFsCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLm11bHRpcGxlID09PSB0cnVlID8gW3ZhbF0gOiB2YWwpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHVuaXF1ZSA9PT0gdHJ1ZSAmJiB0aGlzLmlzT3B0aW9uU2VsZWN0ZWQob3B0KSA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubWF4VmFsdWVzICE9PSB2b2lkIDAgJiYgdGhpcy52YWx1ZS5sZW5ndGggPj0gdGhpcy5tYXhWYWx1ZXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBtb2RlbCA9IHRoaXMudmFsdWUuc2xpY2UoKTsKICAgICAgdGhpcy4kZW1pdCgnYWRkJywgewogICAgICAgIGluZGV4OiBtb2RlbC5sZW5ndGgsCiAgICAgICAgdmFsdWU6IHZhbAogICAgICB9KTsKICAgICAgbW9kZWwucHVzaCh2YWwpOwogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIG1vZGVsKTsKICAgIH0sCiAgICB0b2dnbGVPcHRpb246IGZ1bmN0aW9uIHRvZ2dsZU9wdGlvbihvcHQsIGtlZXBPcGVuKSB7CiAgICAgIGlmICh0aGlzLmVkaXRhYmxlICE9PSB0cnVlIHx8IG9wdCA9PT0gdm9pZCAwIHx8IHRoaXMuaXNPcHRpb25EaXNhYmxlZChvcHQpID09PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgb3B0VmFsdWUgPSB0aGlzLmdldE9wdGlvblZhbHVlKG9wdCk7CgogICAgICBpZiAodGhpcy5tdWx0aXBsZSAhPT0gdHJ1ZSkgewogICAgICAgIGlmIChrZWVwT3BlbiAhPT0gdHJ1ZSkgewogICAgICAgICAgdGhpcy51cGRhdGVJbnB1dFZhbHVlKHRoaXMuZmlsbElucHV0ID09PSB0cnVlID8gdGhpcy5nZXRPcHRpb25MYWJlbChvcHQpIDogJycsIHRydWUsIHRydWUpOwogICAgICAgICAgdGhpcy5oaWRlUG9wdXAoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuJHJlZnMudGFyZ2V0ICE9PSB2b2lkIDAgJiYgdGhpcy4kcmVmcy50YXJnZXQuZm9jdXMoKTsKCiAgICAgICAgaWYgKGlzRGVlcEVxdWFsKHRoaXMuZ2V0T3B0aW9uVmFsdWUodGhpcy5pbm5lclZhbHVlWzBdKSwgb3B0VmFsdWUpICE9PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMuZW1pdFZhbHVlID09PSB0cnVlID8gb3B0VmFsdWUgOiBvcHQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAodGhpcy5oYXNEaWFsb2cgIT09IHRydWUgfHwgdGhpcy5kaWFsb2dGaWVsZEZvY3VzZWQgPT09IHRydWUpICYmIHRoaXMuX19mb2N1cygpOwoKICAgICAgdGhpcy5fX3NlbGVjdElucHV0VGV4dCgpOwoKICAgICAgaWYgKHRoaXMuaW5uZXJWYWx1ZS5sZW5ndGggPT09IDApIHsKICAgICAgICB2YXIgdmFsID0gdGhpcy5lbWl0VmFsdWUgPT09IHRydWUgPyBvcHRWYWx1ZSA6IG9wdDsKICAgICAgICB0aGlzLiRlbWl0KCdhZGQnLCB7CiAgICAgICAgICBpbmRleDogMCwKICAgICAgICAgIHZhbHVlOiB2YWwKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMubXVsdGlwbGUgPT09IHRydWUgPyBbdmFsXSA6IHZhbCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgbW9kZWwgPSB0aGlzLnZhbHVlLnNsaWNlKCksCiAgICAgICAgICBpbmRleCA9IHRoaXMuaW5uZXJPcHRpb25zVmFsdWUuZmluZEluZGV4KGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIGlzRGVlcEVxdWFsKHYsIG9wdFZhbHVlKTsKICAgICAgfSk7CgogICAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICAgIHRoaXMuJGVtaXQoJ3JlbW92ZScsIHsKICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgIHZhbHVlOiBtb2RlbC5zcGxpY2UoaW5kZXgsIDEpWzBdCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMubWF4VmFsdWVzICE9PSB2b2lkIDAgJiYgbW9kZWwubGVuZ3RoID49IHRoaXMubWF4VmFsdWVzKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgX3ZhbCA9IHRoaXMuZW1pdFZhbHVlID09PSB0cnVlID8gb3B0VmFsdWUgOiBvcHQ7CgogICAgICAgIHRoaXMuJGVtaXQoJ2FkZCcsIHsKICAgICAgICAgIGluZGV4OiBtb2RlbC5sZW5ndGgsCiAgICAgICAgICB2YWx1ZTogX3ZhbAogICAgICAgIH0pOwogICAgICAgIG1vZGVsLnB1c2goX3ZhbCk7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgbW9kZWwpOwogICAgfSwKICAgIHNldE9wdGlvbkluZGV4OiBmdW5jdGlvbiBzZXRPcHRpb25JbmRleChpbmRleCkgewogICAgICBpZiAodGhpcy4kcS5wbGF0Zm9ybS5pcy5kZXNrdG9wICE9PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdmFsID0gaW5kZXggPiAtMSAmJiBpbmRleCA8IHRoaXMudmlydHVhbFNjcm9sbExlbmd0aCA/IGluZGV4IDogLTE7CgogICAgICBpZiAodGhpcy5vcHRpb25JbmRleCAhPT0gdmFsKSB7CiAgICAgICAgdGhpcy5vcHRpb25JbmRleCA9IHZhbDsKICAgICAgfQogICAgfSwKICAgIG1vdmVPcHRpb25TZWxlY3Rpb246IGZ1bmN0aW9uIG1vdmVPcHRpb25TZWxlY3Rpb24oKSB7CiAgICAgIHZhciBvZmZzZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDE7CiAgICAgIHZhciBza2lwSW5wdXRWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwoKICAgICAgaWYgKHRoaXMubWVudSA9PT0gdHJ1ZSkgewogICAgICAgIHZhciBpbmRleCA9IHRoaXMub3B0aW9uSW5kZXg7CgogICAgICAgIGRvIHsKICAgICAgICAgIGluZGV4ID0gbm9ybWFsaXplVG9JbnRlcnZhbChpbmRleCArIG9mZnNldCwgLTEsIHRoaXMudmlydHVhbFNjcm9sbExlbmd0aCAtIDEpOwogICAgICAgIH0gd2hpbGUgKGluZGV4ICE9PSAtMSAmJiBpbmRleCAhPT0gdGhpcy5vcHRpb25JbmRleCAmJiB0aGlzLmlzT3B0aW9uRGlzYWJsZWQodGhpcy5vcHRpb25zW2luZGV4XSkgPT09IHRydWUpOwoKICAgICAgICBpZiAodGhpcy5vcHRpb25JbmRleCAhPT0gaW5kZXgpIHsKICAgICAgICAgIHRoaXMuc2V0T3B0aW9uSW5kZXgoaW5kZXgpOwogICAgICAgICAgdGhpcy5zY3JvbGxUbyhpbmRleCk7CgogICAgICAgICAgaWYgKHNraXBJbnB1dFZhbHVlICE9PSB0cnVlICYmIHRoaXMudXNlSW5wdXQgPT09IHRydWUgJiYgdGhpcy5maWxsSW5wdXQgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5fX3NldElucHV0VmFsdWUoaW5kZXggPj0gMCA/IHRoaXMuZ2V0T3B0aW9uTGFiZWwodGhpcy5vcHRpb25zW2luZGV4XSkgOiB0aGlzLmRlZmF1bHRJbnB1dFZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBfX2dldE9wdGlvbjogZnVuY3Rpb24gX19nZXRPcHRpb24odmFsdWUsIGlubmVyVmFsdWVDYWNoZSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIGZuKG9wdCkgewogICAgICAgIHJldHVybiBpc0RlZXBFcXVhbChfdGhpczcuZ2V0T3B0aW9uVmFsdWUob3B0KSwgdmFsdWUpOwogICAgICB9OwoKICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5maW5kKGZuKSB8fCBpbm5lclZhbHVlQ2FjaGUuZmluZChmbikgfHwgdmFsdWU7CiAgICB9LAogICAgX19nZXRQcm9wVmFsdWVGbjogZnVuY3Rpb24gX19nZXRQcm9wVmFsdWVGbihwcm9wTmFtZSwgZGVmYXVsdFZhbCkgewogICAgICB2YXIgdmFsID0gdGhpc1twcm9wTmFtZV0gIT09IHZvaWQgMCA/IHRoaXNbcHJvcE5hbWVdIDogZGVmYXVsdFZhbDsKICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicgPyB2YWwgOiBmdW5jdGlvbiAob3B0KSB7CiAgICAgICAgcmV0dXJuIE9iamVjdChvcHQpID09PSBvcHQgJiYgdmFsIGluIG9wdCA/IG9wdFt2YWxdIDogb3B0OwogICAgICB9OwogICAgfSwKICAgIGlzT3B0aW9uU2VsZWN0ZWQ6IGZ1bmN0aW9uIGlzT3B0aW9uU2VsZWN0ZWQob3B0KSB7CiAgICAgIHZhciB2YWwgPSB0aGlzLmdldE9wdGlvblZhbHVlKG9wdCk7CiAgICAgIHJldHVybiB0aGlzLmlubmVyT3B0aW9uc1ZhbHVlLmZpbmQoZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gaXNEZWVwRXF1YWwodiwgdmFsKTsKICAgICAgfSkgIT09IHZvaWQgMDsKICAgIH0sCiAgICBfX3NlbGVjdElucHV0VGV4dDogZnVuY3Rpb24gX19zZWxlY3RJbnB1dFRleHQoKSB7CiAgICAgIGlmICh0aGlzLnVzZUlucHV0ID09PSB0cnVlICYmIHRoaXMuJHJlZnMudGFyZ2V0ICE9PSB2b2lkIDApIHsKICAgICAgICB0aGlzLiRyZWZzLnRhcmdldC5zZWxlY3QoKTsKICAgICAgfQogICAgfSwKICAgIF9fb25UYXJnZXRLZXl1cDogZnVuY3Rpb24gX19vblRhcmdldEtleXVwKGUpIHsKICAgICAgLy8gaWYgRVNDIGFuZCB3ZSBoYXZlIGFuIG9wZW5lZCBtZW51CiAgICAgIC8vIHRoZW4gc3RvcCBwcm9wYWdhdGlvbiAobWlnaHQgYmUgY2F1Z2h0IGJ5IGEgUURpYWxvZwogICAgICAvLyBhbmQgc28gaXQgd2lsbCBhbHNvIGNsb3NlIHRoZSBRRGlhbG9nLCB3aGljaCBpcyB3cm9uZykKICAgICAgaWYgKGlzS2V5Q29kZShlLCAyNykgPT09IHRydWUgJiYgdGhpcy5tZW51ID09PSB0cnVlKSB7CiAgICAgICAgc3RvcChlKTsgLy8gb24gRVNDIHdlIG5lZWQgdG8gY2xvc2UgdGhlIGRpYWxvZyBhbHNvCgogICAgICAgIHRoaXMuaGlkZVBvcHVwKCk7CgogICAgICAgIHRoaXMuX19yZXNldElucHV0VmFsdWUoKTsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgna2V5dXAnLCBlKTsKICAgIH0sCiAgICBfX29uVGFyZ2V0QXV0b2NvbXBsZXRlOiBmdW5jdGlvbiBfX29uVGFyZ2V0QXV0b2NvbXBsZXRlKGUpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB2YXIgdmFsdWUgPSBlLnRhcmdldC52YWx1ZTsKCiAgICAgIGlmIChlLmtleUNvZGUgIT09IHZvaWQgMCkgewogICAgICAgIHRoaXMuX19vblRhcmdldEtleXVwKGUpOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGUudGFyZ2V0LnZhbHVlID0gJyc7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmlucHV0VGltZXIpOwoKICAgICAgdGhpcy5fX3Jlc2V0SW5wdXRWYWx1ZSgpOwoKICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBuZWVkbGUgPSB2YWx1ZS50b0xvY2FsZUxvd2VyQ2FzZSgpOwoKICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBmbihvcHQpIHsKICAgICAgICAgIHJldHVybiBfdGhpczguZ2V0T3B0aW9uVmFsdWUob3B0KS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuZWVkbGU7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIG9wdGlvbiA9IHRoaXMub3B0aW9ucy5maW5kKGZuKTsKCiAgICAgICAgaWYgKG9wdGlvbiAhPT0gdm9pZCAwKSB7CiAgICAgICAgICBpZiAodGhpcy5pbm5lclZhbHVlLmluZGV4T2Yob3B0aW9uKSA9PT0gLTEpIHsKICAgICAgICAgICAgdGhpcy50b2dnbGVPcHRpb24ob3B0aW9uKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuaGlkZVBvcHVwKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZuID0gZnVuY3Rpb24gZm4ob3B0KSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczguZ2V0T3B0aW9uTGFiZWwob3B0KS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuZWVkbGU7CiAgICAgICAgICB9OwoKICAgICAgICAgIG9wdGlvbiA9IHRoaXMub3B0aW9ucy5maW5kKGZuKTsKCiAgICAgICAgICBpZiAob3B0aW9uICE9PSB2b2lkIDApIHsKICAgICAgICAgICAgaWYgKHRoaXMuaW5uZXJWYWx1ZS5pbmRleE9mKG9wdGlvbikgPT09IC0xKSB7CiAgICAgICAgICAgICAgdGhpcy50b2dnbGVPcHRpb24ob3B0aW9uKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmhpZGVQb3B1cCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmZpbHRlcih2YWx1ZSwgdHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX19jbGVhclZhbHVlKGUpOwogICAgICB9CiAgICB9LAogICAgX19vblRhcmdldEtleXByZXNzOiBmdW5jdGlvbiBfX29uVGFyZ2V0S2V5cHJlc3MoZSkgewogICAgICB0aGlzLiRlbWl0KCdrZXlwcmVzcycsIGUpOwogICAgfSwKICAgIF9fb25UYXJnZXRLZXlkb3duOiBmdW5jdGlvbiBfX29uVGFyZ2V0S2V5ZG93bihlKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdGhpcy4kZW1pdCgna2V5ZG93bicsIGUpOwoKICAgICAgaWYgKHNob3VsZElnbm9yZUtleShlKSA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG5ld1ZhbHVlTW9kZVZhbGlkID0gdGhpcy5pbnB1dFZhbHVlLmxlbmd0aCA+IDAgJiYgKHRoaXMubmV3VmFsdWVNb2RlICE9PSB2b2lkIDAgfHwgdGhpcy5xTGlzdGVuZXJzWyduZXctdmFsdWUnXSAhPT0gdm9pZCAwKTsKICAgICAgdmFyIHRhYlNob3VsZFNlbGVjdCA9IGUuc2hpZnRLZXkgIT09IHRydWUgJiYgdGhpcy5tdWx0aXBsZSAhPT0gdHJ1ZSAmJiAodGhpcy5vcHRpb25JbmRleCA+IC0xIHx8IG5ld1ZhbHVlTW9kZVZhbGlkID09PSB0cnVlKTsgLy8gZXNjYXBlCgogICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykgewogICAgICAgIHByZXZlbnQoZSk7IC8vIHByZXZlbnQgY2xlYXJpbmcgdGhlIGlucHV0VmFsdWUKCiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIHRhYgoKCiAgICAgIGlmIChlLmtleUNvZGUgPT09IDkgJiYgdGFiU2hvdWxkU2VsZWN0ID09PSBmYWxzZSkgewogICAgICAgIHRoaXMuX19jbG9zZU1lbnUoKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoZS50YXJnZXQgPT09IHZvaWQgMCB8fCBlLnRhcmdldC5pZCAhPT0gdGhpcy50YXJnZXRVaWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gZG93bgoKCiAgICAgIGlmIChlLmtleUNvZGUgPT09IDQwICYmIHRoaXMuaW5uZXJMb2FkaW5nICE9PSB0cnVlICYmIHRoaXMubWVudSA9PT0gZmFsc2UpIHsKICAgICAgICBzdG9wQW5kUHJldmVudChlKTsKICAgICAgICB0aGlzLnNob3dQb3B1cCgpOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBiYWNrc3BhY2UKCgogICAgICBpZiAoZS5rZXlDb2RlID09PSA4ICYmIHRoaXMuaGlkZVNlbGVjdGVkICE9PSB0cnVlICYmIHRoaXMuaW5wdXRWYWx1ZS5sZW5ndGggPT09IDApIHsKICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSA9PT0gdHJ1ZSAmJiBBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpKSB7CiAgICAgICAgICB0aGlzLnJlbW92ZUF0SW5kZXgodGhpcy52YWx1ZS5sZW5ndGggLSAxKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMubXVsdGlwbGUgIT09IHRydWUgJiYgdGhpcy52YWx1ZSAhPT0gbnVsbCkgewogICAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBudWxsKTsKICAgICAgICB9CgogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBob21lLCBlbmQgLSAzNiwgMzUKCgogICAgICBpZiAoKGUua2V5Q29kZSA9PT0gMzUgfHwgZS5rZXlDb2RlID09PSAzNikgJiYgKHR5cGVvZiB0aGlzLmlucHV0VmFsdWUgIT09ICdzdHJpbmcnIHx8IHRoaXMuaW5wdXRWYWx1ZS5sZW5ndGggPT09IDApKSB7CiAgICAgICAgc3RvcEFuZFByZXZlbnQoZSk7CiAgICAgICAgdGhpcy5vcHRpb25JbmRleCA9IC0xOwogICAgICAgIHRoaXMubW92ZU9wdGlvblNlbGVjdGlvbihlLmtleUNvZGUgPT09IDM2ID8gMSA6IC0xLCB0aGlzLm11bHRpcGxlKTsKICAgICAgfSAvLyBwZyB1cCwgcGcgZG93biAtIDMzLCAzNAoKCiAgICAgIGlmICgoZS5rZXlDb2RlID09PSAzMyB8fCBlLmtleUNvZGUgPT09IDM0KSAmJiB0aGlzLnZpcnR1YWxTY3JvbGxTbGljZVNpemVDb21wdXRlZCAhPT0gdm9pZCAwKSB7CiAgICAgICAgc3RvcEFuZFByZXZlbnQoZSk7CiAgICAgICAgdGhpcy5vcHRpb25JbmRleCA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbih0aGlzLnZpcnR1YWxTY3JvbGxMZW5ndGgsIHRoaXMub3B0aW9uSW5kZXggKyAoZS5rZXlDb2RlID09PSAzMyA/IC0xIDogMSkgKiB0aGlzLnZpcnR1YWxTY3JvbGxTbGljZVNpemVDb21wdXRlZC52aWV3KSk7CiAgICAgICAgdGhpcy5tb3ZlT3B0aW9uU2VsZWN0aW9uKGUua2V5Q29kZSA9PT0gMzMgPyAxIDogLTEsIHRoaXMubXVsdGlwbGUpOwogICAgICB9IC8vIHVwLCBkb3duCgoKICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzggfHwgZS5rZXlDb2RlID09PSA0MCkgewogICAgICAgIHN0b3BBbmRQcmV2ZW50KGUpOwogICAgICAgIHRoaXMubW92ZU9wdGlvblNlbGVjdGlvbihlLmtleUNvZGUgPT09IDM4ID8gLTEgOiAxLCB0aGlzLm11bHRpcGxlKTsKICAgICAgfQoKICAgICAgdmFyIG9wdGlvbnNMZW5ndGggPSB0aGlzLnZpcnR1YWxTY3JvbGxMZW5ndGg7IC8vIGNsZWFyIHNlYXJjaCBidWZmZXIgaWYgZXhwaXJlZAoKICAgICAgaWYgKHRoaXMuc2VhcmNoQnVmZmVyID09PSB2b2lkIDAgfHwgdGhpcy5zZWFyY2hCdWZmZXJFeHAgPCBEYXRlLm5vdygpKSB7CiAgICAgICAgdGhpcy5zZWFyY2hCdWZmZXIgPSAnJzsKICAgICAgfSAvLyBrZXlib2FyZCBzZWFyY2ggd2hlbiBub3QgaGF2aW5nIHVzZS1pbnB1dAoKCiAgICAgIGlmIChvcHRpb25zTGVuZ3RoID4gMCAmJiB0aGlzLnVzZUlucHV0ICE9PSB0cnVlICYmIGUua2V5ICE9PSB2b2lkIDAgJiYgZS5rZXkubGVuZ3RoID09PSAxICYmIC8vIHByaW50YWJsZSBjaGFyCiAgICAgIGUuYWx0S2V5ID09PSBlLmN0cmxLZXkgJiYgKCAvLyBub3Qga2JkIHNob3J0Y3V0CiAgICAgIGUua2V5Q29kZSAhPT0gMzIgfHwgdGhpcy5zZWFyY2hCdWZmZXIubGVuZ3RoID4gMCkgLy8gc3BhY2UgaW4gbWlkZGxlIG9mIHNlYXJjaAogICAgICApIHsKICAgICAgICAgIHRoaXMubWVudSAhPT0gdHJ1ZSAmJiB0aGlzLnNob3dQb3B1cChlKTsKICAgICAgICAgIHZhciBjaGFyID0gZS5rZXkudG9Mb2NhbGVMb3dlckNhc2UoKSwKICAgICAgICAgICAgICBrZXlSZXBlYXQgPSB0aGlzLnNlYXJjaEJ1ZmZlci5sZW5ndGggPT09IDEgJiYgdGhpcy5zZWFyY2hCdWZmZXJbMF0gPT09IGNoYXI7CiAgICAgICAgICB0aGlzLnNlYXJjaEJ1ZmZlckV4cCA9IERhdGUubm93KCkgKyAxNTAwOwoKICAgICAgICAgIGlmIChrZXlSZXBlYXQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHN0b3BBbmRQcmV2ZW50KGUpOwogICAgICAgICAgICB0aGlzLnNlYXJjaEJ1ZmZlciArPSBjaGFyOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBzZWFyY2hSZSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy5zZWFyY2hCdWZmZXIuc3BsaXQoJycpLm1hcChmdW5jdGlvbiAobCkgewogICAgICAgICAgICByZXR1cm4gcmVFc2NhcGVMaXN0LmluZGV4T2YobCkgPiAtMSA/ICdcXCcgKyBsIDogbDsKICAgICAgICAgIH0pLmpvaW4oJy4qJyksICdpJyk7CiAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLm9wdGlvbkluZGV4OwoKICAgICAgICAgIGlmIChrZXlSZXBlYXQgPT09IHRydWUgfHwgaW5kZXggPCAwIHx8IHNlYXJjaFJlLnRlc3QodGhpcy5nZXRPcHRpb25MYWJlbCh0aGlzLm9wdGlvbnNbaW5kZXhdKSkgIT09IHRydWUpIHsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIGluZGV4ID0gbm9ybWFsaXplVG9JbnRlcnZhbChpbmRleCArIDEsIC0xLCBvcHRpb25zTGVuZ3RoIC0gMSk7CiAgICAgICAgICAgIH0gd2hpbGUgKGluZGV4ICE9PSB0aGlzLm9wdGlvbkluZGV4ICYmICh0aGlzLmlzT3B0aW9uRGlzYWJsZWQodGhpcy5vcHRpb25zW2luZGV4XSkgPT09IHRydWUgfHwgc2VhcmNoUmUudGVzdCh0aGlzLmdldE9wdGlvbkxhYmVsKHRoaXMub3B0aW9uc1tpbmRleF0pKSAhPT0gdHJ1ZSkpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbkluZGV4ICE9PSBpbmRleCkgewogICAgICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXM5LnNldE9wdGlvbkluZGV4KGluZGV4KTsKCiAgICAgICAgICAgICAgX3RoaXM5LnNjcm9sbFRvKGluZGV4KTsKCiAgICAgICAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgX3RoaXM5LnVzZUlucHV0ID09PSB0cnVlICYmIF90aGlzOS5maWxsSW5wdXQgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIF90aGlzOS5fX3NldElucHV0VmFsdWUoX3RoaXM5LmdldE9wdGlvbkxhYmVsKF90aGlzOS5vcHRpb25zW2luZGV4XSkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8gZW50ZXIsIHNwYWNlICh3aGVuIG5vdCB1c2luZyB1c2UtaW5wdXQgYW5kIG5vdCBpbiBzZWFyY2gpLCBvciB0YWIgKHdoZW4gbm90IHVzaW5nIG11bHRpcGxlIGFuZCBvcHRpb24gc2VsZWN0ZWQpCiAgICAgIC8vIHNhbWUgdGFyZ2V0IGlzIGNoZWNrZWQgYWJvdmUKCgogICAgICBpZiAoZS5rZXlDb2RlICE9PSAxMyAmJiAoZS5rZXlDb2RlICE9PSAzMiB8fCB0aGlzLnVzZUlucHV0ID09PSB0cnVlIHx8IHRoaXMuc2VhcmNoQnVmZmVyICE9PSAnJykgJiYgKGUua2V5Q29kZSAhPT0gOSB8fCB0YWJTaG91bGRTZWxlY3QgPT09IGZhbHNlKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZS5rZXlDb2RlICE9PSA5ICYmIHN0b3BBbmRQcmV2ZW50KGUpOwoKICAgICAgaWYgKHRoaXMub3B0aW9uSW5kZXggPiAtMSAmJiB0aGlzLm9wdGlvbkluZGV4IDwgb3B0aW9uc0xlbmd0aCkgewogICAgICAgIHRoaXMudG9nZ2xlT3B0aW9uKHRoaXMub3B0aW9uc1t0aGlzLm9wdGlvbkluZGV4XSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAobmV3VmFsdWVNb2RlVmFsaWQgPT09IHRydWUpIHsKICAgICAgICB2YXIgZG9uZSA9IGZ1bmN0aW9uIGRvbmUodmFsLCBtb2RlKSB7CiAgICAgICAgICBpZiAobW9kZSkgewogICAgICAgICAgICBpZiAodmFsaWRhdGVOZXdWYWx1ZU1vZGUobW9kZSkgIT09IHRydWUpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1vZGUgPSBfdGhpczkubmV3VmFsdWVNb2RlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWwgPT09IHZvaWQgMCB8fCB2YWwgPT09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzOS51cGRhdGVJbnB1dFZhbHVlKCcnLCBfdGhpczkubXVsdGlwbGUgIT09IHRydWUsIHRydWUpOwoKICAgICAgICAgIF90aGlzOVttb2RlID09PSAndG9nZ2xlJyA/ICd0b2dnbGVPcHRpb24nIDogJ2FkZCddKHZhbCwgbW9kZSA9PT0gJ2FkZC11bmlxdWUnKTsKCiAgICAgICAgICBpZiAoX3RoaXM5Lm11bHRpcGxlICE9PSB0cnVlKSB7CiAgICAgICAgICAgIF90aGlzOS4kcmVmcy50YXJnZXQgIT09IHZvaWQgMCAmJiBfdGhpczkuJHJlZnMudGFyZ2V0LmZvY3VzKCk7CgogICAgICAgICAgICBfdGhpczkuaGlkZVBvcHVwKCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgaWYgKHRoaXMucUxpc3RlbmVyc1snbmV3LXZhbHVlJ10gIT09IHZvaWQgMCkgewogICAgICAgICAgdGhpcy4kZW1pdCgnbmV3LXZhbHVlJywgdGhpcy5pbnB1dFZhbHVlLCBkb25lKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZG9uZSh0aGlzLmlucHV0VmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUgIT09IHRydWUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm1lbnUgPT09IHRydWUpIHsKICAgICAgICB0aGlzLl9fY2xvc2VNZW51KCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pbm5lckxvYWRpbmcgIT09IHRydWUpIHsKICAgICAgICB0aGlzLnNob3dQb3B1cCgpOwogICAgICB9CiAgICB9LAogICAgX19nZXRWaXJ0dWFsU2Nyb2xsRWw6IGZ1bmN0aW9uIF9fZ2V0VmlydHVhbFNjcm9sbEVsKCkgewogICAgICByZXR1cm4gdGhpcy5oYXNEaWFsb2cgPT09IHRydWUgPyB0aGlzLiRyZWZzLm1lbnVDb250ZW50IDogdGhpcy4kcmVmcy5tZW51ICE9PSB2b2lkIDAgJiYgdGhpcy4kcmVmcy5tZW51Ll9fcG9ydGFsICE9PSB2b2lkIDAgPyB0aGlzLiRyZWZzLm1lbnUuX19wb3J0YWwuJGVsIDogdm9pZCAwOwogICAgfSwKICAgIF9fZ2V0VmlydHVhbFNjcm9sbFRhcmdldDogZnVuY3Rpb24gX19nZXRWaXJ0dWFsU2Nyb2xsVGFyZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fX2dldFZpcnR1YWxTY3JvbGxFbCgpOwogICAgfSwKICAgIF9fZ2V0U2VsZWN0aW9uOiBmdW5jdGlvbiBfX2dldFNlbGVjdGlvbihoKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmhpZGVTZWxlY3RlZCA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuJHNjb3BlZFNsb3RzWydzZWxlY3RlZC1pdGVtJ10gIT09IHZvaWQgMCkgewogICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkU2NvcGUubWFwKGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgICAgcmV0dXJuIF90aGlzMTAuJHNjb3BlZFNsb3RzWydzZWxlY3RlZC1pdGVtJ10oc2NvcGUpOwogICAgICAgIH0pLnNsaWNlKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLiRzY29wZWRTbG90cy5zZWxlY3RlZCAhPT0gdm9pZCAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHNjb3BlZFNsb3RzLnNlbGVjdGVkKCkuc2xpY2UoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudXNlQ2hpcHMgPT09IHRydWUpIHsKICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFNjb3BlLm1hcChmdW5jdGlvbiAoc2NvcGUsIGkpIHsKICAgICAgICAgIHJldHVybiBoKFFDaGlwLCB7CiAgICAgICAgICAgIGtleTogJ29wdGlvbi0nICsgaSwKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICByZW1vdmFibGU6IF90aGlzMTAuZWRpdGFibGUgPT09IHRydWUgJiYgX3RoaXMxMC5pc09wdGlvbkRpc2FibGVkKHNjb3BlLm9wdCkgIT09IHRydWUsCiAgICAgICAgICAgICAgZGVuc2U6IHRydWUsCiAgICAgICAgICAgICAgdGV4dENvbG9yOiBfdGhpczEwLmNvbG9yLAogICAgICAgICAgICAgIHRhYmluZGV4OiBfdGhpczEwLmNvbXB1dGVkVGFiaW5kZXgKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb246IGNhY2hlKF90aGlzMTAsICdyZW0jJyArIGksIHsKICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgICAgICAgICAgIHNjb3BlLnJlbW92ZUF0SW5kZXgoaSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgfSwgW2goJ3NwYW4nLCB7CiAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAnZWxsaXBzaXMnLAogICAgICAgICAgICBkb21Qcm9wczogX2RlZmluZVByb3BlcnR5KHt9LCBzY29wZS5zYW5pdGl6ZSA9PT0gdHJ1ZSA/ICd0ZXh0Q29udGVudCcgOiAnaW5uZXJIVE1MJywgX3RoaXMxMC5nZXRPcHRpb25MYWJlbChzY29wZS5vcHQpKQogICAgICAgICAgfSldKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIFtoKCdzcGFuJywgewogICAgICAgIGRvbVByb3BzOiBfZGVmaW5lUHJvcGVydHkoe30sIHRoaXMuZGlzcGxheUFzVGV4dCA/ICd0ZXh0Q29udGVudCcgOiAnaW5uZXJIVE1MJywgdGhpcy5kaXNwbGF5VmFsdWUgIT09IHZvaWQgMCA/IHRoaXMuZGlzcGxheVZhbHVlIDogdGhpcy5zZWxlY3RlZFN0cmluZykKICAgICAgfSldOwogICAgfSwKICAgIF9fZ2V0Q29udHJvbDogZnVuY3Rpb24gX19nZXRDb250cm9sKGgsIGZyb21EaWFsb2cpIHsKICAgICAgdmFyIGNoaWxkID0gdGhpcy5fX2dldFNlbGVjdGlvbihoKTsKCiAgICAgIHZhciBpc1RhcmdldCA9IGZyb21EaWFsb2cgPT09IHRydWUgfHwgdGhpcy5kaWFsb2cgIT09IHRydWUgfHwgdGhpcy5oYXNEaWFsb2cgIT09IHRydWU7CgogICAgICBpZiAodGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSkgewogICAgICAgIGNoaWxkLnB1c2godGhpcy5fX2dldElucHV0KGgsIGZyb21EaWFsb2csIGlzVGFyZ2V0KSk7CiAgICAgIH0gLy8gdGhlcmUgY2FuIGJlIG9ubHkgb25lICh3aGVuIGRpYWxvZyBpcyBvcGVuZWQgdGhlIGNvbnRyb2wgaW4gZGlhbG9nIHNob3VsZCBiZSB0YXJnZXQpCiAgICAgIGVsc2UgaWYgKHRoaXMuZWRpdGFibGUgPT09IHRydWUgJiYgaXNUYXJnZXQgPT09IHRydWUpIHsKICAgICAgICAgIGNoaWxkLnB1c2goaCgnZGl2JywgewogICAgICAgICAgICByZWY6ICd0YXJnZXQnLAogICAgICAgICAgICBrZXk6ICdkX3QnLAogICAgICAgICAgICBzdGF0aWNDbGFzczogJ25vLW91dGxpbmUnLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgIGlkOiB0aGlzLnRhcmdldFVpZCwKICAgICAgICAgICAgICB0YWJpbmRleDogdGhpcy50YWJpbmRleAogICAgICAgICAgICB9LAogICAgICAgICAgICBvbjogY2FjaGUodGhpcywgJ2YtdGdldCcsIHsKICAgICAgICAgICAgICBrZXlkb3duOiB0aGlzLl9fb25UYXJnZXRLZXlkb3duLAogICAgICAgICAgICAgIGtleXVwOiB0aGlzLl9fb25UYXJnZXRLZXl1cCwKICAgICAgICAgICAgICBrZXlwcmVzczogdGhpcy5fX29uVGFyZ2V0S2V5cHJlc3MKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pKTsKCiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuYXV0b2NvbXBsZXRlID09PSAnc3RyaW5nJyAmJiB0aGlzLmF1dG9jb21wbGV0ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGNoaWxkLnB1c2goaCgnaW5wdXQnLCB7CiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICdxLXNlbGVjdF9fYXV0b2NvbXBsZXRlLWlucHV0IG5vLW91dGxpbmUnLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICBhdXRvY29tcGxldGU6IHRoaXMuYXV0b2NvbXBsZXRlCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbjogY2FjaGUodGhpcywgJ2F1dG9pbnAnLCB7CiAgICAgICAgICAgICAgICBrZXl1cDogdGhpcy5fX29uVGFyZ2V0QXV0b2NvbXBsZXRlCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgIGlmICh0aGlzLm5hbWVQcm9wICE9PSB2b2lkIDAgJiYgdGhpcy5kaXNhYmxlICE9PSB0cnVlICYmIHRoaXMuaW5uZXJPcHRpb25zVmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBvcHRzID0gdGhpcy5pbm5lck9wdGlvbnNWYWx1ZS5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gaCgnb3B0aW9uJywgewogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBjaGlsZC5wdXNoKGgoJ3NlbGVjdCcsIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAnaGlkZGVuJywKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZVByb3AsCiAgICAgICAgICAgIG11bHRpcGxlOiB0aGlzLm11bHRpcGxlCiAgICAgICAgICB9CiAgICAgICAgfSwgb3B0cykpOwogICAgICB9CgogICAgICByZXR1cm4gaCgnZGl2JywgewogICAgICAgIHN0YXRpY0NsYXNzOiAncS1maWVsZF9fbmF0aXZlIHJvdyBpdGVtcy1jZW50ZXInLAogICAgICAgIGF0dHJzOiB0aGlzLnFBdHRycwogICAgICB9LCBjaGlsZCk7CiAgICB9LAogICAgX19nZXRPcHRpb25zOiBmdW5jdGlvbiBfX2dldE9wdGlvbnMoaCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICBpZiAodGhpcy5tZW51ICE9PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuIHZvaWQgMDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuJHNjb3BlZFNsb3RzLm9wdGlvbiAhPT0gdm9pZCAwICYmIHRoaXMuX19vcHRpb25TY29wZUNhY2hlLm9wdGlvblNsb3QgIT09IHRoaXMuJHNjb3BlZFNsb3RzLm9wdGlvbikgewogICAgICAgIHRoaXMuX19vcHRpb25TY29wZUNhY2hlLm9wdGlvblNsb3QgPSB0aGlzLiRzY29wZWRTbG90cy5vcHRpb247CiAgICAgICAgdGhpcy5fX29wdGlvblNjb3BlQ2FjaGUub3B0aW9uRWxzID0gW107CiAgICAgIH0KCiAgICAgIHZhciBmbiA9IHRoaXMuJHNjb3BlZFNsb3RzLm9wdGlvbiAhPT0gdm9pZCAwID8gdGhpcy4kc2NvcGVkU2xvdHMub3B0aW9uIDogZnVuY3Rpb24gKHNjb3BlKSB7CiAgICAgICAgcmV0dXJuIGgoUUl0ZW0sIHsKICAgICAgICAgIGtleTogc2NvcGUuaW5kZXgsCiAgICAgICAgICBwcm9wczogc2NvcGUuaXRlbVByb3BzLAogICAgICAgICAgb246IHNjb3BlLml0ZW1FdmVudHMKICAgICAgICB9LCBbaChRSXRlbVNlY3Rpb24sIFtoKFFJdGVtTGFiZWwsIHsKICAgICAgICAgIGRvbVByb3BzOiBfZGVmaW5lUHJvcGVydHkoe30sIHNjb3BlLnNhbml0aXplID09PSB0cnVlID8gJ3RleHRDb250ZW50JyA6ICdpbm5lckhUTUwnLCBfdGhpczExLmdldE9wdGlvbkxhYmVsKHNjb3BlLm9wdCkpCiAgICAgICAgfSldKV0pOwogICAgICB9OwogICAgICB2YXIgb3B0aW9uRWxzID0gdGhpcy5fX29wdGlvblNjb3BlQ2FjaGUub3B0aW9uRWxzOwoKICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLl9fcGFkVmlydHVhbFNjcm9sbChoLCAnZGl2JywgdGhpcy5vcHRpb25TY29wZS5tYXAoZnVuY3Rpb24gKHNjb3BlLCBpKSB7CiAgICAgICAgaWYgKG9wdGlvbkVsc1tpXSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICBvcHRpb25FbHNbaV0gPSBmbihzY29wZSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gb3B0aW9uRWxzW2ldOwogICAgICB9KSk7CgogICAgICBpZiAodGhpcy4kc2NvcGVkU2xvdHNbJ2JlZm9yZS1vcHRpb25zJ10gIT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB0aGlzLiRzY29wZWRTbG90c1snYmVmb3JlLW9wdGlvbnMnXSgpLmNvbmNhdChvcHRpb25zKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1lcmdlU2xvdChvcHRpb25zLCB0aGlzLCAnYWZ0ZXItb3B0aW9ucycpOwogICAgfSwKICAgIF9fZ2V0SW5uZXJBcHBlbmQ6IGZ1bmN0aW9uIF9fZ2V0SW5uZXJBcHBlbmQoaCkgewogICAgICByZXR1cm4gdGhpcy5sb2FkaW5nICE9PSB0cnVlICYmIHRoaXMuaW5uZXJMb2FkaW5nSW5kaWNhdG9yICE9PSB0cnVlICYmIHRoaXMuaGlkZURyb3Bkb3duSWNvbiAhPT0gdHJ1ZSA/IFtoKFFJY29uLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdxLXNlbGVjdF9fZHJvcGRvd24taWNvbicgKyAodGhpcy5tZW51ID09PSB0cnVlID8gJyByb3RhdGUtMTgwJyA6ICcnKSwKICAgICAgICBwcm9wczogewogICAgICAgICAgbmFtZTogdGhpcy5kcm9wZG93bkFycm93SWNvbgogICAgICAgIH0KICAgICAgfSldIDogbnVsbDsKICAgIH0sCiAgICBfX2dldElucHV0OiBmdW5jdGlvbiBfX2dldElucHV0KGgsIGZyb21EaWFsb2csIGlzVGFyZ2V0KSB7CiAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgIHJlZjogaXNUYXJnZXQgPT09IHRydWUgPyAndGFyZ2V0JyA6IHZvaWQgMCwKICAgICAgICBrZXk6ICdpX3QnLAogICAgICAgIHN0YXRpY0NsYXNzOiAncS1maWVsZF9faW5wdXQgcS1wbGFjZWhvbGRlciBjb2wnLAogICAgICAgIHN0eWxlOiB0aGlzLmlucHV0U3R5bGUsCiAgICAgICAgY2xhc3M6IHRoaXMuY29tcHV0ZWRJbnB1dENsYXNzLAogICAgICAgIGRvbVByb3BzOiB7CiAgICAgICAgICB2YWx1ZTogdGhpcy5pbnB1dFZhbHVlICE9PSB2b2lkIDAgPyB0aGlzLmlucHV0VmFsdWUgOiAnJwogICAgICAgIH0sCiAgICAgICAgYXR0cnM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAvLyByZXF1aXJlZCBmb3IgQW5kcm9pZCBpbiBvcmRlciB0byBzaG93IEVOVEVSIGtleSB3aGVuIGluIGZvcm0KICAgICAgICAgIHR5cGU6ICdzZWFyY2gnCiAgICAgICAgfSwgdGhpcy5xQXR0cnMpLCB7fSwgewogICAgICAgICAgaWQ6IHRoaXMudGFyZ2V0VWlkLAogICAgICAgICAgbWF4bGVuZ3RoOiB0aGlzLm1heGxlbmd0aCwKICAgICAgICAgIC8vIHRoaXMgaXMgY29udmVydGVkIHRvIHByb3AgYnkgUUZpZWxkCiAgICAgICAgICB0YWJpbmRleDogdGhpcy50YWJpbmRleCwKICAgICAgICAgIGF1dG9jb21wbGV0ZTogdGhpcy5hdXRvY29tcGxldGUsCiAgICAgICAgICAnZGF0YS1hdXRvZm9jdXMnOiBmcm9tRGlhbG9nID09PSB0cnVlID8gZmFsc2UgOiB0aGlzLmF1dG9mb2N1cywKICAgICAgICAgIGRpc2FibGVkOiB0aGlzLmRpc2FibGUgPT09IHRydWUsCiAgICAgICAgICByZWFkb25seTogdGhpcy5yZWFkb25seSA9PT0gdHJ1ZQogICAgICAgIH0pLAogICAgICAgIG9uOiB0aGlzLmlucHV0Q29udHJvbEV2ZW50cwogICAgICB9OwoKICAgICAgaWYgKGZyb21EaWFsb2cgIT09IHRydWUgJiYgdGhpcy5oYXNEaWFsb2cgPT09IHRydWUpIHsKICAgICAgICBvcHRpb25zLnN0YXRpY0NsYXNzICs9ICcgbm8tcG9pbnRlci1ldmVudHMnOwogICAgICB9CgogICAgICByZXR1cm4gaCgnaW5wdXQnLCBvcHRpb25zKTsKICAgIH0sCiAgICBfX29uQ2hhbmdlOiBmdW5jdGlvbiBfX29uQ2hhbmdlKGUpIHsKICAgICAgdGhpcy5fX29uQ29tcG9zaXRpb24oZSk7CiAgICB9LAogICAgX19vbklucHV0OiBmdW5jdGlvbiBfX29uSW5wdXQoZSkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICBjbGVhclRpbWVvdXQodGhpcy5pbnB1dFRpbWVyKTsKCiAgICAgIGlmIChlICYmIGUudGFyZ2V0ICYmIGUudGFyZ2V0LmNvbXBvc2luZyA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5fX3NldElucHV0VmFsdWUoZS50YXJnZXQudmFsdWUgfHwgJycpOyAvLyBtYXJrIGl0IGhlcmUgYXMgdXNlciBpbnB1dCBzbyB0aGF0IGlmIHVwZGF0ZUlucHV0VmFsdWUgaXMgY2FsbGVkCiAgICAgIC8vIGJlZm9yZSBmaWx0ZXIgaXMgY2FsbGVkIHRoZSBpbmRpY2F0b3IgaXMgcmVzZXQKCgogICAgICB0aGlzLnVzZXJJbnB1dFZhbHVlID0gdHJ1ZTsKICAgICAgdGhpcy5kZWZhdWx0SW5wdXRWYWx1ZSA9IHRoaXMuaW5wdXRWYWx1ZTsKCiAgICAgIGlmICh0aGlzLmZvY3VzZWQgIT09IHRydWUgJiYgKHRoaXMuaGFzRGlhbG9nICE9PSB0cnVlIHx8IHRoaXMuZGlhbG9nRmllbGRGb2N1c2VkID09PSB0cnVlKSkgewogICAgICAgIHRoaXMuX19mb2N1cygpOwogICAgICB9CgogICAgICBpZiAodGhpcy5xTGlzdGVuZXJzLmZpbHRlciAhPT0gdm9pZCAwKSB7CiAgICAgICAgdGhpcy5pbnB1dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczEyLmZpbHRlcihfdGhpczEyLmlucHV0VmFsdWUpOwogICAgICAgIH0sIHRoaXMuaW5wdXREZWJvdW5jZSk7CiAgICAgIH0KICAgIH0sCiAgICBfX3NldElucHV0VmFsdWU6IGZ1bmN0aW9uIF9fc2V0SW5wdXRWYWx1ZShpbnB1dFZhbHVlKSB7CiAgICAgIGlmICh0aGlzLmlucHV0VmFsdWUgIT09IGlucHV0VmFsdWUpIHsKICAgICAgICB0aGlzLmlucHV0VmFsdWUgPSBpbnB1dFZhbHVlOwogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0LXZhbHVlJywgaW5wdXRWYWx1ZSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVJbnB1dFZhbHVlOiBmdW5jdGlvbiB1cGRhdGVJbnB1dFZhbHVlKHZhbCwgbm9GaWx0ZXJpbmcsIGludGVybmFsKSB7CiAgICAgIHRoaXMudXNlcklucHV0VmFsdWUgPSBpbnRlcm5hbCAhPT0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLnVzZUlucHV0ID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5fX3NldElucHV0VmFsdWUodmFsKTsKCiAgICAgICAgaWYgKG5vRmlsdGVyaW5nID09PSB0cnVlIHx8IGludGVybmFsICE9PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLmRlZmF1bHRJbnB1dFZhbHVlID0gdmFsOwogICAgICAgIH0KCiAgICAgICAgbm9GaWx0ZXJpbmcgIT09IHRydWUgJiYgdGhpcy5maWx0ZXIodmFsKTsKICAgICAgfQogICAgfSwKICAgIGZpbHRlcjogZnVuY3Rpb24gZmlsdGVyKHZhbCwga2VlcENsb3NlZCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5xTGlzdGVuZXJzLmZpbHRlciA9PT0gdm9pZCAwIHx8IGtlZXBDbG9zZWQgIT09IHRydWUgJiYgdGhpcy5mb2N1c2VkICE9PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5pbm5lckxvYWRpbmcgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiRlbWl0KCdmaWx0ZXItYWJvcnQnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlubmVyTG9hZGluZyA9IHRydWU7CiAgICAgICAgdGhpcy5pbm5lckxvYWRpbmdJbmRpY2F0b3IgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAodmFsICE9PSAnJyAmJiB0aGlzLm11bHRpcGxlICE9PSB0cnVlICYmIHRoaXMuaW5uZXJWYWx1ZS5sZW5ndGggPiAwICYmIHRoaXMudXNlcklucHV0VmFsdWUgIT09IHRydWUgJiYgdmFsID09PSB0aGlzLmdldE9wdGlvbkxhYmVsKHRoaXMuaW5uZXJWYWx1ZVswXSkpIHsKICAgICAgICB2YWwgPSAnJzsKICAgICAgfQoKICAgICAgdmFyIGZpbHRlcklkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMy5tZW51ID09PSB0cnVlICYmIChfdGhpczEzLm1lbnUgPSBmYWxzZSk7CiAgICAgIH0sIDEwKTsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZmlsdGVySWQpOwogICAgICB0aGlzLmZpbHRlcklkID0gZmlsdGVySWQ7CiAgICAgIHRoaXMuJGVtaXQoJ2ZpbHRlcicsIHZhbCwgZnVuY3Rpb24gKGZuLCBhZnRlckZuKSB7CiAgICAgICAgaWYgKChrZWVwQ2xvc2VkID09PSB0cnVlIHx8IF90aGlzMTMuZm9jdXNlZCA9PT0gdHJ1ZSkgJiYgX3RoaXMxMy5maWx0ZXJJZCA9PT0gZmlsdGVySWQpIHsKICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpczEzLmZpbHRlcklkKTsKICAgICAgICAgIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiBmbigpOyAvLyBoaWRlIGluZGljYXRvciB0byBhbGxvdyBhcnJvdyB0byBhbmltYXRlCgogICAgICAgICAgX3RoaXMxMy5pbm5lckxvYWRpbmdJbmRpY2F0b3IgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpczEzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMTMuaW5uZXJMb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICBpZiAoX3RoaXMxMy5lZGl0YWJsZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIGlmIChrZWVwQ2xvc2VkID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBfdGhpczEzLm1lbnUgPT09IHRydWUgJiYgX3RoaXMxMy5oaWRlUG9wdXAoKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMTMubWVudSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgX3RoaXMxMy5fX3VwZGF0ZU1lbnUodHJ1ZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMTMubWVudSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB0eXBlb2YgYWZ0ZXJGbiA9PT0gJ2Z1bmN0aW9uJyAmJiBfdGhpczEzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgYWZ0ZXJGbihfdGhpczEzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXMxMy5mb2N1c2VkID09PSB0cnVlICYmIF90aGlzMTMuZmlsdGVySWQgPT09IGZpbHRlcklkKSB7CiAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMxMy5maWx0ZXJJZCk7CiAgICAgICAgICBfdGhpczEzLmlubmVyTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgX3RoaXMxMy5pbm5lckxvYWRpbmdJbmRpY2F0b3IgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIF90aGlzMTMubWVudSA9PT0gdHJ1ZSAmJiAoX3RoaXMxMy5tZW51ID0gZmFsc2UpOwogICAgICB9KTsKICAgIH0sCiAgICBfX2dldENvbnRyb2xFdmVudHM6IGZ1bmN0aW9uIF9fZ2V0Q29udHJvbEV2ZW50cygpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgdmFyIGZvY3Vzb3V0ID0gZnVuY3Rpb24gZm9jdXNvdXQoZSkgewogICAgICAgIF90aGlzMTQuX19vbkNvbnRyb2xGb2N1c291dChlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczE0Ll9fcmVzZXRJbnB1dFZhbHVlKCk7CgogICAgICAgICAgX3RoaXMxNC5fX2Nsb3NlTWVudSgpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgcmV0dXJuIHsKICAgICAgICBmb2N1c2luOiB0aGlzLl9fb25Db250cm9sRm9jdXNpbiwKICAgICAgICBmb2N1c291dDogZm9jdXNvdXQsCiAgICAgICAgJ3BvcHVwLXNob3cnOiB0aGlzLl9fb25Db250cm9sUG9wdXBTaG93LAogICAgICAgICdwb3B1cC1oaWRlJzogZnVuY3Rpb24gcG9wdXBIaWRlKGUpIHsKICAgICAgICAgIGUgIT09IHZvaWQgMCAmJiBzdG9wKGUpOwoKICAgICAgICAgIF90aGlzMTQuJGVtaXQoJ3BvcHVwLWhpZGUnLCBlKTsKCiAgICAgICAgICBfdGhpczE0Lmhhc1BvcHVwT3BlbiA9IGZhbHNlOwogICAgICAgICAgZm9jdXNvdXQoZSk7CiAgICAgICAgfSwKICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soZSkgewogICAgICAgICAgaWYgKF90aGlzMTQuaGFzRGlhbG9nICE9PSB0cnVlKSB7CiAgICAgICAgICAgIC8vIGxhYmVsIGZyb20gUUZpZWxkIHdpbGwgcHJvcGFnYXRlIGNsaWNrIG9uIHRoZSBpbnB1dCAoZXhjZXB0IElFKQogICAgICAgICAgICBwcmV2ZW50KGUpOwoKICAgICAgICAgICAgaWYgKF90aGlzMTQubWVudSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIF90aGlzMTQuX19jbG9zZU1lbnUoKTsKCiAgICAgICAgICAgICAgX3RoaXMxNC4kcmVmcy50YXJnZXQgIT09IHZvaWQgMCAmJiBfdGhpczE0LiRyZWZzLnRhcmdldC5mb2N1cygpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzMTQuc2hvd1BvcHVwKGUpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBfX2dldENvbnRyb2xDaGlsZDogZnVuY3Rpb24gX19nZXRDb250cm9sQ2hpbGQoaCkgewogICAgICBpZiAodGhpcy5lZGl0YWJsZSAhPT0gZmFsc2UgJiYgKHRoaXMuZGlhbG9nID09PSB0cnVlIHx8IC8vIGRpYWxvZyBhbHdheXMgaGFzIG1lbnUgZGlzcGxheWVkLCBzbyBuZWVkIHRvIHJlbmRlciBpdAogICAgICB0aGlzLm5vT3B0aW9ucyAhPT0gdHJ1ZSB8fCB0aGlzLiRzY29wZWRTbG90c1snbm8tb3B0aW9uJ10gIT09IHZvaWQgMCkpIHsKICAgICAgICByZXR1cm4gdGhpc1siX19nZXQiLmNvbmNhdCh0aGlzLmhhc0RpYWxvZyA9PT0gdHJ1ZSA/ICdEaWFsb2cnIDogJ01lbnUnKV0oaCk7CiAgICAgIH0KICAgIH0sCiAgICBfX2dldE1lbnU6IGZ1bmN0aW9uIF9fZ2V0TWVudShoKSB7CiAgICAgIHZhciBjaGlsZCA9IHRoaXMubm9PcHRpb25zID09PSB0cnVlID8gdGhpcy4kc2NvcGVkU2xvdHNbJ25vLW9wdGlvbiddICE9PSB2b2lkIDAgPyB0aGlzLiRzY29wZWRTbG90c1snbm8tb3B0aW9uJ10oewogICAgICAgIGlucHV0VmFsdWU6IHRoaXMuaW5wdXRWYWx1ZQogICAgICB9KSA6IG51bGwgOiB0aGlzLl9fZ2V0T3B0aW9ucyhoKTsKICAgICAgcmV0dXJuIGgoUU1lbnUsIHsKICAgICAgICByZWY6ICdtZW51JywKICAgICAgICBwcm9wczogewogICAgICAgICAgdmFsdWU6IHRoaXMubWVudSwKICAgICAgICAgIGZpdDogdGhpcy5tZW51U2hyaW5rICE9PSB0cnVlLAogICAgICAgICAgY292ZXI6IHRoaXMub3B0aW9uc0NvdmVyID09PSB0cnVlICYmIHRoaXMubm9PcHRpb25zICE9PSB0cnVlICYmIHRoaXMudXNlSW5wdXQgIT09IHRydWUsCiAgICAgICAgICBhbmNob3I6IHRoaXMubWVudUFuY2hvciwKICAgICAgICAgIHNlbGY6IHRoaXMubWVudVNlbGYsCiAgICAgICAgICBvZmZzZXQ6IHRoaXMubWVudU9mZnNldCwKICAgICAgICAgIGNvbnRlbnRDbGFzczogdGhpcy5tZW51Q29udGVudENsYXNzLAogICAgICAgICAgY29udGVudFN0eWxlOiB0aGlzLnBvcHVwQ29udGVudFN0eWxlLAogICAgICAgICAgZGFyazogdGhpcy5pc09wdGlvbnNEYXJrLAogICAgICAgICAgbm9QYXJlbnRFdmVudDogdHJ1ZSwKICAgICAgICAgIG5vUmVmb2N1czogdHJ1ZSwKICAgICAgICAgIG5vRm9jdXM6IHRydWUsCiAgICAgICAgICBzcXVhcmU6IHRoaXMuc3F1YXJlZE1lbnUsCiAgICAgICAgICB0cmFuc2l0aW9uU2hvdzogdGhpcy50cmFuc2l0aW9uU2hvdywKICAgICAgICAgIHRyYW5zaXRpb25IaWRlOiB0aGlzLnRyYW5zaXRpb25IaWRlLAogICAgICAgICAgc2VwYXJhdGVDbG9zZVBvcHVwOiB0cnVlCiAgICAgICAgfSwKICAgICAgICBvbjogY2FjaGUodGhpcywgJ21lbnUnLCB7CiAgICAgICAgICAnJnNjcm9sbCc6IHRoaXMuX19vblZpcnR1YWxTY3JvbGxFdnQsCiAgICAgICAgICAnYmVmb3JlLWhpZGUnOiB0aGlzLl9fY2xvc2VNZW51LAogICAgICAgICAgc2hvdzogdGhpcy5fX29uTWVudVNob3cKICAgICAgICB9KQogICAgICB9LCBjaGlsZCk7CiAgICB9LAogICAgX19vbk1lbnVTaG93OiBmdW5jdGlvbiBfX29uTWVudVNob3coKSB7CiAgICAgIHRoaXMuX19zZXRWaXJ0dWFsU2Nyb2xsU2l6ZSgpOwogICAgfSwKICAgIF9fb25EaWFsb2dGaWVsZEZvY3VzOiBmdW5jdGlvbiBfX29uRGlhbG9nRmllbGRGb2N1cyhlKSB7CiAgICAgIHN0b3AoZSk7CiAgICAgIHRoaXMuJHJlZnMudGFyZ2V0ICE9PSB2b2lkIDAgJiYgdGhpcy4kcmVmcy50YXJnZXQuZm9jdXMoKTsKICAgICAgdGhpcy5kaWFsb2dGaWVsZEZvY3VzZWQgPSB0cnVlOwogICAgICB3aW5kb3cuc2Nyb2xsVG8od2luZG93LnBhZ2VYT2Zmc2V0IHx8IHdpbmRvdy5zY3JvbGxYIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCB8fCAwLCAwKTsKICAgIH0sCiAgICBfX29uRGlhbG9nRmllbGRCbHVyOiBmdW5jdGlvbiBfX29uRGlhbG9nRmllbGRCbHVyKGUpIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwoKICAgICAgc3RvcChlKTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMTUuZGlhbG9nRmllbGRGb2N1c2VkID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIF9fZ2V0RGlhbG9nOiBmdW5jdGlvbiBfX2dldERpYWxvZyhoKSB7CiAgICAgIHZhciBfdGhpczE2ID0gdGhpczsKCiAgICAgIHZhciBjb250ZW50ID0gW2goUUZpZWxkLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICJjb2wtYXV0byAiLmNvbmNhdCh0aGlzLmZpZWxkQ2xhc3MpLAogICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuJHByb3BzKSwge30sIHsKICAgICAgICAgIGZvcjogdGhpcy50YXJnZXRVaWQsCiAgICAgICAgICBkYXJrOiB0aGlzLmlzT3B0aW9uc0RhcmssCiAgICAgICAgICBzcXVhcmU6IHRydWUsCiAgICAgICAgICBmaWxsZWQ6IHRydWUsCiAgICAgICAgICBpdGVtQWxpZ25lZDogZmFsc2UsCiAgICAgICAgICBsb2FkaW5nOiB0aGlzLmlubmVyTG9hZGluZ0luZGljYXRvciwKICAgICAgICAgIHN0YWNrTGFiZWw6IHRoaXMuaW5wdXRWYWx1ZS5sZW5ndGggPiAwCiAgICAgICAgfSksCiAgICAgICAgb246IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5xTGlzdGVuZXJzKSwge30sIHsKICAgICAgICAgIGZvY3VzOiB0aGlzLl9fb25EaWFsb2dGaWVsZEZvY3VzLAogICAgICAgICAgYmx1cjogdGhpcy5fX29uRGlhbG9nRmllbGRCbHVyCiAgICAgICAgfSksCiAgICAgICAgc2NvcGVkU2xvdHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy4kc2NvcGVkU2xvdHMpLCB7fSwgewogICAgICAgICAgcmF3Q29udHJvbDogZnVuY3Rpb24gcmF3Q29udHJvbCgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYuX19nZXRDb250cm9sKGgsIHRydWUpOwogICAgICAgICAgfSwKICAgICAgICAgIGJlZm9yZTogdm9pZCAwLAogICAgICAgICAgYWZ0ZXI6IHZvaWQgMAogICAgICAgIH0pCiAgICAgIH0pXTsKICAgICAgdGhpcy5tZW51ID09PSB0cnVlICYmIGNvbnRlbnQucHVzaChoKCdkaXYnLCB7CiAgICAgICAgcmVmOiAnbWVudUNvbnRlbnQnLAogICAgICAgIHN0YXRpY0NsYXNzOiAnc2Nyb2xsJywKICAgICAgICBjbGFzczogdGhpcy5tZW51Q29udGVudENsYXNzLAogICAgICAgIHN0eWxlOiB0aGlzLnBvcHVwQ29udGVudFN0eWxlLAogICAgICAgIG9uOiBjYWNoZSh0aGlzLCAndmlydE1lbnUnLCB7CiAgICAgICAgICBjbGljazogcHJldmVudCwKICAgICAgICAgICcmc2Nyb2xsJzogdGhpcy5fX29uVmlydHVhbFNjcm9sbEV2dAogICAgICAgIH0pCiAgICAgIH0sIHRoaXMubm9PcHRpb25zID09PSB0cnVlID8gdGhpcy4kc2NvcGVkU2xvdHNbJ25vLW9wdGlvbiddICE9PSB2b2lkIDAgPyB0aGlzLiRzY29wZWRTbG90c1snbm8tb3B0aW9uJ10oewogICAgICAgIGlucHV0VmFsdWU6IHRoaXMuaW5wdXRWYWx1ZQogICAgICB9KSA6IG51bGwgOiB0aGlzLl9fZ2V0T3B0aW9ucyhoKSkpOwogICAgICByZXR1cm4gaChRRGlhbG9nLCB7CiAgICAgICAgcmVmOiAnZGlhbG9nJywKICAgICAgICBwcm9wczogewogICAgICAgICAgdmFsdWU6IHRoaXMuZGlhbG9nLAogICAgICAgICAgZGFyazogdGhpcy5pc09wdGlvbnNEYXJrLAogICAgICAgICAgcG9zaXRpb246IHRoaXMudXNlSW5wdXQgPT09IHRydWUgPyAndG9wJyA6IHZvaWQgMCwKICAgICAgICAgIHRyYW5zaXRpb25TaG93OiB0aGlzLnRyYW5zaXRpb25TaG93Q29tcHV0ZWQsCiAgICAgICAgICB0cmFuc2l0aW9uSGlkZTogdGhpcy50cmFuc2l0aW9uSGlkZQogICAgICAgIH0sCiAgICAgICAgb246IGNhY2hlKHRoaXMsICdkaWFsb2cnLCB7CiAgICAgICAgICAnYmVmb3JlLWhpZGUnOiB0aGlzLl9fb25EaWFsb2dCZWZvcmVIaWRlLAogICAgICAgICAgaGlkZTogdGhpcy5fX29uRGlhbG9nSGlkZSwKICAgICAgICAgIHNob3c6IHRoaXMuX19vbkRpYWxvZ1Nob3cKICAgICAgICB9KQogICAgICB9LCBbaCgnZGl2JywgewogICAgICAgIHN0YXRpY0NsYXNzOiAncS1zZWxlY3RfX2RpYWxvZycgKyAodGhpcy5pc09wdGlvbnNEYXJrID09PSB0cnVlID8gJyBxLXNlbGVjdF9fZGlhbG9nLS1kYXJrIHEtZGFyaycgOiAnJykgKyAodGhpcy5kaWFsb2dGaWVsZEZvY3VzZWQgPT09IHRydWUgPyAnIHEtc2VsZWN0X19kaWFsb2ctLWZvY3VzZWQnIDogJycpCiAgICAgIH0sIGNvbnRlbnQpXSk7CiAgICB9LAogICAgX19vbkRpYWxvZ0JlZm9yZUhpZGU6IGZ1bmN0aW9uIF9fb25EaWFsb2dCZWZvcmVIaWRlKCkgewogICAgICB0aGlzLiRyZWZzLmRpYWxvZy5fX3JlZm9jdXNUYXJnZXQgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcucS1maWVsZF9fbmF0aXZlID4gW3RhYmluZGV4XTpsYXN0LWNoaWxkJyk7CiAgICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlOwogICAgfSwKICAgIF9fb25EaWFsb2dIaWRlOiBmdW5jdGlvbiBfX29uRGlhbG9nSGlkZShlKSB7CiAgICAgIHRoaXMuaGlkZVBvcHVwKCk7CiAgICAgIHRoaXMuZm9jdXNlZCA9PT0gZmFsc2UgJiYgdGhpcy4kZW1pdCgnYmx1cicsIGUpOwoKICAgICAgdGhpcy5fX3Jlc2V0SW5wdXRWYWx1ZSgpOwogICAgfSwKICAgIF9fb25EaWFsb2dTaG93OiBmdW5jdGlvbiBfX29uRGlhbG9nU2hvdygpIHsKICAgICAgdmFyIGVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsgLy8gSUUgY2FuIGhhdmUgbnVsbCBkb2N1bWVudC5hY3RpdmVFbGVtZW50CgogICAgICBpZiAoKGVsID09PSBudWxsIHx8IGVsLmlkICE9PSB0aGlzLnRhcmdldFVpZCkgJiYgdGhpcy4kcmVmcy50YXJnZXQgIT09IGVsICYmIHRoaXMuJHJlZnMudGFyZ2V0ICE9PSB2b2lkIDApIHsKICAgICAgICB0aGlzLiRyZWZzLnRhcmdldC5mb2N1cygpOwogICAgICB9CgogICAgICB0aGlzLl9fc2V0VmlydHVhbFNjcm9sbFNpemUoKTsKICAgIH0sCiAgICBfX2Nsb3NlTWVudTogZnVuY3Rpb24gX19jbG9zZU1lbnUoKSB7CiAgICAgIGlmICh0aGlzLl9fb3B0aW9uU2NvcGVDYWNoZSAhPT0gdm9pZCAwKSB7CiAgICAgICAgdGhpcy5fX29wdGlvblNjb3BlQ2FjaGUub3B0aW9uRWxzID0gW107CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRpYWxvZyA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5vcHRpb25JbmRleCA9IC0xOwoKICAgICAgaWYgKHRoaXMubWVudSA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMubWVudSA9IGZhbHNlOwogICAgICB9CgogICAgICBpZiAodGhpcy5mb2N1c2VkID09PSBmYWxzZSkgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZpbHRlcklkKTsKICAgICAgICB0aGlzLmZpbHRlcklkID0gdm9pZCAwOwoKICAgICAgICBpZiAodGhpcy5pbm5lckxvYWRpbmcgPT09IHRydWUpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2ZpbHRlci1hYm9ydCcpOwogICAgICAgICAgdGhpcy5pbm5lckxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuaW5uZXJMb2FkaW5nSW5kaWNhdG9yID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2hvd1BvcHVwOiBmdW5jdGlvbiBzaG93UG9wdXAoZSkgewogICAgICB2YXIgX3RoaXMxNyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5lZGl0YWJsZSAhPT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaGFzRGlhbG9nID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5fX29uQ29udHJvbEZvY3VzaW4oZSk7CgogICAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZTsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczE3Ll9fZm9jdXMoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9fZm9jdXMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucUxpc3RlbmVycy5maWx0ZXIgIT09IHZvaWQgMCkgewogICAgICAgIHRoaXMuZmlsdGVyKHRoaXMuaW5wdXRWYWx1ZSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5ub09wdGlvbnMgIT09IHRydWUgfHwgdGhpcy4kc2NvcGVkU2xvdHNbJ25vLW9wdGlvbiddICE9PSB2b2lkIDApIHsKICAgICAgICB0aGlzLm1lbnUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgaGlkZVBvcHVwOiBmdW5jdGlvbiBoaWRlUG9wdXAoKSB7CiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2U7CgogICAgICB0aGlzLl9fY2xvc2VNZW51KCk7CiAgICB9LAogICAgX19yZXNldElucHV0VmFsdWU6IGZ1bmN0aW9uIF9fcmVzZXRJbnB1dFZhbHVlKCkgewogICAgICB0aGlzLnVzZUlucHV0ID09PSB0cnVlICYmIHRoaXMudXBkYXRlSW5wdXRWYWx1ZSh0aGlzLm11bHRpcGxlICE9PSB0cnVlICYmIHRoaXMuZmlsbElucHV0ID09PSB0cnVlICYmIHRoaXMuaW5uZXJWYWx1ZS5sZW5ndGggPiAwID8gdGhpcy5nZXRPcHRpb25MYWJlbCh0aGlzLmlubmVyVmFsdWVbMF0pIHx8ICcnIDogJycsIHRydWUsIHRydWUpOwogICAgfSwKICAgIF9fdXBkYXRlTWVudTogZnVuY3Rpb24gX191cGRhdGVNZW51KHNob3cpIHsKICAgICAgdmFyIF90aGlzMTggPSB0aGlzOwoKICAgICAgdmFyIG9wdGlvbkluZGV4ID0gLTE7CgogICAgICBpZiAoc2hvdyA9PT0gdHJ1ZSkgewogICAgICAgIGlmICh0aGlzLmlubmVyVmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgICAgdmFyIHZhbCA9IHRoaXMuZ2V0T3B0aW9uVmFsdWUodGhpcy5pbm5lclZhbHVlWzBdKTsKICAgICAgICAgIG9wdGlvbkluZGV4ID0gdGhpcy5vcHRpb25zLmZpbmRJbmRleChmdW5jdGlvbiAodikgewogICAgICAgICAgICByZXR1cm4gaXNEZWVwRXF1YWwoX3RoaXMxOC5nZXRPcHRpb25WYWx1ZSh2KSwgdmFsKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5fX3Jlc2V0VmlydHVhbFNjcm9sbChvcHRpb25JbmRleCk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2V0T3B0aW9uSW5kZXgob3B0aW9uSW5kZXgpOwogICAgfSwKICAgIF9fb25QcmVSZW5kZXI6IGZ1bmN0aW9uIF9fb25QcmVSZW5kZXIoKSB7CiAgICAgIHRoaXMuaGFzRGlhbG9nID0gdGhpcy4kcS5wbGF0Zm9ybS5pcy5tb2JpbGUgIT09IHRydWUgJiYgdGhpcy5iZWhhdmlvciAhPT0gJ2RpYWxvZycgPyBmYWxzZSA6IHRoaXMuYmVoYXZpb3IgIT09ICdtZW51JyAmJiAodGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSA/IHRoaXMuJHNjb3BlZFNsb3RzWyduby1vcHRpb24nXSAhPT0gdm9pZCAwIHx8IHRoaXMucUxpc3RlbmVycy5maWx0ZXIgIT09IHZvaWQgMCB8fCB0aGlzLm5vT3B0aW9ucyA9PT0gZmFsc2UgOiB0cnVlKTsKICAgICAgdGhpcy50cmFuc2l0aW9uU2hvd0NvbXB1dGVkID0gdGhpcy5oYXNEaWFsb2cgPT09IHRydWUgJiYgdGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSAmJiB0aGlzLiRxLnBsYXRmb3JtLmlzLmlvcyA9PT0gdHJ1ZSA/ICdmYWRlJyA6IHRoaXMudHJhbnNpdGlvblNob3c7CiAgICB9LAogICAgX19vblBvc3RSZW5kZXI6IGZ1bmN0aW9uIF9fb25Qb3N0UmVuZGVyKCkgewogICAgICBpZiAodGhpcy5kaWFsb2cgPT09IGZhbHNlICYmIHRoaXMuJHJlZnMubWVudSAhPT0gdm9pZCAwKSB7CiAgICAgICAgdGhpcy4kcmVmcy5tZW51LnVwZGF0ZVBvc2l0aW9uKCk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVNZW51UG9zaXRpb246IGZ1bmN0aW9uIHVwZGF0ZU1lbnVQb3NpdGlvbigpIHsKICAgICAgdGhpcy5fX29uUG9zdFJlbmRlcigpOwogICAgfQogIH0sCiAgYmVmb3JlTW91bnQ6IGZ1bmN0aW9uIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5fX29wdGlvblNjb3BlQ2FjaGUgPSB7CiAgICAgIG9wdGlvblNsb3Q6IHRoaXMuJHNjb3BlZFNsb3RzLm9wdGlvbiwKICAgICAgb3B0aW9uczogW10sCiAgICAgIG9wdGlvbkVsczogW10KICAgIH07CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5fX29wdGlvblNjb3BlQ2FjaGUgPSB2b2lkIDA7CiAgICBjbGVhclRpbWVvdXQodGhpcy5pbnB1dFRpbWVyKTsKICB9Cn0pOw=="},{"version":3,"sources":["F:/codictation/collection/final project/codictation/codictation2.0/codictation.2.2/codictation/node_modules/quasar/src/components/select/QSelect.js"],"names":["Vue","QField","QIcon","QChip","QItem","QItemSection","QItemLabel","QMenu","QDialog","isDeepEqual","stop","prevent","stopAndPrevent","normalizeToInterval","shouldIgnoreKey","isKeyCode","mergeSlot","cache","FormFieldMixin","VirtualScroll","CompositionMixin","ListenersMixin","validateNewValueMode","v","includes","reEscapeList","extend","name","mixins","props","value","required","multiple","Boolean","displayValue","String","Number","displayValueSanitize","dropdownIcon","options","type","Array","default","optionValue","Function","optionLabel","optionDisable","hideSelected","hideDropdownIcon","fillInput","maxValues","optionsDense","optionsDark","optionsSelectedClass","optionsSanitize","optionsCover","menuShrink","menuAnchor","menuSelf","menuOffset","popupContentClass","popupContentStyle","Object","useInput","useChips","newValueMode","validator","mapOptions","emitValue","inputDebounce","inputClass","inputStyle","tabindex","autocomplete","transitionShow","transitionHide","behavior","virtualScrollItemSize","data","menu","dialog","optionIndex","inputValue","dialogFieldFocused","watch","innerValue","handler","val","innerValueCache","innerLoading","hasValue","userInputValue","__resetInputValue","filter","immediate","show","__updateMenu","computed","isOptionsDark","isDark","virtualScrollLength","isArray","length","fieldClass","computedInputClass","menuContentClass","virtualScrollHorizontal","mapNull","values","map","__getOption","noOptions","selectedString","opt","getOptionLabel","join","sanitizeFn","sanitize","displayAsText","some","computedTabindex","focused","selectedScope","i","index","selected","removeAtIndex","__removeAtIndexAndFocus","toggleOption","optionScope","virtualScrollSliceRange","from","to","__optionScopeCache","optionEls","slice","disable","isOptionDisabled","itemProps","clickable","active","activeClass","computedOptionsSelectedClass","manualFocus","dense","dark","isOptionSelected","itemEvents","click","$q","platform","is","desktop","mousemove","setOptionIndex","option","dropdownArrowIcon","iconSet","arrow","dropdown","squaredMenu","outlined","standout","borderless","rounded","color","innerOptionsValue","getOptionValue","__getPropValueFn","inputControlEvents","on","input","__onInput","change","__onChange","keydown","__onTargetKeydown","keyup","__onTargetAutocomplete","keypress","__onTargetKeypress","focus","__selectInputText","e","hasDialog","compositionstart","compositionupdate","compositionend","__onComposition","virtualScrollItemSizeComputed","methods","getEmittingOptionValue","model","$emit","splice","__focus","add","unique","updateInputValue","push","keepOpen","editable","optValue","hidePopup","$refs","target","findIndex","moveOptionSelection","offset","skipInputValue","scrollTo","__setInputValue","defaultInputValue","fn","find","propName","defaultVal","select","__onTargetKeyup","keyCode","clearTimeout","inputTimer","needle","toLocaleLowerCase","indexOf","__clearValue","newValueModeValid","qListeners","tabShouldSelect","shiftKey","__closeMenu","id","targetUid","showPopup","virtualScrollSliceSizeComputed","Math","max","min","view","optionsLength","searchBuffer","searchBufferExp","Date","now","key","altKey","ctrlKey","char","keyRepeat","searchRe","RegExp","split","l","test","$nextTick","done","mode","__getVirtualScrollEl","menuContent","__portal","$el","__getVirtualScrollTarget","__getSelection","h","$scopedSlots","scope","removable","textColor","remove","staticClass","domProps","__getControl","fromDialog","child","isTarget","__getInput","ref","attrs","nameProp","opts","qAttrs","__getOptions","optionSlot","__padVirtualScroll","concat","__getInnerAppend","loading","innerLoadingIndicator","style","class","maxlength","autofocus","disabled","readonly","composing","setTimeout","noFiltering","internal","keepClosed","filterId","afterFn","__getControlEvents","focusout","__onControlFocusout","focusin","__onControlFocusin","__onControlPopupShow","hasPopupOpen","__getControlChild","__getMenu","fit","cover","anchor","self","contentClass","contentStyle","noParentEvent","noRefocus","noFocus","square","separateClosePopup","__onVirtualScrollEvt","__onMenuShow","__setVirtualScrollSize","__onDialogFieldFocus","window","pageXOffset","scrollX","document","body","scrollLeft","__onDialogFieldBlur","__getDialog","content","$props","for","filled","itemAligned","stackLabel","blur","scopedSlots","rawControl","before","after","position","transitionShowComputed","__onDialogBeforeHide","hide","__onDialogHide","__onDialogShow","__refocusTarget","querySelector","el","activeElement","__resetVirtualScroll","__onPreRender","mobile","ios","__onPostRender","updatePosition","updateMenuPosition","beforeMount","beforeDestroy"],"mappings":"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","sourcesContent":["import Vue from 'vue'\n\nimport QField from '../field/QField.js'\nimport QIcon from '../icon/QIcon.js'\nimport QChip from '../chip/QChip.js'\n\nimport QItem from '../item/QItem.js'\nimport QItemSection from '../item/QItemSection.js'\nimport QItemLabel from '../item/QItemLabel.js'\n\nimport QMenu from '../menu/QMenu.js'\nimport QDialog from '../dialog/QDialog.js'\n\nimport { isDeepEqual } from '../../utils/is.js'\nimport { stop, prevent, stopAndPrevent } from '../../utils/event.js'\nimport { normalizeToInterval } from '../../utils/format.js'\nimport { shouldIgnoreKey, isKeyCode } from '../../utils/key-composition.js'\nimport { mergeSlot } from '../../utils/slot.js'\nimport cache from '../../utils/cache.js'\n\nimport { FormFieldMixin } from '../../mixins/form.js'\nimport VirtualScroll from '../../mixins/virtual-scroll.js'\nimport CompositionMixin from '../../mixins/composition.js'\nimport ListenersMixin from '../../mixins/listeners.js'\n\nconst validateNewValueMode = v => ['add', 'add-unique', 'toggle'].includes(v)\nconst reEscapeList = '.*+?^${}()|[]\\\\'\n\nexport default Vue.extend({\n  name: 'QSelect',\n\n  mixins: [\n    QField,\n    VirtualScroll,\n    CompositionMixin,\n    FormFieldMixin,\n    ListenersMixin\n  ],\n\n  props: {\n    value: {\n      required: true\n    },\n\n    multiple: Boolean,\n\n    displayValue: [String, Number],\n    displayValueSanitize: Boolean,\n    dropdownIcon: String,\n\n    options: {\n      type: Array,\n      default: () => []\n    },\n\n    optionValue: [Function, String],\n    optionLabel: [Function, String],\n    optionDisable: [Function, String],\n\n    hideSelected: Boolean,\n    hideDropdownIcon: Boolean,\n    fillInput: Boolean,\n\n    maxValues: [Number, String],\n\n    optionsDense: Boolean,\n    optionsDark: {\n      type: Boolean,\n      default: null\n    },\n    optionsSelectedClass: String,\n    optionsSanitize: Boolean,\n\n    optionsCover: Boolean,\n\n    menuShrink: Boolean,\n    menuAnchor: String,\n    menuSelf: String,\n    menuOffset: Array,\n\n    popupContentClass: String,\n    popupContentStyle: [String, Array, Object],\n\n    useInput: Boolean,\n    useChips: Boolean,\n\n    newValueMode: {\n      type: String,\n      validator: validateNewValueMode\n    },\n\n    mapOptions: Boolean,\n    emitValue: Boolean,\n\n    inputDebounce: {\n      type: [Number, String],\n      default: 500\n    },\n\n    inputClass: [Array, String, Object],\n    inputStyle: [Array, String, Object],\n\n    tabindex: {\n      type: [String, Number],\n      default: 0\n    },\n\n    autocomplete: String,\n\n    transitionShow: String,\n    transitionHide: String,\n\n    behavior: {\n      type: String,\n      validator: v => ['default', 'menu', 'dialog'].includes(v),\n      default: 'default'\n    },\n\n    virtualScrollItemSize: {\n      type: [ Number, String ],\n      default: void 0\n    }\n  },\n\n  data () {\n    return {\n      menu: false,\n      dialog: false,\n      optionIndex: -1,\n      inputValue: '',\n      dialogFieldFocused: false\n    }\n  },\n\n  watch: {\n    innerValue: {\n      handler (val) {\n        this.innerValueCache = val\n\n        if (\n          this.useInput === true &&\n          this.fillInput === true &&\n          this.multiple !== true &&\n          // Prevent re-entering in filter while filtering\n          // Also prevent clearing inputValue while filtering\n          this.innerLoading !== true &&\n          ((this.dialog !== true && this.menu !== true) || this.hasValue !== true)\n        ) {\n          this.userInputValue !== true && this.__resetInputValue()\n          if (this.dialog === true || this.menu === true) {\n            this.filter('')\n          }\n        }\n      },\n      immediate: true\n    },\n\n    fillInput () {\n      this.__resetInputValue()\n    },\n\n    menu (show) {\n      this.__updateMenu(show)\n    }\n  },\n\n  computed: {\n    isOptionsDark () {\n      return this.optionsDark === null\n        ? this.isDark\n        : this.optionsDark\n    },\n\n    virtualScrollLength () {\n      return Array.isArray(this.options)\n        ? this.options.length\n        : 0\n    },\n\n    fieldClass () {\n      return `q-select q-field--auto-height q-select--with${this.useInput !== true ? 'out' : ''}-input` +\n        ` q-select--with${this.useChips !== true ? 'out' : ''}-chips` +\n        ` q-select--${this.multiple === true ? 'multiple' : 'single'}`\n    },\n\n    computedInputClass () {\n      if (this.hideSelected === true || this.innerValue.length === 0) {\n        return this.inputClass\n      }\n\n      return this.inputClass === void 0\n        ? 'q-field__input--padding'\n        : [this.inputClass, 'q-field__input--padding']\n    },\n\n    menuContentClass () {\n      return (this.virtualScrollHorizontal === true ? 'q-virtual-scroll--horizontal' : '') +\n        (this.popupContentClass ? ' ' + this.popupContentClass : '')\n    },\n\n    innerValue () {\n      const\n        mapNull = this.mapOptions === true && this.multiple !== true,\n        val = this.value !== void 0 && (this.value !== null || mapNull === true)\n          ? (this.multiple === true && Array.isArray(this.value) ? this.value : [ this.value ])\n          : []\n\n      if (this.mapOptions === true && Array.isArray(this.options) === true) {\n        const cache = this.mapOptions === true && this.innerValueCache !== void 0\n          ? this.innerValueCache\n          : []\n        const values = val.map(v => this.__getOption(v, cache))\n\n        return this.value === null && mapNull === true\n          ? values.filter(v => v !== null)\n          : values\n      }\n\n      return val\n    },\n\n    noOptions () {\n      return this.virtualScrollLength === 0\n    },\n\n    selectedString () {\n      return this.innerValue\n        .map(opt => this.getOptionLabel(opt))\n        .join(', ')\n    },\n\n    sanitizeFn () {\n      return this.optionsSanitize === true\n        ? () => true\n        : opt => opt !== void 0 && opt !== null && opt.sanitize === true\n    },\n\n    displayAsText () {\n      return this.displayValueSanitize === true || (\n        this.displayValue === void 0 && (\n          this.optionsSanitize === true ||\n          this.innerValue.some(this.sanitizeFn)\n        )\n      )\n    },\n\n    computedTabindex () {\n      return this.focused === true ? this.tabindex : -1\n    },\n\n    selectedScope () {\n      return this.innerValue.map((opt, i) => ({\n        index: i,\n        opt,\n        sanitize: this.sanitizeFn(opt),\n        selected: true,\n        removeAtIndex: this.__removeAtIndexAndFocus,\n        toggleOption: this.toggleOption,\n        tabindex: this.computedTabindex\n      }))\n    },\n\n    optionScope () {\n      if (this.virtualScrollLength === 0) {\n        return []\n      }\n\n      const { from, to } = this.virtualScrollSliceRange\n      const { options, optionEls } = this.__optionScopeCache\n\n      return this.options.slice(from, to).map((opt, i) => {\n        const disable = this.isOptionDisabled(opt) === true\n        const index = from + i\n\n        const itemProps = {\n          clickable: true,\n          active: false,\n          activeClass: this.computedOptionsSelectedClass,\n          manualFocus: true,\n          focused: false,\n          disable,\n          tabindex: -1,\n          dense: this.optionsDense,\n          dark: this.isOptionsDark\n        }\n\n        if (disable !== true) {\n          this.isOptionSelected(opt) === true && (itemProps.active = true)\n          this.optionIndex === index && (itemProps.focused = true)\n        }\n\n        const itemEvents = {\n          click: () => { this.toggleOption(opt) }\n        }\n\n        if (this.$q.platform.is.desktop === true) {\n          itemEvents.mousemove = () => { this.setOptionIndex(index) }\n        }\n\n        const option = {\n          index,\n          opt,\n          sanitize: this.sanitizeFn(opt),\n          selected: itemProps.active,\n          focused: itemProps.focused,\n          toggleOption: this.toggleOption,\n          setOptionIndex: this.setOptionIndex,\n          itemProps\n        }\n\n        if (options[i] === void 0 || isDeepEqual(option, options[i]) !== true) {\n          options[i] = option\n          optionEls[i] = void 0\n        }\n\n        return {\n          ...option,\n          itemEvents\n        }\n      })\n    },\n\n    dropdownArrowIcon () {\n      return this.dropdownIcon !== void 0\n        ? this.dropdownIcon\n        : this.$q.iconSet.arrow.dropdown\n    },\n\n    squaredMenu () {\n      return this.optionsCover === false &&\n        this.outlined !== true &&\n        this.standout !== true &&\n        this.borderless !== true &&\n        this.rounded !== true\n    },\n\n    computedOptionsSelectedClass () {\n      return this.optionsSelectedClass !== void 0\n        ? this.optionsSelectedClass\n        : (this.color !== void 0 ? `text-${this.color}` : '')\n    },\n\n    innerOptionsValue () {\n      return this.innerValue.map(opt => this.getOptionValue(opt))\n    },\n\n    // returns method to get value of an option;\n    // takes into account 'option-value' prop\n    getOptionValue () {\n      return this.__getPropValueFn('optionValue', 'value')\n    },\n\n    // returns method to get label of an option;\n    // takes into account 'option-label' prop\n    getOptionLabel () {\n      return this.__getPropValueFn('optionLabel', 'label')\n    },\n\n    // returns method to tell if an option is disabled;\n    // takes into account 'option-disable' prop\n    isOptionDisabled () {\n      return this.__getPropValueFn('optionDisable', 'disable')\n    },\n\n    inputControlEvents () {\n      const on = {\n        input: this.__onInput,\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        change: this.__onChange,\n        keydown: this.__onTargetKeydown,\n        keyup: this.__onTargetAutocomplete,\n        keypress: this.__onTargetKeypress,\n        focus: this.__selectInputText,\n        click: e => {\n          this.hasDialog === true && stop(e)\n        }\n      }\n\n      on.compositionstart = on.compositionupdate = on.compositionend = this.__onComposition\n\n      return on\n    },\n\n    virtualScrollItemSizeComputed () {\n      return this.virtualScrollItemSize === void 0\n        ? (this.dense === true ? 24 : 48)\n        : this.virtualScrollItemSize\n    }\n  },\n\n  methods: {\n    getEmittingOptionValue (opt) {\n      return this.emitValue === true\n        ? this.getOptionValue(opt)\n        : opt\n    },\n\n    removeAtIndex (index) {\n      if (index > -1 && index < this.innerValue.length) {\n        if (this.multiple === true) {\n          const model = this.value.slice()\n          this.$emit('remove', { index, value: model.splice(index, 1)[0] })\n          this.$emit('input', model)\n        }\n        else {\n          this.$emit('input', null)\n        }\n      }\n    },\n\n    __removeAtIndexAndFocus (index) {\n      this.removeAtIndex(index)\n      this.__focus()\n    },\n\n    add (opt, unique) {\n      const val = this.getEmittingOptionValue(opt)\n\n      if (this.multiple !== true) {\n        this.fillInput === true && this.updateInputValue(\n          this.getOptionLabel(opt),\n          true,\n          true\n        )\n\n        this.$emit('input', val)\n        return\n      }\n\n      if (this.innerValue.length === 0) {\n        this.$emit('add', { index: 0, value: val })\n        this.$emit('input', this.multiple === true ? [ val ] : val)\n        return\n      }\n\n      if (unique === true && this.isOptionSelected(opt) === true) {\n        return\n      }\n\n      if (this.maxValues !== void 0 && this.value.length >= this.maxValues) {\n        return\n      }\n\n      const model = this.value.slice()\n\n      this.$emit('add', { index: model.length, value: val })\n      model.push(val)\n      this.$emit('input', model)\n    },\n\n    toggleOption (opt, keepOpen) {\n      if (this.editable !== true || opt === void 0 || this.isOptionDisabled(opt) === true) {\n        return\n      }\n\n      const optValue = this.getOptionValue(opt)\n\n      if (this.multiple !== true) {\n        if (keepOpen !== true) {\n          this.updateInputValue(\n            this.fillInput === true ? this.getOptionLabel(opt) : '',\n            true,\n            true\n          )\n\n          this.hidePopup()\n        }\n\n        this.$refs.target !== void 0 && this.$refs.target.focus()\n\n        if (isDeepEqual(this.getOptionValue(this.innerValue[0]), optValue) !== true) {\n          this.$emit('input', this.emitValue === true ? optValue : opt)\n        }\n        return\n      }\n\n      (this.hasDialog !== true || this.dialogFieldFocused === true) && this.__focus()\n\n      this.__selectInputText()\n\n      if (this.innerValue.length === 0) {\n        const val = this.emitValue === true ? optValue : opt\n        this.$emit('add', { index: 0, value: val })\n        this.$emit('input', this.multiple === true ? [ val ] : val)\n        return\n      }\n\n      const\n        model = this.value.slice(),\n        index = this.innerOptionsValue.findIndex(v => isDeepEqual(v, optValue))\n\n      if (index > -1) {\n        this.$emit('remove', { index, value: model.splice(index, 1)[0] })\n      }\n      else {\n        if (this.maxValues !== void 0 && model.length >= this.maxValues) {\n          return\n        }\n\n        const val = this.emitValue === true ? optValue : opt\n\n        this.$emit('add', { index: model.length, value: val })\n        model.push(val)\n      }\n\n      this.$emit('input', model)\n    },\n\n    setOptionIndex (index) {\n      if (this.$q.platform.is.desktop !== true) { return }\n\n      const val = index > -1 && index < this.virtualScrollLength\n        ? index\n        : -1\n\n      if (this.optionIndex !== val) {\n        this.optionIndex = val\n      }\n    },\n\n    moveOptionSelection (offset = 1, skipInputValue) {\n      if (this.menu === true) {\n        let index = this.optionIndex\n        do {\n          index = normalizeToInterval(\n            index + offset,\n            -1,\n            this.virtualScrollLength - 1\n          )\n        }\n        while (index !== -1 && index !== this.optionIndex && this.isOptionDisabled(this.options[index]) === true)\n\n        if (this.optionIndex !== index) {\n          this.setOptionIndex(index)\n          this.scrollTo(index)\n\n          if (skipInputValue !== true && this.useInput === true && this.fillInput === true) {\n            this.__setInputValue(index >= 0\n              ? this.getOptionLabel(this.options[index])\n              : this.defaultInputValue\n            )\n          }\n        }\n      }\n    },\n\n    __getOption (value, innerValueCache) {\n      const fn = opt => isDeepEqual(this.getOptionValue(opt), value)\n      return this.options.find(fn) || innerValueCache.find(fn) || value\n    },\n\n    __getPropValueFn (propName, defaultVal) {\n      const val = this[propName] !== void 0\n        ? this[propName]\n        : defaultVal\n\n      return typeof val === 'function'\n        ? val\n        : opt => Object(opt) === opt && val in opt\n          ? opt[val]\n          : opt\n    },\n\n    isOptionSelected (opt) {\n      const val = this.getOptionValue(opt)\n      return this.innerOptionsValue.find(v => isDeepEqual(v, val)) !== void 0\n    },\n\n    __selectInputText () {\n      if (this.useInput === true && this.$refs.target !== void 0) {\n        this.$refs.target.select()\n      }\n    },\n\n    __onTargetKeyup (e) {\n      // if ESC and we have an opened menu\n      // then stop propagation (might be caught by a QDialog\n      // and so it will also close the QDialog, which is wrong)\n      if (isKeyCode(e, 27) === true && this.menu === true) {\n        stop(e)\n        // on ESC we need to close the dialog also\n        this.hidePopup()\n        this.__resetInputValue()\n      }\n\n      this.$emit('keyup', e)\n    },\n\n    __onTargetAutocomplete (e) {\n      const { value } = e.target\n\n      if (e.keyCode !== void 0) {\n        this.__onTargetKeyup(e)\n        return\n      }\n\n      e.target.value = ''\n      clearTimeout(this.inputTimer)\n      this.__resetInputValue()\n\n      if (typeof value === 'string' && value.length > 0) {\n        const needle = value.toLocaleLowerCase()\n\n        let fn = opt => this.getOptionValue(opt).toLocaleLowerCase() === needle\n        let option = this.options.find(fn)\n\n        if (option !== void 0) {\n          if (this.innerValue.indexOf(option) === -1) {\n            this.toggleOption(option)\n          }\n          else {\n            this.hidePopup()\n          }\n        }\n        else {\n          fn = opt => this.getOptionLabel(opt).toLocaleLowerCase() === needle\n          option = this.options.find(fn)\n\n          if (option !== void 0) {\n            if (this.innerValue.indexOf(option) === -1) {\n              this.toggleOption(option)\n            }\n            else {\n              this.hidePopup()\n            }\n          }\n          else {\n            this.filter(value, true)\n          }\n        }\n      }\n      else {\n        this.__clearValue(e)\n      }\n    },\n\n    __onTargetKeypress (e) {\n      this.$emit('keypress', e)\n    },\n\n    __onTargetKeydown (e) {\n      this.$emit('keydown', e)\n\n      if (shouldIgnoreKey(e) === true) {\n        return\n      }\n\n      const newValueModeValid = this.inputValue.length > 0 &&\n        (this.newValueMode !== void 0 || this.qListeners['new-value'] !== void 0)\n      const tabShouldSelect = e.shiftKey !== true &&\n        this.multiple !== true &&\n        (this.optionIndex > -1 || newValueModeValid === true)\n\n      // escape\n      if (e.keyCode === 27) {\n        prevent(e) // prevent clearing the inputValue\n        return\n      }\n\n      // tab\n      if (e.keyCode === 9 && tabShouldSelect === false) {\n        this.__closeMenu()\n        return\n      }\n\n      if (e.target === void 0 || e.target.id !== this.targetUid) { return }\n\n      // down\n      if (\n        e.keyCode === 40 &&\n        this.innerLoading !== true &&\n        this.menu === false\n      ) {\n        stopAndPrevent(e)\n        this.showPopup()\n        return\n      }\n\n      // backspace\n      if (\n        e.keyCode === 8 &&\n        this.hideSelected !== true &&\n        this.inputValue.length === 0\n      ) {\n        if (this.multiple === true && Array.isArray(this.value)) {\n          this.removeAtIndex(this.value.length - 1)\n        }\n        else if (this.multiple !== true && this.value !== null) {\n          this.$emit('input', null)\n        }\n        return\n      }\n\n      // home, end - 36, 35\n      if (\n        (e.keyCode === 35 || e.keyCode === 36) &&\n        (typeof this.inputValue !== 'string' || this.inputValue.length === 0)\n      ) {\n        stopAndPrevent(e)\n        this.optionIndex = -1\n        this.moveOptionSelection(e.keyCode === 36 ? 1 : -1, this.multiple)\n      }\n\n      // pg up, pg down - 33, 34\n      if (\n        (e.keyCode === 33 || e.keyCode === 34) &&\n        this.virtualScrollSliceSizeComputed !== void 0\n      ) {\n        stopAndPrevent(e)\n        this.optionIndex = Math.max(\n          -1,\n          Math.min(\n            this.virtualScrollLength,\n            this.optionIndex + (e.keyCode === 33 ? -1 : 1) * this.virtualScrollSliceSizeComputed.view\n          )\n        )\n        this.moveOptionSelection(e.keyCode === 33 ? 1 : -1, this.multiple)\n      }\n\n      // up, down\n      if (e.keyCode === 38 || e.keyCode === 40) {\n        stopAndPrevent(e)\n        this.moveOptionSelection(e.keyCode === 38 ? -1 : 1, this.multiple)\n      }\n\n      const optionsLength = this.virtualScrollLength\n\n      // clear search buffer if expired\n      if (this.searchBuffer === void 0 || this.searchBufferExp < Date.now()) {\n        this.searchBuffer = ''\n      }\n\n      // keyboard search when not having use-input\n      if (\n        optionsLength > 0 &&\n        this.useInput !== true &&\n        e.key !== void 0 &&\n        e.key.length === 1 && // printable char\n        e.altKey === e.ctrlKey && // not kbd shortcut\n        (e.keyCode !== 32 || this.searchBuffer.length > 0) // space in middle of search\n      ) {\n        this.menu !== true && this.showPopup(e)\n\n        const\n          char = e.key.toLocaleLowerCase(),\n          keyRepeat = this.searchBuffer.length === 1 && this.searchBuffer[0] === char\n\n        this.searchBufferExp = Date.now() + 1500\n        if (keyRepeat === false) {\n          stopAndPrevent(e)\n          this.searchBuffer += char\n        }\n\n        const searchRe = new RegExp('^' + this.searchBuffer.split('').map(l => reEscapeList.indexOf(l) > -1 ? '\\\\' + l : l).join('.*'), 'i')\n\n        let index = this.optionIndex\n\n        if (keyRepeat === true || index < 0 || searchRe.test(this.getOptionLabel(this.options[index])) !== true) {\n          do {\n            index = normalizeToInterval(index + 1, -1, optionsLength - 1)\n          }\n          while (index !== this.optionIndex && (\n            this.isOptionDisabled(this.options[index]) === true ||\n            searchRe.test(this.getOptionLabel(this.options[index])) !== true\n          ))\n        }\n\n        if (this.optionIndex !== index) {\n          this.$nextTick(() => {\n            this.setOptionIndex(index)\n            this.scrollTo(index)\n\n            if (index >= 0 && this.useInput === true && this.fillInput === true) {\n              this.__setInputValue(this.getOptionLabel(this.options[index]))\n            }\n          })\n        }\n\n        return\n      }\n\n      // enter, space (when not using use-input and not in search), or tab (when not using multiple and option selected)\n      // same target is checked above\n      if (\n        e.keyCode !== 13 &&\n        (e.keyCode !== 32 || this.useInput === true || this.searchBuffer !== '') &&\n        (e.keyCode !== 9 || tabShouldSelect === false)\n      ) { return }\n\n      e.keyCode !== 9 && stopAndPrevent(e)\n\n      if (this.optionIndex > -1 && this.optionIndex < optionsLength) {\n        this.toggleOption(this.options[this.optionIndex])\n        return\n      }\n\n      if (newValueModeValid === true) {\n        const done = (val, mode) => {\n          if (mode) {\n            if (validateNewValueMode(mode) !== true) {\n              return\n            }\n          }\n          else {\n            mode = this.newValueMode\n          }\n\n          if (val === void 0 || val === null) {\n            return\n          }\n\n          this.updateInputValue('', this.multiple !== true, true)\n\n          this[mode === 'toggle' ? 'toggleOption' : 'add'](\n            val,\n            mode === 'add-unique'\n          )\n\n          if (this.multiple !== true) {\n            this.$refs.target !== void 0 && this.$refs.target.focus()\n            this.hidePopup()\n          }\n        }\n\n        if (this.qListeners['new-value'] !== void 0) {\n          this.$emit('new-value', this.inputValue, done)\n        }\n        else {\n          done(this.inputValue)\n        }\n\n        if (this.multiple !== true) {\n          return\n        }\n      }\n\n      if (this.menu === true) {\n        this.__closeMenu()\n      }\n      else if (this.innerLoading !== true) {\n        this.showPopup()\n      }\n    },\n\n    __getVirtualScrollEl () {\n      return this.hasDialog === true\n        ? this.$refs.menuContent\n        : (\n          this.$refs.menu !== void 0 && this.$refs.menu.__portal !== void 0\n            ? this.$refs.menu.__portal.$el\n            : void 0\n        )\n    },\n\n    __getVirtualScrollTarget () {\n      return this.__getVirtualScrollEl()\n    },\n\n    __getSelection (h) {\n      if (this.hideSelected === true) {\n        return []\n      }\n\n      if (this.$scopedSlots['selected-item'] !== void 0) {\n        return this.selectedScope.map(scope => this.$scopedSlots['selected-item'](scope)).slice()\n      }\n\n      if (this.$scopedSlots.selected !== void 0) {\n        return this.$scopedSlots.selected().slice()\n      }\n\n      if (this.useChips === true) {\n        return this.selectedScope.map((scope, i) => h(QChip, {\n          key: 'option-' + i,\n          props: {\n            removable: this.editable === true && this.isOptionDisabled(scope.opt) !== true,\n            dense: true,\n            textColor: this.color,\n            tabindex: this.computedTabindex\n          },\n          on: cache(this, 'rem#' + i, {\n            remove () { scope.removeAtIndex(i) }\n          })\n        }, [\n          h('span', {\n            staticClass: 'ellipsis',\n            domProps: {\n              [scope.sanitize === true ? 'textContent' : 'innerHTML']: this.getOptionLabel(scope.opt)\n            }\n          })\n        ]))\n      }\n\n      return [\n        h('span', {\n          domProps: {\n            [this.displayAsText ? 'textContent' : 'innerHTML']: this.displayValue !== void 0\n              ? this.displayValue\n              : this.selectedString\n          }\n        })\n      ]\n    },\n\n    __getControl (h, fromDialog) {\n      const child = this.__getSelection(h)\n      const isTarget = fromDialog === true || this.dialog !== true || this.hasDialog !== true\n\n      if (this.useInput === true) {\n        child.push(this.__getInput(h, fromDialog, isTarget))\n      }\n      // there can be only one (when dialog is opened the control in dialog should be target)\n      else if (this.editable === true && isTarget === true) {\n        child.push(\n          h('div', {\n            ref: 'target',\n            key: 'd_t',\n            staticClass: 'no-outline',\n            attrs: {\n              id: this.targetUid,\n              tabindex: this.tabindex\n            },\n            on: cache(this, 'f-tget', {\n              keydown: this.__onTargetKeydown,\n              keyup: this.__onTargetKeyup,\n              keypress: this.__onTargetKeypress\n            })\n          })\n        )\n\n        if (typeof this.autocomplete === 'string' && this.autocomplete.length > 0) {\n          child.push(\n            h('input', {\n              staticClass: 'q-select__autocomplete-input no-outline',\n              attrs: { autocomplete: this.autocomplete },\n              on: cache(this, 'autoinp', {\n                keyup: this.__onTargetAutocomplete\n              })\n            })\n          )\n        }\n      }\n\n      if (this.nameProp !== void 0 && this.disable !== true && this.innerOptionsValue.length > 0) {\n        const opts = this.innerOptionsValue.map(value => h('option', {\n          attrs: { value, selected: true }\n        }))\n\n        child.push(\n          h('select', {\n            staticClass: 'hidden',\n            attrs: {\n              name: this.nameProp,\n              multiple: this.multiple\n            }\n          }, opts)\n        )\n      }\n\n      return h('div', { staticClass: 'q-field__native row items-center', attrs: this.qAttrs }, child)\n    },\n\n    __getOptions (h) {\n      if (this.menu !== true) {\n        return void 0\n      }\n\n      if (\n        this.$scopedSlots.option !== void 0 &&\n        this.__optionScopeCache.optionSlot !== this.$scopedSlots.option\n      ) {\n        this.__optionScopeCache.optionSlot = this.$scopedSlots.option\n        this.__optionScopeCache.optionEls = []\n      }\n\n      const fn = this.$scopedSlots.option !== void 0\n        ? this.$scopedSlots.option\n        : scope => h(QItem, {\n          key: scope.index,\n          props: scope.itemProps,\n          on: scope.itemEvents\n        }, [\n          h(QItemSection, [\n            h(QItemLabel, {\n              domProps: {\n                [scope.sanitize === true ? 'textContent' : 'innerHTML']: this.getOptionLabel(scope.opt)\n              }\n            })\n          ])\n        ])\n\n      const { optionEls } = this.__optionScopeCache\n\n      let options = this.__padVirtualScroll(h, 'div', this.optionScope.map((scope, i) => {\n        if (optionEls[i] === void 0) {\n          optionEls[i] = fn(scope)\n        }\n\n        return optionEls[i]\n      }))\n\n      if (this.$scopedSlots['before-options'] !== void 0) {\n        options = this.$scopedSlots['before-options']().concat(options)\n      }\n\n      return mergeSlot(options, this, 'after-options')\n    },\n\n    __getInnerAppend (h) {\n      return this.loading !== true && this.innerLoadingIndicator !== true && this.hideDropdownIcon !== true\n        ? [\n          h(QIcon, {\n            staticClass: 'q-select__dropdown-icon' + (this.menu === true ? ' rotate-180' : ''),\n            props: { name: this.dropdownArrowIcon }\n          })\n        ]\n        : null\n    },\n\n    __getInput (h, fromDialog, isTarget) {\n      const options = {\n        ref: isTarget === true ? 'target' : void 0,\n        key: 'i_t',\n        staticClass: 'q-field__input q-placeholder col',\n        style: this.inputStyle,\n        class: this.computedInputClass,\n        domProps: { value: this.inputValue !== void 0 ? this.inputValue : '' },\n        attrs: {\n          // required for Android in order to show ENTER key when in form\n          type: 'search',\n          ...this.qAttrs,\n          id: this.targetUid,\n          maxlength: this.maxlength, // this is converted to prop by QField\n          tabindex: this.tabindex,\n          autocomplete: this.autocomplete,\n          'data-autofocus': fromDialog === true ? false : this.autofocus,\n          disabled: this.disable === true,\n          readonly: this.readonly === true\n        },\n        on: this.inputControlEvents\n      }\n\n      if (fromDialog !== true && this.hasDialog === true) {\n        options.staticClass += ' no-pointer-events'\n      }\n\n      return h('input', options)\n    },\n\n    __onChange (e) {\n      this.__onComposition(e)\n    },\n\n    __onInput (e) {\n      clearTimeout(this.inputTimer)\n\n      if (e && e.target && e.target.composing === true) {\n        return\n      }\n\n      this.__setInputValue(e.target.value || '')\n      // mark it here as user input so that if updateInputValue is called\n      // before filter is called the indicator is reset\n      this.userInputValue = true\n      this.defaultInputValue = this.inputValue\n\n      if (\n        this.focused !== true &&\n        (this.hasDialog !== true || this.dialogFieldFocused === true)\n      ) {\n        this.__focus()\n      }\n\n      if (this.qListeners.filter !== void 0) {\n        this.inputTimer = setTimeout(() => {\n          this.filter(this.inputValue)\n        }, this.inputDebounce)\n      }\n    },\n\n    __setInputValue (inputValue) {\n      if (this.inputValue !== inputValue) {\n        this.inputValue = inputValue\n        this.$emit('input-value', inputValue)\n      }\n    },\n\n    updateInputValue (val, noFiltering, internal) {\n      this.userInputValue = internal !== true\n\n      if (this.useInput === true) {\n        this.__setInputValue(val)\n\n        if (noFiltering === true || internal !== true) {\n          this.defaultInputValue = val\n        }\n\n        noFiltering !== true && this.filter(val)\n      }\n    },\n\n    filter (val, keepClosed) {\n      if (this.qListeners.filter === void 0 || (keepClosed !== true && this.focused !== true)) {\n        return\n      }\n\n      if (this.innerLoading === true) {\n        this.$emit('filter-abort')\n      }\n      else {\n        this.innerLoading = true\n        this.innerLoadingIndicator = true\n      }\n\n      if (\n        val !== '' &&\n        this.multiple !== true &&\n        this.innerValue.length > 0 &&\n        this.userInputValue !== true &&\n        val === this.getOptionLabel(this.innerValue[0])\n      ) {\n        val = ''\n      }\n\n      const filterId = setTimeout(() => {\n        this.menu === true && (this.menu = false)\n      }, 10)\n      clearTimeout(this.filterId)\n      this.filterId = filterId\n\n      this.$emit(\n        'filter',\n        val,\n        (fn, afterFn) => {\n          if ((keepClosed === true || this.focused === true) && this.filterId === filterId) {\n            clearTimeout(this.filterId)\n\n            typeof fn === 'function' && fn()\n\n            // hide indicator to allow arrow to animate\n            this.innerLoadingIndicator = false\n\n            this.$nextTick(() => {\n              this.innerLoading = false\n\n              if (this.editable === true) {\n                if (keepClosed === true) {\n                  this.menu === true && this.hidePopup()\n                }\n                else if (this.menu === true) {\n                  this.__updateMenu(true)\n                }\n                else {\n                  this.menu = true\n                }\n              }\n\n              typeof afterFn === 'function' && this.$nextTick(() => { afterFn(this) })\n            })\n          }\n        },\n        () => {\n          if (this.focused === true && this.filterId === filterId) {\n            clearTimeout(this.filterId)\n            this.innerLoading = false\n            this.innerLoadingIndicator = false\n          }\n          this.menu === true && (this.menu = false)\n        }\n      )\n    },\n\n    __getControlEvents () {\n      const focusout = e => {\n        this.__onControlFocusout(e, () => {\n          this.__resetInputValue()\n          this.__closeMenu()\n        })\n      }\n\n      return {\n        focusin: this.__onControlFocusin,\n        focusout,\n        'popup-show': this.__onControlPopupShow,\n        'popup-hide': e => {\n          e !== void 0 && stop(e)\n          this.$emit('popup-hide', e)\n          this.hasPopupOpen = false\n          focusout(e)\n        },\n        click: e => {\n          if (this.hasDialog !== true) {\n            // label from QField will propagate click on the input (except IE)\n            prevent(e)\n\n            if (this.menu === true) {\n              this.__closeMenu()\n              this.$refs.target !== void 0 && this.$refs.target.focus()\n              return\n            }\n          }\n\n          this.showPopup(e)\n        }\n      }\n    },\n\n    __getControlChild (h) {\n      if (\n        this.editable !== false && (\n          this.dialog === true || // dialog always has menu displayed, so need to render it\n          this.noOptions !== true ||\n          this.$scopedSlots['no-option'] !== void 0\n        )\n      ) {\n        return this[`__get${this.hasDialog === true ? 'Dialog' : 'Menu'}`](h)\n      }\n    },\n\n    __getMenu (h) {\n      const child = this.noOptions === true\n        ? (\n          this.$scopedSlots['no-option'] !== void 0\n            ? this.$scopedSlots['no-option']({ inputValue: this.inputValue })\n            : null\n        )\n        : this.__getOptions(h)\n\n      return h(QMenu, {\n        ref: 'menu',\n        props: {\n          value: this.menu,\n          fit: this.menuShrink !== true,\n          cover: this.optionsCover === true && this.noOptions !== true && this.useInput !== true,\n          anchor: this.menuAnchor,\n          self: this.menuSelf,\n          offset: this.menuOffset,\n          contentClass: this.menuContentClass,\n          contentStyle: this.popupContentStyle,\n          dark: this.isOptionsDark,\n          noParentEvent: true,\n          noRefocus: true,\n          noFocus: true,\n          square: this.squaredMenu,\n          transitionShow: this.transitionShow,\n          transitionHide: this.transitionHide,\n          separateClosePopup: true\n        },\n        on: cache(this, 'menu', {\n          '&scroll': this.__onVirtualScrollEvt,\n          'before-hide': this.__closeMenu,\n          show: this.__onMenuShow\n        })\n      }, child)\n    },\n\n    __onMenuShow () {\n      this.__setVirtualScrollSize()\n    },\n\n    __onDialogFieldFocus (e) {\n      stop(e)\n      this.$refs.target !== void 0 && this.$refs.target.focus()\n      this.dialogFieldFocused = true\n      window.scrollTo(window.pageXOffset || window.scrollX || document.body.scrollLeft || 0, 0)\n    },\n\n    __onDialogFieldBlur (e) {\n      stop(e)\n      this.$nextTick(() => {\n        this.dialogFieldFocused = false\n      })\n    },\n\n    __getDialog (h) {\n      const content = [\n        h(QField, {\n          staticClass: `col-auto ${this.fieldClass}`,\n          props: {\n            ...this.$props,\n            for: this.targetUid,\n            dark: this.isOptionsDark,\n            square: true,\n            filled: true,\n            itemAligned: false,\n            loading: this.innerLoadingIndicator,\n            stackLabel: this.inputValue.length > 0\n          },\n          on: {\n            ...this.qListeners,\n            focus: this.__onDialogFieldFocus,\n            blur: this.__onDialogFieldBlur\n          },\n          scopedSlots: {\n            ...this.$scopedSlots,\n            rawControl: () => this.__getControl(h, true),\n            before: void 0,\n            after: void 0\n          }\n        })\n      ]\n\n      this.menu === true && content.push(\n        h('div', {\n          ref: 'menuContent',\n          staticClass: 'scroll',\n          class: this.menuContentClass,\n          style: this.popupContentStyle,\n          on: cache(this, 'virtMenu', {\n            click: prevent,\n            '&scroll': this.__onVirtualScrollEvt\n          })\n        }, (\n          this.noOptions === true\n            ? (\n              this.$scopedSlots['no-option'] !== void 0\n                ? this.$scopedSlots['no-option']({ inputValue: this.inputValue })\n                : null\n            )\n            : this.__getOptions(h)\n        ))\n      )\n\n      return h(QDialog, {\n        ref: 'dialog',\n        props: {\n          value: this.dialog,\n          dark: this.isOptionsDark,\n          position: this.useInput === true ? 'top' : void 0,\n          transitionShow: this.transitionShowComputed,\n          transitionHide: this.transitionHide\n        },\n        on: cache(this, 'dialog', {\n          'before-hide': this.__onDialogBeforeHide,\n          hide: this.__onDialogHide,\n          show: this.__onDialogShow\n        })\n      }, [\n        h('div', {\n          staticClass: 'q-select__dialog' +\n            (this.isOptionsDark === true ? ' q-select__dialog--dark q-dark' : '') +\n            (this.dialogFieldFocused === true ? ' q-select__dialog--focused' : '')\n        }, content)\n      ])\n    },\n\n    __onDialogBeforeHide () {\n      this.$refs.dialog.__refocusTarget = this.$el.querySelector('.q-field__native > [tabindex]:last-child')\n      this.focused = false\n    },\n\n    __onDialogHide (e) {\n      this.hidePopup()\n      this.focused === false && this.$emit('blur', e)\n      this.__resetInputValue()\n    },\n\n    __onDialogShow () {\n      const el = document.activeElement\n      // IE can have null document.activeElement\n      if (\n        (el === null || el.id !== this.targetUid) &&\n        this.$refs.target !== el &&\n        this.$refs.target !== void 0\n      ) {\n        this.$refs.target.focus()\n      }\n\n      this.__setVirtualScrollSize()\n    },\n\n    __closeMenu () {\n      if (this.__optionScopeCache !== void 0) {\n        this.__optionScopeCache.optionEls = []\n      }\n\n      if (this.dialog === true) {\n        return\n      }\n\n      this.optionIndex = -1\n\n      if (this.menu === true) {\n        this.menu = false\n      }\n\n      if (this.focused === false) {\n        clearTimeout(this.filterId)\n        this.filterId = void 0\n\n        if (this.innerLoading === true) {\n          this.$emit('filter-abort')\n          this.innerLoading = false\n          this.innerLoadingIndicator = false\n        }\n      }\n    },\n\n    showPopup (e) {\n      if (this.editable !== true) {\n        return\n      }\n\n      if (this.hasDialog === true) {\n        this.__onControlFocusin(e)\n        this.dialog = true\n        this.$nextTick(() => {\n          this.__focus()\n        })\n      }\n      else {\n        this.__focus()\n      }\n\n      if (this.qListeners.filter !== void 0) {\n        this.filter(this.inputValue)\n      }\n      else if (this.noOptions !== true || this.$scopedSlots['no-option'] !== void 0) {\n        this.menu = true\n      }\n    },\n\n    hidePopup () {\n      this.dialog = false\n      this.__closeMenu()\n    },\n\n    __resetInputValue () {\n      this.useInput === true && this.updateInputValue(\n        this.multiple !== true && this.fillInput === true && this.innerValue.length > 0\n          ? this.getOptionLabel(this.innerValue[0]) || ''\n          : '',\n        true,\n        true\n      )\n    },\n\n    __updateMenu (show) {\n      let optionIndex = -1\n\n      if (show === true) {\n        if (this.innerValue.length > 0) {\n          const val = this.getOptionValue(this.innerValue[0])\n          optionIndex = this.options.findIndex(v => isDeepEqual(this.getOptionValue(v), val))\n        }\n\n        this.__resetVirtualScroll(optionIndex)\n      }\n\n      this.setOptionIndex(optionIndex)\n    },\n\n    __onPreRender () {\n      this.hasDialog = this.$q.platform.is.mobile !== true && this.behavior !== 'dialog'\n        ? false\n        : this.behavior !== 'menu' && (\n          this.useInput === true\n            ? this.$scopedSlots['no-option'] !== void 0 || this.qListeners.filter !== void 0 || this.noOptions === false\n            : true\n        )\n\n      this.transitionShowComputed = this.hasDialog === true && this.useInput === true && this.$q.platform.is.ios === true\n        ? 'fade'\n        : this.transitionShow\n    },\n\n    __onPostRender () {\n      if (this.dialog === false && this.$refs.menu !== void 0) {\n        this.$refs.menu.updatePosition()\n      }\n    },\n\n    updateMenuPosition () {\n      this.__onPostRender()\n    }\n  },\n\n  beforeMount () {\n    this.__optionScopeCache = {\n      optionSlot: this.$scopedSlots.option,\n      options: [],\n      optionEls: []\n    }\n  },\n\n  beforeDestroy () {\n    this.__optionScopeCache = void 0\n    clearTimeout(this.inputTimer)\n  }\n})\n"]}]}