{"remainingRequest":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\babel-loader\\lib\\index.js!F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.transform-quasar-imports.js!F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.auto-import.js?kebab!F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-1!F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\src\\components\\profile\\mycomments.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\src\\components\\profile\\mycomments.vue","mtime":1618040466531},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.transform-quasar-imports.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.auto-import.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.8\\codictation\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAiIiwKICAgICAgLy/lvZPliY3nlKjmiLfnmoTnlKjmiLflkI0KICAgICAgdXNlcklkOiAiIiwKICAgICAgLy/lvZPliY3nlKjmiLfnmoRfaWQgIOWPr+agueaNrui/meS4pOS4quS/oeaBr+WOu+aVsOaNruW6k1VzZXLlj5bmlbDmja4KICAgICAgYXBpOiAiL2FwaSIsCiAgICAgIGNvbW1lbnRMaXN0OiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOi/m+WFpeWIsOS7u+WKoeivpuaDhemhtemdogogICAgaW50b1Rhc2s6IGZ1bmN0aW9uIGludG9UYXNrKGluZGV4KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZGlmZklkID0gdGhpcy5jb21tZW50TGlzdFtpbmRleF0udGFza0lkOyAvL+S7u+WKoV9pZAoKICAgICAgdmFyIHBhdGggPSAiL2RpZmYvIiArIGRpZmZJZDsKICAgICAgdGhpcy4kYXhpb3MuZ2V0KHRoaXMuYXBpICsgIi9jdXJyZW50VGFzaz9faWQ9IiArIGRpZmZJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICBfdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICBtZXNzYWdlOiAiVGhlIHRhc2sgaGFzIGJlZW4gZGVsZXRlZC4iLAogICAgICAgICAgICBwb3NpdGlvbjogInRvcC1yaWdodCIsCiAgICAgICAgICAgIG9mZnNldDogMTAwCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHBhdGgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdGhpcy5uYW1lID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlck5hbWUiKTsKICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSk7CiAgICB0aGlzLiRheGlvcy5nZXQodGhpcy5hcGkgKyAiL3Byb2ZpbGU/bmFtZT0iICsgdGhpcy5uYW1lKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMyLnVzZXJJZCA9IHJlcy5kYXRhWzBdLl9pZDsgLy/mib7lnLDmlrnkv53lrZgKCiAgICAgIHZhciBteUNvbW1lbnRzID0gcmVzLmRhdGFbMF0ubXlDb21tZW50czsgLy8g5LuO5pWw5o2u5bqT5Lit6I635Y+W4oCcbXlDb21tZW50c+KAneWvueixoeaVsOe7hAoKICAgICAgY29uc29sZS5sb2coIm15Q29tbWVudHMiLCBteUNvbW1lbnRzKTsgLy8g5qC55o2u55u45ZCM55qEdGFza1RpdGxl77yM5ZCI5bm24oCcbXlDb21tZW50c+KAneaVsOe7hO+8jOW9ouaIkOaWsOaVsOe7hOKAnGNvbW1lbnRMaXN04oCdCgogICAgICB2YXIgY29tbWVudHNJbmZvID0ge307CiAgICAgIG15Q29tbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHZhciB0YXNrVGl0bGUgPSBpdGVtLnRhc2tUaXRsZTsKCiAgICAgICAgaWYgKCFjb21tZW50c0luZm9bdGFza1RpdGxlXSkgewogICAgICAgICAgY29tbWVudHNJbmZvW3Rhc2tUaXRsZV0gPSB7CiAgICAgICAgICAgIHRhc2tUaXRsZTogdGFza1RpdGxlLAogICAgICAgICAgICB0YXNrUHVibGlzaGVyOiBpdGVtLnRhc2tQdWJsaXNoZXIsCiAgICAgICAgICAgIHRhc2tJZDogaXRlbS50YXNrSWQsCiAgICAgICAgICAgIGNoaWxkOiBbXQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGNvbW1lbnRzSW5mb1t0YXNrVGl0bGVdLmNoaWxkLnB1c2goewogICAgICAgICAgY29tbWVudDogaXRlbS5jb21tZW50LAogICAgICAgICAgdGltZTogaXRlbS50aW1lLAogICAgICAgICAgcmVwbGllczogaXRlbS5yZXBseQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgX3RoaXMyLmNvbW1lbnRMaXN0ID0gT2JqZWN0LnZhbHVlcyhjb21tZW50c0luZm8pOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["mycomments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AACA;AACA,MAAA,MAAA,EAAA,EAFA;AAEA;AACA,MAAA,GAAA,EAAA,MAHA;AAIA,MAAA,WAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,QAFA,oBAEA,KAFA,EAEA;AAAA;;AACA,UAAA,MAAA,GAAA,KAAA,WAAA,CAAA,KAAA,EAAA,MAAA,CADA,CACA;;AACA,UAAA,IAAA,GAAA,WAAA,MAAA;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,KAAA,GAAA,GAAA,mBAAA,GAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,EAAA,4BAFA;AAGA,YAAA,QAAA,EAAA,WAHA;AAIA,YAAA,MAAA,EAAA;AAJA,WAAA;AAMA,SAPA,MAOA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,OAXA;AAYA;AAjBA,GATA;AA4BA,EAAA,OA5BA,qBA4BA;AAAA;;AACA,SAAA,IAAA,GAAA,cAAA,CAAA,OAAA,CAAA,UAAA,CAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,KAAA,IAAA;AACA,SAAA,MAAA,CAAA,GAAA,CAAA,KAAA,GAAA,GAAA,gBAAA,GAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,GAAA,CADA,CACA;;AACA,UAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,UAAA,CAFA,CAEA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,YAAA,EAAA,UAAA,EAHA,CAKA;;AACA,UAAA,YAAA,GAAA,EAAA;AACA,MAAA,UAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AAAA,YACA,SADA,GACA,IADA,CACA,SADA;;AAEA,YAAA,CAAA,YAAA,CAAA,SAAA,CAAA,EAAA;AACA,UAAA,YAAA,CAAA,SAAA,CAAA,GAAA;AACA,YAAA,SAAA,EAAA,SADA;AAEA,YAAA,aAAA,EAAA,IAAA,CAAA,aAFA;AAGA,YAAA,MAAA,EAAA,IAAA,CAAA,MAHA;AAIA,YAAA,KAAA,EAAA;AAJA,WAAA;AAMA;;AACA,QAAA,YAAA,CAAA,SAAA,CAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,UAAA,OAAA,EAAA,IAAA,CAAA,OADA;AAEA,UAAA,IAAA,EAAA,IAAA,CAAA,IAFA;AAGA,UAAA,OAAA,EAAA,IAAA,CAAA;AAHA,SAAA;AAKA,OAfA;AAgBA,MAAA,MAAA,CAAA,WAAA,GAAA,MAAA,CAAA,MAAA,CAAA,YAAA,CAAA;AACA,KAxBA;AAyBA;AAxDA,CAAA","sourcesContent":["<template>\n<q-page class=\"q-pa-md\">\n    <h3 class=\"q-my-md\">Comments</h3>\n    <q-separator insert style=\"width: 55%\" />\n    <div v-if=\"commentList.length > 0\" class=\"q-pa-md\" style=\"max-width: 85%\">\n        <q-list v-for=\"(item, index) in commentList\" :key=\"index\" v-model=\"commentList\">\n            <q-expansion-item popup default-opened :caption=\"item.taskPublisher\" :content-inset-level=\"0.5\">\n                <template v-slot:header>\n                    <q-item-section avatar>\n                        <q-avatar icon=\"assignment\" color=\"primary\" text-color=\"white\" />\n                    </q-item-section>\n\n                    <q-item-section>\n                        {{ item.taskTitle }}\n                        <span class=\"text-grey text-caption\">By {{ item.taskPublisher }}</span>\n                    </q-item-section>\n\n                    <q-item-section side>\n                        <div class=\"row items-center\">\n                            <q-btn flat color=\"pink-4\" label=\"View Details\" @click=\"intoTask(index)\"/>\n                        </div>\n                    </q-item-section>\n                </template>\n                <q-separator />\n                <q-card v-for=\"(subItem, i) in item.child\" :key=\"i\">\n                    <q-card-section class=\"row\">\n                        <q-item-section side>\n                            <q-icon name=\"comment\" class=\"text-purple\" style=\"font-size: 1.35em\" />\n                        </q-item-section>\n                        <q-item-section class=\"comment-box\">\n                            {{ subItem.comment }}\n                        </q-item-section>\n                        <q-item-section side>\n                            {{ subItem.time }}\n                        </q-item-section>\n                    </q-card-section>\n                    <div v-if=\"subItem.replies.length > 0\">\n                        <q-expansion-item expand-separator icon=\"reply_all\" :content-inset-level=\"0.5\" label=\"View All Replies\" header-class=\"text-grey-6\">\n                            <q-separator />\n                            <q-card  v-for=\"(repItem, key) in subItem.replies\" :key=\"key\">\n                                <q-card-section class=\"row\">\n                                    <q-item-section side>\n                                        <q-icon name=\"question_answer\" class=\"text-purple\" style=\"font-size: 1.35em\" />\n                                    </q-item-section>\n                                    <q-item-section class=\"comment-box\">\n                                        <span><em class=\"text-bold\">{{ repItem.responder }}</em> --- {{ repItem.comment }}</span>\n                                    </q-item-section>\n                                    <q-item-section side>\n                                        {{ repItem.time }}\n                                    </q-item-section>\n                                </q-card-section>\n                            </q-card>\n                        </q-expansion-item>\n                    </div>\n                    <q-separator />\n                </q-card>\n            </q-expansion-item>\n        </q-list>\n    </div>\n    <div v-else>No comment yet...</div>\n</q-page>\n</template>\n\n<script>\n\nexport default {\n    data() {\n        return {\n            name: \"\", //当前用户的用户名\n            userId: \"\", //当前用户的_id  可根据这两个信息去数据库User取数据\n            api: \"/api\",\n            commentList: [],\n        }\n    },\n    methods: {\n        // 进入到任务详情页面\n        intoTask(index) {\n            var diffId = this.commentList[index].taskId; //任务_id\n            var path = \"/diff/\" + diffId;\n            this.$axios.get(this.api + \"/currentTask?_id=\" + diffId).then((res) => {\n                if (res.data.length == 0) {\n                this.$notify({\n                    type: \"warning\",\n                    message: \"The task has been deleted.\",\n                    position: \"top-right\",\n                    offset: 100,\n                });\n                } else {\n                this.$router.push(path);\n                }\n            });\n        },\n    },\n    created() {\n        this.name = sessionStorage.getItem(\"userName\");\n        console.log(this.name);\n        this.$axios.get(this.api + \"/profile?name=\" + this.name).then((res) => {\n            this.userId = res.data[0]._id; //找地方保存\n            var myComments = res.data[0].myComments // 从数据库中获取“myComments”对象数组\n            console.log(\"myComments\", myComments);\n\n            // 根据相同的taskTitle，合并“myComments”数组，形成新数组“commentList”\n            var commentsInfo = {};\n            myComments.forEach((item) => {\n                var { taskTitle } = item;\n                if (!commentsInfo[taskTitle]) {\n                    commentsInfo[taskTitle] = {\n                        taskTitle,\n                        taskPublisher: item.taskPublisher,\n                        taskId: item.taskId,\n                        child: []\n                    }\n                }\n                commentsInfo[taskTitle].child.push({\n                    comment: item.comment,\n                    time: item.time,\n                    replies: item.reply,\n                });\n            });\n            this.commentList = Object.values(commentsInfo);\n        });\n    },\n}\n</script>\n\n<style>\n.comment-box {\n    justify-content: flex-start;\n}\n.q-item__section.column.q-item__section--main.justify-center {\n    flex-direction: column;\n}\n</style>\n"],"sourceRoot":"src/components/profile"}]}