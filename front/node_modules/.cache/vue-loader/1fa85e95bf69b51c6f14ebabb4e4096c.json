{"remainingRequest":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\src\\components\\profile\\published.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\src\\components\\profile\\published.vue","mtime":1616062563693},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.transform-quasar-imports.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.auto-import.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\codictation\\collection\\final project\\codictation\\codictation2.0\\codictation.2.3\\codictation\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBYTFNYIGZyb20gInhsc3giOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAiIiwgLy/lvZPliY3nlKjmiLfnmoTnlKjmiLflkI0KICAgICAgdXNlcklkOiAiIiwgLy/lvZPliY3nlKjmiLfnmoRfaWQgIOWPr+agueaNrui/meS4pOS4quS/oeaBr+WOu+aVsOaNruW6k1VzZXLlj5bmlbDmja4KICAgICAgYXBpOiAiL2FwaSIsCiAgICAgIG15UHVibGlzaGVkOiBbXSwKICAgICAgcGFnZXNpemU6IDgsCiAgICAgIGN1cnJlbnRwYWdlOiAxLAogICAgICBjdXJyZW50Q29udGVudDogW10sCiAgICAgIHNlbGVjdGVkVGFzazogW10sIC8vIGNoZWNrYm945omA6YCJ5Lit55qEIHRhc2sgdGl0bGUKICAgICAgaXNBbGw6IGZhbHNlLAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBjdXJyZW50cGFnZSgpIHsKICAgICAgdGhpcy5zaG93Q3VycmVudCh0aGlzLmN1cnJlbnRwYWdlKTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5uYW1lID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlck5hbWUiKTsKICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSk7CiAgICB0aGlzLiRheGlvcy5nZXQodGhpcy5hcGkgKyAiL3Byb2ZpbGU/bmFtZT0iICsgdGhpcy5uYW1lKS50aGVuKChyZXMpID0+IHsKICAgICAgdGhpcy51c2VySWQgPSByZXMuZGF0YVswXS5faWQ7IC8v5om+5Zyw5pa55L+d5a2YCiAgICAgIHRoaXMubXlQdWJsaXNoZWQgPSByZXMuZGF0YVswXS5teVB1Ymxpc2hlZC5yZXZlcnNlKCk7CiAgICAgIHRoaXMuc2hvd0N1cnJlbnQodGhpcy5jdXJyZW50cGFnZSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudENvbnRlbnQpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDov5vlhaXliLDku7vliqHor6bmg4XpobXpnaIKICAgIGludG9UYXNrKGluZGV4KSB7CiAgICAgIHZhciBkaWZmSWQgPSB0aGlzLm15UHVibGlzaGVkW2luZGV4XS50YXNrSWQ7IC8v5Lu75YqhX2lkCiAgICAgIHZhciBwYXRoID0gIi9kaWZmLyIgKyBkaWZmSWQ7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHBhdGgpOwogICAgfSwKICAgIC8vIOiAgeW4iOi/m+WFpeivpeS7u+WKoeWQhOS4quWtpueUn+W+l+WIhuaDheWGtemhtemdogogICAgc3RhcnRFeChpbmRleCkgewogICAgICB2YXIgZGlmZklkID0gdGhpcy5teVB1Ymxpc2hlZFtpbmRleF0udGFza0lkOyAvL+S7u+WKoV9pZAogICAgICB2YXIgcGF0aCA9ICIvZGlmZi8iICsgZGlmZklkOwogICAgICBpZiAodGhpcy5jdXJyZW50Q29udGVudFtpbmRleF0uYXZlclNjb3JlcykgewogICAgICAgIHBhdGggPSAiL2RpZmYvIiArIGRpZmZJZCArICIvc2NvcmVzIjsKICAgICAgfQogICAgICB0aGlzLiRyb3V0ZXIucHVzaChwYXRoKTsKICAgIH0sCiAgICBzaG93Q3VycmVudChjcGFnZSkgewogICAgICB2YXIgbWluID0gKGNwYWdlIC0gMSkgKiB0aGlzLnBhZ2VzaXplOwogICAgICB2YXIgbWF4ID0gY3BhZ2UgKiB0aGlzLnBhZ2VzaXplOwogICAgICB0aGlzLmN1cnJlbnRDb250ZW50ID0gdGhpcy5teVB1Ymxpc2hlZC5zbGljZShtaW4sIG1heCk7CiAgICB9LAogICAgLy/noa7lrprmlbDnu4Tph4zmmK/lkKbmnInmn5DkuKrlhYPntKAKICAgIGZpbmRFbGVtKGFycmF5VG9TZWFyY2gsIGF0dHIsIHZhbCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5VG9TZWFyY2gubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoYXJyYXlUb1NlYXJjaFtpXVthdHRyXSA9PSB2YWwpIHsKICAgICAgICAgIHJldHVybiBpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gLTE7CiAgICB9LAogICAgLy/liKDpmaR1c2VyLW15VGFza3Pph4zpnaLnmoTku7vliqEKICAgIGRlbGV0ZVRhc2sodGFza0lkKSB7CiAgICAgIHRoaXMuJHEKICAgICAgICAuZGlhbG9nKHsKICAgICAgICAgIHRpdGxlOiAiQ29uZmlybSBEZWxldGlvbiIsCiAgICAgICAgICBtZXNzYWdlOiAiRGVsZXRlIHRoaXMgdGFzayBwZXJtYW5lbnRseT8iLAogICAgICAgICAgb2s6IHsKICAgICAgICAgICAgcHVzaDogdHJ1ZSwKICAgICAgICAgIH0sCiAgICAgICAgICBjYW5jZWw6IHsKICAgICAgICAgICAgcHVzaDogdHJ1ZSwKICAgICAgICAgICAgY29sb3I6ICJuZWdhdGl2ZSIsCiAgICAgICAgICB9LAogICAgICAgICAgcGVyc2lzdGVudDogdHJ1ZSwKICAgICAgICB9KQogICAgICAgIC5vbk9rKCgpID0+IHsKICAgICAgICAgIHZhciBmaW5kX3Jlc3VsdCA9IHRoaXMuZmluZEVsZW0odGhpcy5teVB1Ymxpc2hlZCwgInRhc2tJZCIsIHRhc2tJZCk7CiAgICAgICAgICB0aGlzLm15UHVibGlzaGVkLnNwbGljZShmaW5kX3Jlc3VsdCwgMSk7CiAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuYXBpICsgIi9kZWxldGVNeVB1Ymxpc2hlZCIsIHsKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMubmFtZSwKICAgICAgICAgICAgICBteVB1Ymxpc2hlZDogdGhpcy5teVB1Ymxpc2hlZCwKICAgICAgICAgICAgICB0YXNrSWQ6IHRhc2tJZCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5zaG93Q3VycmVudCh0aGlzLmN1cnJlbnRwYWdlKTsKICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsKICAgICAgICAgICAgcHJvZ3Jlc3M6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJEZWxldGVkISIsCiAgICAgICAgICAgIGNvbG9yOiAicHVycGxlIiwKICAgICAgICAgICAgaWNvbjogImF1dG9fZGVsZXRlIiwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKCiAgICBleHBvcnRTZWxlY3RlZERhdGEoKSB7CiAgICAgIHZhciB3b3JrQm9vayA9IFhMU1gudXRpbHMuYm9va19uZXcoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm15UHVibGlzaGVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHRhYmxlSGVhZGVyID0gWwogICAgICAgICAgWwogICAgICAgICAgICAiU3R1ZGVudCIsCiAgICAgICAgICAgICJTY29yZSBvbiBtb2RpZmljYXRpb25zKFNNKSgiICsKICAgICAgICAgICAgICB0aGlzLm15UHVibGlzaGVkW2ldLmNvbmZpZ3VyYXRpb24uU01zY29yZSArCiAgICAgICAgICAgICAgIikiLAogICAgICAgICAgICAiU2NvcmUgb24gdGV4dHMgc2ltaWxhcml0eShTVFMpKCIgKyAoMTAwIC0gTnVtYmVyKHRoaXMubXlQdWJsaXNoZWRbaV0uY29uZmlndXJhdGlvbi5TTXNjb3JlKSkgKyAiKSIsCiAgICAgICAgICAgICJUb3RhbCBzY29yZSIsCiAgICAgICAgICBdLAogICAgICAgIF07IC8v6KGo5aS0CiAgICAgICAgdmFyIGRhdGFMaXN0ID0gW107CiAgICAgICAgdmFyIHNjb3Jlc0RhdGEgPSB0aGlzLm15UHVibGlzaGVkW2ldLnNjb3JlTGlzdDsKICAgICAgICB2YXIgdGFza1RpdGxlID0gdGhpcy5teVB1Ymxpc2hlZFtpXS50aXRsZTsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnNlbGVjdGVkVGFzay5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0gPT0gdGFza1RpdGxlKTsKICAgICAgICBpZiAoc2NvcmVzRGF0YSAhPSAiIiAmJiBpbmRleCAhPSAtMSkgewogICAgICAgICAgc2NvcmVzRGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAgIGRhdGFMaXN0LnB1c2goWwogICAgICAgICAgICAgIGl0ZW0ubmFtZSwKICAgICAgICAgICAgICBpdGVtLnRlY2hTY29yZXMsCiAgICAgICAgICAgICAgaXRlbS5tYXRjaFNjb3JlcywKICAgICAgICAgICAgICBpdGVtLnNjb3JlcywKICAgICAgICAgICAgXSk7CiAgICAgICAgICB9KTsgLy/ooajmlbDmja4KICAgICAgICAgIHZhciBzaGVldCA9IHRoaXMubXlQdWJsaXNoZWRbaV0udGl0bGU7CiAgICAgICAgICB2YXIgb3ZlcnZpZXcgPSBbXTsKICAgICAgICAgIG92ZXJ2aWV3LnB1c2goCiAgICAgICAgICAgIFsiQXZlcmFnZSBzY29yZShBUykiLCBTdHJpbmcodGhpcy5teVB1Ymxpc2hlZFtpXS5hdmVyU2NvcmVzKV0sCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICAiVGhlIG51bWJlciBvZiBwZW9wbGUgcGFzc2luZyBBUyIsCiAgICAgICAgICAgICAgU3RyaW5nKHRoaXMubXlQdWJsaXNoZWRbaV0uZXhjZWVkQXZlck51bSksCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIFsiVG90YWwgbnVtYmVyIG9mIHBlb3BsZSIsIFN0cmluZyhkYXRhTGlzdC5sZW5ndGgpXSwKICAgICAgICAgICAgWyJQYXNzIHJhdGUiLCBTdHJpbmcodGhpcy5teVB1Ymxpc2hlZFtpXS5wYXNzNjBSYXRlKV0sCiAgICAgICAgICAgIFsiUGFzcyBBUyByYXRlIiwgU3RyaW5nKHRoaXMubXlQdWJsaXNoZWRbaV0ucGFzc0F2ZXJSYXRlKV0sCiAgICAgICAgICAgIFsiTWF4IHNjb3JlIiwgU3RyaW5nKHRoaXMubXlQdWJsaXNoZWRbaV0ubWF4U2NvcmUpXSwKICAgICAgICAgICAgWyJNaW5pIHNjb3JlIiwgU3RyaW5nKHRoaXMubXlQdWJsaXNoZWRbaV0ubWluU2NvcmUpXQogICAgICAgICAgKTsKCiAgICAgICAgICB2YXIgYW9hID0gW107CiAgICAgICAgICB2YXIgYSA9IFtbXSwgW11dOyAvL+W9k2E9W1tdLFtdXeaXtuebuOW9k+S6juepuuS4pOihjAogICAgICAgICAgYW9hID0gb3ZlcnZpZXcuY29uY2F0KGEsIHRhYmxlSGVhZGVyLCBkYXRhTGlzdCk7CgogICAgICAgICAgdmFyIHdvcmtTaGVldCA9IFhMU1gudXRpbHMuYW9hX3RvX3NoZWV0KGFvYSk7CgogICAgICAgICAgWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldCh3b3JrQm9vaywgd29ya1NoZWV0LCBzaGVldCk7CiAgICAgICAgICAvL+S/neWtmAogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGZpbGVuYW1lID0gdGhpcy50aW1lc3RhbXAoKTsgLy/mlofku7blkI3vvIzku6Xml7bpl7Tlkb3lkI0KCiAgICAgIFhMU1gud3JpdGVGaWxlKHdvcmtCb29rLCBmaWxlbmFtZSArICIueGxzeCIpOwogICAgfSwgLy/lr7zlh7pFeGNlbOihqAoKICAgIGFkZDAobSkgewogICAgICByZXR1cm4gbSA8IDEwID8gIjAiICsgbSA6IG07CiAgICB9LAoKICAgIHRpbWVzdGFtcCgpIHsKICAgICAgLy/nlJ/miJDml7bpl7TmiLMKICAgICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgeSA9IHRpbWUuZ2V0RnVsbFllYXIoKTsKICAgICAgdmFyIG0gPSB0aW1lLmdldE1vbnRoKCkgKyAxOwogICAgICB2YXIgZCA9IHRpbWUuZ2V0RGF0ZSgpOwogICAgICB2YXIgaCA9IHRpbWUuZ2V0SG91cnMoKTsKICAgICAgdmFyIG1tID0gdGltZS5nZXRNaW51dGVzKCk7CiAgICAgIHZhciBzID0gdGltZS5nZXRTZWNvbmRzKCk7CgogICAgICByZXR1cm4gKAogICAgICAgIHkgKwogICAgICAgIHRoaXMuYWRkMChtKSArCiAgICAgICAgdGhpcy5hZGQwKGQpICsKICAgICAgICB0aGlzLmFkZDAoaCkgKwogICAgICAgIHRoaXMuYWRkMChtbSkgKwogICAgICAgIHRoaXMuYWRkMChzKQogICAgICApOwogICAgfSwKCiAgICBzZWxlY3RBbGwoKSB7CiAgICAgIC8v5YWo6YCJCiAgICAgIGlmICghdGhpcy5pc0FsbCkgewogICAgICAgIHRoaXMuY3VycmVudENvbnRlbnQuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgaWYgKGl0ZW0uYXZlclNjb3JlcykgewogICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFzay5wdXNoKGl0ZW0udGl0bGUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2VsZWN0ZWRUYXNrID0gQXJyYXkuZnJvbShuZXcgU2V0KHRoaXMuc2VsZWN0ZWRUYXNrKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFRhc2sgPSBbXTsKICAgICAgfQogICAgICB0aGlzLmlzQWxsID0gIXRoaXMuaXNBbGw7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["published.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"published.vue","sourceRoot":"src/components/profile","sourcesContent":["<template>\n  <q-page class=\"q-pa-lg\">\n    <h3 class=\"q-my-md\">Task List</h3>\n    <q-separator insert style=\"width: 55%\" />\n\n    <div\n      v-if=\"myPublished.length > 0\"\n      class=\"q-pa-md q-gutter-sm\"\n      style=\"max-width: 90%\"\n    >\n      <el-button type=\"primary\" @click=\"selectAll()\">Select All</el-button>\n      <el-button type=\"primary\" @click=\"exportSelectedData()\"\n        >Bulk Download</el-button\n      >\n      <q-list\n        bordered\n        class=\"rounded-borders row\"\n        style=\"max-width: 850px\"\n        v-model=\"currentContent\"\n        v-for=\"(item, index) in currentContent\"\n        :key=\"index\"\n      >\n        <q-item clickable @click=\"intoTask(index)\" class=\"col-9\">\n          <q-item-section avatar>\n            <q-checkbox\n              v-model=\"selectedTask\"\n              :val=\"item.title\"\n              color=\"cyan-7\"\n              v-if=\"item.averScores\"\n            />\n          </q-item-section>\n\n          <q-item-section avatar top>\n            <q-icon name=\"send\" color=\"purple\" size=\"28px\" />\n          </q-item-section>\n\n          <q-item-section top class=\"col-4 gt-sm\">\n            <q-item-label class=\"q-mt-sm\">{{ item.title }}</q-item-label>\n          </q-item-section>\n\n          <q-item-section top>\n            <q-item-label caption lines=\"1\">\n              <span class=\"text-grey\">Release Date: {{ item.time }}</span>\n            </q-item-label>\n            <q-item-label caption lines=\"1\">\n              <span class=\"text-purple-9\">Deadline: {{ item.deadline }}</span>\n            </q-item-label>\n          </q-item-section>\n        </q-item>\n\n        <q-item class=\"col-2\">\n          <q-item-section top side>\n            <div class=\"text-grey-8 q-gutter-xs\">\n              <q-btn\n                class=\"gt-xs\"\n                size=\"14px\"\n                flat\n                dense\n                @click=\"startEx(index)\"\n              >\n                {{ item.averScores ? item.averScores : \"SCORES\" }}\n              </q-btn>\n            </div>\n          </q-item-section>\n        </q-item>\n\n        <q-item class=\"col-1\">\n          <q-item-section top side>\n            <div class=\"text-grey-8 q-gutter-xs\">\n              <q-btn\n                class=\"gt-md text-red-9\"\n                size=\"16px\"\n                flat\n                round\n                dense\n                icon=\"delete_forever\"\n                @click=\"deleteTask(item.taskId)\"\n              />\n            </div>\n          </q-item-section>\n        </q-item>\n      </q-list>\n      <el-pagination\n        style=\"margin-top: 3%\"\n        background\n        layout=\"prev, pager, next\"\n        :total=\"myPublished.length\"\n        :page-size=\"pagesize\"\n        :current-page.sync=\"currentpage\"\n        hide-on-single-page\n      >\n      </el-pagination>\n    </div>\n\n    <div v-else>暂未发布任务~</div>\n  </q-page>\n</template>\n\n<script>\nimport XLSX from \"xlsx\";\n\nexport default {\n  data() {\n    return {\n      name: \"\", //当前用户的用户名\n      userId: \"\", //当前用户的_id  可根据这两个信息去数据库User取数据\n      api: \"/api\",\n      myPublished: [],\n      pagesize: 8,\n      currentpage: 1,\n      currentContent: [],\n      selectedTask: [], // checkbox所选中的 task title\n      isAll: false,\n    };\n  },\n  watch: {\n    currentpage() {\n      this.showCurrent(this.currentpage);\n    },\n  },\n  created() {\n    this.name = sessionStorage.getItem(\"userName\");\n    console.log(this.name);\n    this.$axios.get(this.api + \"/profile?name=\" + this.name).then((res) => {\n      this.userId = res.data[0]._id; //找地方保存\n      this.myPublished = res.data[0].myPublished.reverse();\n      this.showCurrent(this.currentpage);\n      console.log(this.currentContent);\n    });\n  },\n  methods: {\n    // 进入到任务详情页面\n    intoTask(index) {\n      var diffId = this.myPublished[index].taskId; //任务_id\n      var path = \"/diff/\" + diffId;\n      this.$router.push(path);\n    },\n    // 老师进入该任务各个学生得分情况页面\n    startEx(index) {\n      var diffId = this.myPublished[index].taskId; //任务_id\n      var path = \"/diff/\" + diffId;\n      if (this.currentContent[index].averScores) {\n        path = \"/diff/\" + diffId + \"/scores\";\n      }\n      this.$router.push(path);\n    },\n    showCurrent(cpage) {\n      var min = (cpage - 1) * this.pagesize;\n      var max = cpage * this.pagesize;\n      this.currentContent = this.myPublished.slice(min, max);\n    },\n    //确定数组里是否有某个元素\n    findElem(arrayToSearch, attr, val) {\n      for (var i = 0; i < arrayToSearch.length; i++) {\n        if (arrayToSearch[i][attr] == val) {\n          return i;\n        }\n      }\n      return -1;\n    },\n    //删除user-myTasks里面的任务\n    deleteTask(taskId) {\n      this.$q\n        .dialog({\n          title: \"Confirm Deletion\",\n          message: \"Delete this task permanently?\",\n          ok: {\n            push: true,\n          },\n          cancel: {\n            push: true,\n            color: \"negative\",\n          },\n          persistent: true,\n        })\n        .onOk(() => {\n          var find_result = this.findElem(this.myPublished, \"taskId\", taskId);\n          this.myPublished.splice(find_result, 1);\n          this.$axios.post(this.api + \"/deleteMyPublished\", {\n            params: {\n              username: this.name,\n              myPublished: this.myPublished,\n              taskId: taskId,\n            },\n          });\n          this.showCurrent(this.currentpage);\n          this.$q.notify({\n            progress: true,\n            message: \"Deleted!\",\n            color: \"purple\",\n            icon: \"auto_delete\",\n          });\n        });\n    },\n\n    exportSelectedData() {\n      var workBook = XLSX.utils.book_new();\n      for (var i = 0; i < this.myPublished.length; i++) {\n        var tableHeader = [\n          [\n            \"Student\",\n            \"Score on modifications(SM)(\" +\n              this.myPublished[i].configuration.SMscore +\n              \")\",\n            \"Score on texts similarity(STS)(\" + (100 - Number(this.myPublished[i].configuration.SMscore)) + \")\",\n            \"Total score\",\n          ],\n        ]; //表头\n        var dataList = [];\n        var scoresData = this.myPublished[i].scoreList;\n        var taskTitle = this.myPublished[i].title;\n        var index = this.selectedTask.findIndex((item) => item == taskTitle);\n        if (scoresData != \"\" && index != -1) {\n          scoresData.forEach((item) => {\n            dataList.push([\n              item.name,\n              item.techScores,\n              item.matchScores,\n              item.scores,\n            ]);\n          }); //表数据\n          var sheet = this.myPublished[i].title;\n          var overview = [];\n          overview.push(\n            [\"Average score(AS)\", String(this.myPublished[i].averScores)],\n            [\n              \"The number of people passing AS\",\n              String(this.myPublished[i].exceedAverNum),\n            ],\n            [\"Total number of people\", String(dataList.length)],\n            [\"Pass rate\", String(this.myPublished[i].pass60Rate)],\n            [\"Pass AS rate\", String(this.myPublished[i].passAverRate)],\n            [\"Max score\", String(this.myPublished[i].maxScore)],\n            [\"Mini score\", String(this.myPublished[i].minScore)]\n          );\n\n          var aoa = [];\n          var a = [[], []]; //当a=[[],[]]时相当于空两行\n          aoa = overview.concat(a, tableHeader, dataList);\n\n          var workSheet = XLSX.utils.aoa_to_sheet(aoa);\n\n          XLSX.utils.book_append_sheet(workBook, workSheet, sheet);\n          //保存\n        }\n      }\n\n      var filename = this.timestamp(); //文件名，以时间命名\n\n      XLSX.writeFile(workBook, filename + \".xlsx\");\n    }, //导出Excel表\n\n    add0(m) {\n      return m < 10 ? \"0\" + m : m;\n    },\n\n    timestamp() {\n      //生成时间戳\n      var time = new Date();\n      var y = time.getFullYear();\n      var m = time.getMonth() + 1;\n      var d = time.getDate();\n      var h = time.getHours();\n      var mm = time.getMinutes();\n      var s = time.getSeconds();\n\n      return (\n        y +\n        this.add0(m) +\n        this.add0(d) +\n        this.add0(h) +\n        this.add0(mm) +\n        this.add0(s)\n      );\n    },\n\n    selectAll() {\n      //全选\n      if (!this.isAll) {\n        this.currentContent.forEach((item) => {\n          if (item.averScores) {\n            this.selectedTask.push(item.title);\n          }\n        });\n        this.selectedTask = Array.from(new Set(this.selectedTask));\n      } else {\n        this.selectedTask = [];\n      }\n      this.isAll = !this.isAll;\n    },\n  },\n};\n</script>\n\n<style>\n.q-item__section.column.q-item__section--top.q-item__section--main.justify-start {\n  flex-direction: column;\n}\n.q-item__section.column.q-item__section--top.q-item__section--main.justify-start {\n  justify-content: space-between;\n}\ni.material-icons.q-icon.notranslate.text-purple {\n  margin-top: 0.23em;\n}\n.q-item__section.column.col-4.gt-sm.q-item__section--top.q-item__section--main.justify-start {\n  padding-top: 0.15em;\n}\n.q-item.q-item-type.row.no-wrap.col-2 {\n  margin-top: 0.3em;\n}\n.q-notifications__list--bottom {\n  right: 50px;\n  left: auto;\n  bottom: 20px;\n}\n</style>\n"]}]}