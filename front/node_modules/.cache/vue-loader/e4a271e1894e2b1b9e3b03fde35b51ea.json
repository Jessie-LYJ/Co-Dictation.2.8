{"remainingRequest":"F:\\codictation.2.6\\codictation\\codictation\\codictation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\codictation.2.6\\codictation\\codictation\\codictation\\src\\components\\profile\\mycomments.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"F:\\codictation.2.6\\codictation\\codictation\\codictation\\src\\components\\profile\\mycomments.vue","mtime":1615679288298},{"path":"F:\\codictation.2.6\\codictation\\codictation\\codictation\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\codictation.2.6\\codictation\\codictation\\codictation\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\codictation.2.6\\codictation\\codictation\\codictation\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\codictation.2.6\\codictation\\codictation\\codictation\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.auto-import.js","mtime":499162500000},{"path":"F:\\codictation.2.6\\codictation\\codictation\\codictation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\codictation.2.6\\codictation\\codictation\\codictation\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNvbW1lbnQtYm94IHsKICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsKfQoucS1pdGVtX19zZWN0aW9uLmNvbHVtbi5xLWl0ZW1fX3NlY3Rpb24tLW1haW4uanVzdGlmeS1jZW50ZXIgewogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKfQo="},{"version":3,"sources":["mycomments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HA;AACA;AACA;AACA;AACA;AACA","file":"mycomments.vue","sourceRoot":"src/components/profile","sourcesContent":["<template>\n<q-page class=\"q-pa-md\">\n    <h3 class=\"q-my-md\">Comments</h3>\n    <q-separator insert style=\"width: 55%\" />\n    <div v-if=\"commentList.length > 0\" class=\"q-pa-md\" style=\"max-width: 85%\">\n        <q-list v-for=\"(item, index) in commentList\" :key=\"index\" v-model=\"commentList\">\n            <q-expansion-item popup default-opened :caption=\"item.taskPublisher\" :content-inset-level=\"0.5\">\n                <template v-slot:header>\n                    <q-item-section avatar>\n                        <q-avatar icon=\"assignment\" color=\"primary\" text-color=\"white\" />\n                    </q-item-section>\n\n                    <q-item-section>\n                        {{ item.taskTitle }}\n                        <span class=\"text-grey text-caption\">By {{ item.taskPublisher }}</span>\n                    </q-item-section>\n\n                    <q-item-section side>\n                        <div class=\"row items-center\">\n                            <q-btn flat color=\"pink-4\" label=\"View Details\" @click=\"intoTask(index)\"/>\n                        </div>\n                    </q-item-section>\n                </template>\n                <q-separator />\n                <q-card v-for=\"(subItem, i) in item.child\" :key=\"i\">\n                    <q-card-section class=\"row\">\n                        <q-item-section side>\n                            <q-icon name=\"comment\" class=\"text-purple\" style=\"font-size: 1.35em\" />\n                        </q-item-section>\n                        <q-item-section class=\"comment-box\">\n                            {{ subItem.comment }}\n                        </q-item-section>\n                        <q-item-section side>\n                            {{ subItem.time }}\n                        </q-item-section>\n                    </q-card-section>\n                    <div v-if=\"subItem.replies.length > 0\">\n                        <q-expansion-item expand-separator icon=\"reply_all\" :content-inset-level=\"0.5\" label=\"View All Replies\" header-class=\"text-grey-6\">\n                            <q-separator />\n                            <q-card  v-for=\"(repItem, key) in subItem.replies\" :key=\"key\">\n                                <q-card-section class=\"row\">\n                                    <q-item-section side>\n                                        <q-icon name=\"question_answer\" class=\"text-purple\" style=\"font-size: 1.35em\" />\n                                    </q-item-section>\n                                    <q-item-section class=\"comment-box\">\n                                        <span><em class=\"text-bold\">{{ repItem.responder }}</em> --- {{ repItem.comment }}</span>\n                                    </q-item-section>\n                                    <q-item-section side>\n                                        {{ repItem.time }}\n                                    </q-item-section>\n                                </q-card-section>\n                            </q-card>\n                        </q-expansion-item>\n                    </div>\n                    <q-separator />\n                </q-card>\n            </q-expansion-item>\n        </q-list>\n    </div>\n    <div v-else>你还没发过任何评论哟~快去发表你的评论吧！</div>\n</q-page>\n</template>\n\n<script>\n\nexport default {\n    data() {\n        return {\n            name: \"\", //当前用户的用户名\n            userId: \"\", //当前用户的_id  可根据这两个信息去数据库User取数据\n            api: \"/api\",\n            commentList: [],\n        }\n    },\n    methods: {\n        // 进入到任务详情页面\n        intoTask(index) {\n            var diffId = this.commentList[index].taskId; //任务_id\n            var path = \"/diff/\" + diffId;\n            this.$axios.get(this.api + \"/currentTask?_id=\" + diffId).then((res) => {\n                if (res.data.length == 0) {\n                this.$notify({\n                    type: \"warning\",\n                    message: \"该任务已被发布者删除！\",\n                    position: \"top-right\",\n                    offset: 100,\n                });\n                } else {\n                this.$router.push(path);\n                }\n            });\n        },\n    },\n    created() {\n        this.name = sessionStorage.getItem(\"userName\");\n        console.log(this.name);\n        this.$axios.get(this.api + \"/profile?name=\" + this.name).then((res) => {\n            this.userId = res.data[0]._id; //找地方保存\n            var myComments = res.data[0].myComments // 从数据库中获取“myComments”对象数组\n            console.log(\"myComments\", myComments);\n\n            // 根据相同的taskTitle，合并“myComments”数组，形成新数组“commentList”\n            var commentsInfo = {};\n            myComments.forEach((item) => {\n                var { taskTitle } = item;\n                if (!commentsInfo[taskTitle]) {\n                    commentsInfo[taskTitle] = {\n                        taskTitle,\n                        taskPublisher: item.taskPublisher,\n                        taskId: item.taskId,\n                        child: []\n                    }\n                }\n                commentsInfo[taskTitle].child.push({\n                    comment: item.comment,\n                    time: item.time,\n                    replies: item.reply,\n                });\n            });\n            this.commentList = Object.values(commentsInfo);\n        });\n    },\n}\n</script>\n\n<style>\n.comment-box {\n    justify-content: flex-start;\n}\n.q-item__section.column.q-item__section--main.justify-center {\n    flex-direction: column;\n}\n</style>\n"]}]}